<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Li Chao" />
        <meta name="copyright" content="Li Chao" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="ipdb, pudb, python, ipython, Tech, " />

<meta property="og:title" content="Debug Python Script "/>
<meta property="og:url" content="/debug-python-script.html" />
<meta property="og:description" content="Updated for debugging technics when analyzing logistic regression script of &#34;Data Science from Scratch&#34;, chapter 16 in PyCharm 2017.3. See details in wiznote/diary/2017.12.27. Origin post: Now I want to dubug a script named filteringdata.py. PyCharm Community Edition It&#39;s editor (with IdeaVim plugin), linter and …" />
<meta property="og:site_name" content="DarkMatter in Cyberspace" />
<meta property="og:article:author" content="Li Chao" />
<meta property="og:article:published_time" content="2016-02-16T20:55:37+08:00" />
<meta property="" content="2017-12-27T20:12:34+08:00" />
<meta name="twitter:title" content="Debug Python Script ">
<meta name="twitter:description" content="Updated for debugging technics when analyzing logistic regression script of &#34;Data Science from Scratch&#34;, chapter 16 in PyCharm 2017.3. See details in wiznote/diary/2017.12.27. Origin post: Now I want to dubug a script named filteringdata.py. PyCharm Community Edition It&#39;s editor (with IdeaVim plugin), linter and …">

        <title>Debug Python Script  · DarkMatter in Cyberspace
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/custom.css" media="screen">
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="/"><span class=site-name>DarkMatter in Cyberspace</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="">Home</a></li>
                            <li ><a href="/categories.html">Categories</a></li>
                            <li ><a href="/tags.html">Tags</a></li>
                            <li ><a href="/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="/debug-python-script.html"> Debug Python Script  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <hr>
<p>Updated for debugging technics when analyzing logistic regression script
of "Data Science from Scratch", chapter 16 in PyCharm 2017.3.
See details in wiznote/diary/2017.12.27.</p>
<p>Origin post:</p>
<p>Now I want to dubug a script named <code>filteringdata.py</code>.</p>
<h1>PyCharm Community Edition</h1>
<p>It's editor (with IdeaVim plugin), linter and debugger is
the most powerful and verbose in the 3 candidates.</p>
<p>Add the following lines into ~/.ideavimrc:</p>
<div class="highlight"><pre><span></span>set nocompatible
set clipboard=unnamedplus
nnoremap ; :
nnoremap : ;
vnoremap ; :
vnoremap : ;
</pre></div>


<p>The code navigation shortcut "Ctrl-Alt-Left/Right" of the default keymap
"Default for XWin" (in File -&gt; Settings) is conflict with
"Switch workspace"'s shortcut key of Ubuntu Unity.
So change the "Keymaps" to "Default for GNOME", whose code navigation key
is "Alt-Shift-Left/Right".</p>
<h2>Editor Setup</h2>
<p>Setup editor font size:  [Font -&gt; Primary font -&gt; Size: 16]</p>
<p>Setup editor background to pure dark: [General -&gt; Text -&gt; Default text],
click the "Background" color icon, set R,G,B to 0,
click the "Foreground" color icon, set R,G,B to 255.</p>
<p>Set right margin :
[File -&gt; Settings -&gt; Editor -&gt; Code Style -&gt; General: Right margin (columns)],
set it's value to 80 instead of the default value 120.</p>
<p>Jump between editor and terminal: modify it to Alt-K (default: Alt-F12)
[File -&gt; Settings -&gt; Keymap]: search "terminal", double click "Terminal",
choose "Add Keyboard Shortcut".</p>
<h2>Some Shortcuts</h2>
<p>Toggle Project View: Alt-1</p>
<p>Split window: Ctrl-Shift-A, input "split", select "Split vertical/horizontal"</p>
<p>Jump between files: Ctrl-Shift-N</p>
<p>Jump between editor tabs and split window: Ctrl-Tab</p>
<p>Full screen: [View -&gt; Enter Full Screen]</p>
<p>Clipboard history: Ctrl-Shift-v</p>
<p>Jump to previous/next function: Alt-Up/Down</p>
<h2>Discussion</h2>
<p>You can switch easily between "Console" and "Debugger" panels.
The Console panel distinguishes stdout and stderr with different colors,
which is particularly useful when debugging some programs
with both stdout and stderr outputs.</p>
<p>Meanwhile you can evaluate an expression at the runtime in "Watches" window.</p>
<h1>pudb</h1>
<p>Comparing with ipdb, pudb needn't add stub in source script.</p>
<p>Install:</p>
<div class="highlight"><pre><span></span>sudo pip install pudb
sudo chown -R leo:leo ~/.config/pudb
</pre></div>


<p>Or the Python3 version: <code>pip3 search pudb3</code>.</p>
<p>Debug Python script: <code>pudb filteringdata.py</code> (<code>pudb3 myPy3App.py</code> for Python3)
or with command line arguments: <code>pudb uploadES.py fairs.json production Fair</code>.</p>
<p>Use <code>?</code> to list all available commands.</p>
<p>Focus code window with <code>C</code>
(which is the default window focused once you are in pudb), <code>n</code> to step over,
<code>s</code> step into , <code>f</code> finish current function (like step out), <code>c</code> continue,
<code>o</code> to see the console output (very useful!).</p>
<p>Focus variable window with <code>V</code>.
In this window:
use <code>w</code> to toggle line wrap,
<code>[</code>/<code>]</code> to grow/shrink relative size of the window,
<code>=</code>/<code>-</code> to grow/shrink sidebar.
<code>\</code> to expand/collapse variable result.</p>
<p>Toggle focus on command line with 'Ctrl-x'.</p>
<h1>ipdb</h1>
<p>There are totally 3 steps when debugging a Python script with
ipdb module: install, insert stubs in source codes and debug.</p>
<p>First install with <code>sudo pip install ipdb</code>.</p>
<p>Then add <code>from ipdb import set_trace</code> at the head into the script,
and add <code>set_trace()</code> at the first place you want the dubugger to stop.</p>
<p>Finally start a shell and run:</p>
<div class="highlight"><pre><span></span>$ ipython
...
IPython <span class="m">4</span>.0.1 ...
...
In <span class="o">[</span><span class="m">1</span><span class="o">]</span>: %run filteringdata.py
&gt; /home/leo/docs/playground/pg2dm-python/ch2/filteringdata.py<span class="o">(</span><span class="m">53</span><span class="o">)</span>recommend<span class="o">()</span>
     <span class="m">52</span>     <span class="c1"># first find nearest neighbor</span>
---&gt; <span class="m">53</span>     <span class="nv">nearest</span> <span class="o">=</span> computeNearestNeighbor<span class="o">(</span>username, users<span class="o">)[</span><span class="m">0</span><span class="o">][</span><span class="m">1</span><span class="o">]</span>
     <span class="m">54</span>

ipdb&gt; h
</pre></div>


<p>Frequently used commands include:</p>
<div class="highlight"><pre><span></span><span class="n">a</span><span class="o">:</span> <span class="n">print</span> <span class="n">args</span> <span class="n">of</span> <span class="n">current</span> <span class="kd">function</span><span class="o">;</span>
<span class="n">b</span><span class="o">:</span> <span class="kd">set</span> <span class="n">or</span> <span class="n">list</span> <span class="k">break</span> <span class="n">points</span><span class="o">;</span>
<span class="n">c</span><span class="o">:</span> <span class="k">continue</span> <span class="n">to</span> <span class="n">next</span> <span class="k">break</span> <span class="n">points</span><span class="o">;</span>
<span class="n">n</span><span class="o">:</span> <span class="n">next</span><span class="o">;</span>
<span class="n">s</span><span class="o">:</span> <span class="n">step</span><span class="o">;</span>
<span class="n">p</span> <span class="o">&amp;</span> <span class="n">pp</span><span class="o">:</span> <span class="n">evaluate</span> <span class="n">and</span> <span class="n">print</span> <span class="n">value</span> <span class="n">of</span> <span class="n">an</span> <span class="n">expression</span><span class="o">;</span>
<span class="n">pp</span> <span class="n">locals</span><span class="o">():</span> <span class="n">pretty</span><span class="o">-</span><span class="n">print</span> <span class="n">all</span> <span class="n">local</span> <span class="n">variables</span><span class="o">;</span>
<span class="n">q</span><span class="o">:</span> <span class="n">quit</span><span class="o">;</span>
</pre></div>


<p>Use <code>h a</code> to see the help information about command <code>a</code>.</p>
            
            
            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2016-02-16T20:55:37+08:00">Feb 16, 2016</time>

<h4>Last Updated</h4>
<time datetime="2017-12-27T20:12:34+08:00">Dec 27, 2017</time>

            <h4>Category</h4>
            <a class="category-link" href="/categories.html#tech-ref">Tech</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="/tags.html#ipdb-ref">ipdb
                    <span>2</span>
</a></li>
                <li><a href="/tags.html#ipython-ref">ipython
                    <span>4</span>
</a></li>
                <li><a href="/tags.html#pudb-ref">pudb
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#python-ref">python
                    <span>110</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="#" title="My You can add links in your config file Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-you can add links in your config file sidebar-social-links"></i></a>
    <a href="#" title="My Another social link Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-another social link sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>