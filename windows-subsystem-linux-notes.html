<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Li Chao" />
        <meta name="copyright" content="Li Chao" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="wsl, linux, Tech, " />

<meta property="og:title" content="Windows subsystem Linux Notes"/>
<meta property="og:url" content="http://leetschau.github.io/windows-subsystem-linux-notes.html" />
<meta property="og:description" content="Install WSL 安装 Windows Subsystem for Linux （简称WSL）中的 Ubuntu， 只需要在【控制面板 &gt; 程序 &gt; 程序和功能 &gt; 启动或关闭 Windows 功能】中勾选 【适用于 Linux 的 Windows 子系统】后重启， 然后在 Windows Store 中搜索 Ubuntu 并安装，下载大小195.7MB的安装包， 整个安装过程非常流畅。启动后可以运行 apt 命令更新和安装应用，界面也比较靠谱。 Install Softwares 在笔记本的WSL里不能用appimage，所以neovim PPA安装了neovim， 用 sudo update-alternatives --config vim 用nvim代替了vim， 在WSL上安装zsh和neovim等各种工具都没问题。 终端模拟器 …" />
<meta property="og:site_name" content="DarkMatter in Cyberspace" />
<meta property="og:article:author" content="Li Chao" />
<meta property="og:article:published_time" content="2018-05-06T17:43:10+08:00" />
<meta property="" content="2020-11-19T13:51:50+08:00" />
<meta name="twitter:title" content="Windows subsystem Linux Notes">
<meta name="twitter:description" content="Install WSL 安装 Windows Subsystem for Linux （简称WSL）中的 Ubuntu， 只需要在【控制面板 &gt; 程序 &gt; 程序和功能 &gt; 启动或关闭 Windows 功能】中勾选 【适用于 Linux 的 Windows 子系统】后重启， 然后在 Windows Store 中搜索 Ubuntu 并安装，下载大小195.7MB的安装包， 整个安装过程非常流畅。启动后可以运行 apt 命令更新和安装应用，界面也比较靠谱。 Install Softwares 在笔记本的WSL里不能用appimage，所以neovim PPA安装了neovim， 用 sudo update-alternatives --config vim 用nvim代替了vim， 在WSL上安装zsh和neovim等各种工具都没问题。 终端模拟器 …">

        <title>Windows subsystem Linux Notes · DarkMatter in Cyberspace
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="http://leetschau.github.io/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://leetschau.github.io/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://leetschau.github.io/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://leetschau.github.io/theme/css/custom.css" media="screen">
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="http://leetschau.github.io/"><span class=site-name>DarkMatter in Cyberspace</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="http://leetschau.github.io">Home</a></li>
                            <li ><a href="http://leetschau.github.io/categories.html">Categories</a></li>
                            <li ><a href="http://leetschau.github.io/tags.html">Tags</a></li>
                            <li ><a href="http://leetschau.github.io/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="http://leetschau.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="http://leetschau.github.io/windows-subsystem-linux-notes.html"> Windows subsystem Linux Notes </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <hr>
<h1>Install WSL</h1>
<p>安装 <a href="https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux">Windows Subsystem for Linux</a>
（简称WSL）中的 Ubuntu，
只需要在【控制面板 &gt; 程序 &gt; 程序和功能 &gt; 启动或关闭 Windows 功能】中勾选
【适用于 Linux 的 Windows 子系统】后重启，
然后在 Windows Store 中搜索 Ubuntu 并安装，下载大小195.7MB的安装包，
整个安装过程非常流畅。启动后可以运行 <code>apt</code> 命令更新和安装应用，界面也比较靠谱。</p>
<h1>Install Softwares</h1>
<p>在笔记本的WSL里不能用appimage，所以neovim PPA安装了neovim，
用 <code>sudo update-alternatives --config vim</code> 用nvim代替了vim，
在WSL上安装zsh和neovim等各种工具都没问题。</p>
<h1>终端模拟器</h1>
<h2>Windows Terminal</h2>
<p>MS 2019 年在 Github 上开源的 Windows Terminal 表现不俗，
是目前比较好的终端模拟器。</p>
<p>通过 Windows Store 安装后，可以选择多种环境，默认是 PowerShell，
启动应用后用快捷键 Ctrl-,（逗号）打开配置文件，
在里面可以设置启动哪个命令行应用（在下面的列表里选择，有 cmd, PowerShell, WSL 等），
启动时最大化等：</p>
<div class="highlight"><pre><span></span><code><span class="err">{</span>
<span class="err">  &quot;defaultProfile&quot;: &quot;{c6eaf9f4-32a7-5fdc-b5cf-066e8a4b1e40}&quot;,</span>
<span class="err">  &quot;copyOnSelect&quot;: true,</span>
<span class="err">  &quot;launchMode&quot;: &quot;maximized&quot;,</span>
<span class="err">  &quot;profiles&quot;:</span>
<span class="err">  {</span>
<span class="err">    ...</span>
<span class="err">    &quot;list&quot;:</span>
<span class="err">      [</span>
<span class="err">      ...</span>
<span class="err">      {</span>
<span class="err">        &quot;guid&quot;: &quot;{c6eaf9f4-32a7-5fdc-b5cf-066e8a4b1e40}&quot;,</span>
<span class="err">        &quot;hidden&quot;: false,</span>
<span class="err">        &quot;name&quot;: &quot;Ubuntu-18.04&quot;,</span>
<span class="err">        &quot;source&quot;: &quot;Windows.Terminal.Wsl&quot;,</span>
<span class="err">        &quot;startingDirectory&quot; : &quot;//wsl$/Ubuntu-18.04/home/leo&quot;</span>
<span class="err">      },</span>
<span class="err">    ]</span>
<span class="err">  },</span>
<span class="err">...</span>
<span class="err">}</span>
</code></pre></div>


<p>Note:</p>
<ul>
<li><code>defaultProfile</code> 后面的 UUID 来自于配置文件下面 profiles.list 列表里
  Ubuntu 18.04 对应 profile 的 UUID；</li>
<li><code>startingDirectory</code> 的路径格式为 <code>//wsl$/&lt;distro-name&gt;/home/&lt;username&gt;</code>，
  参考 <a href="https://docs.microsoft.com/en-us/windows/terminal/troubleshooting">Troubleshooting in Windows Terminal</a>
  中 "Set your WSL distribution to start in the home ~ directory when launched" 一节。</li>
<li>See all profile settings at <a href="https://docs.microsoft.com/en-us/windows/terminal/customize-settings/profile-settings">Profile settings in Windows Terminal</a></li>
</ul>
<h3>Customize font size</h3>
<p>Ctrl plus +/- to increase/decrease font size.</p>
<h3>Start Windows Terminal with keyboard shortcut</h3>
<p>To start Windows Terminal with shortcut <code>Alt-t</code>,
add the following line into AutoHotkey script:</p>
<div class="highlight"><pre><span></span><code><span class="sx">!t:: Run wt --maximized</span>
</code></pre></div>


<h2>cmder</h2>
<p>优点是方便的指定字体、字号，方便地更换系统文字配色，
例如在 [Settings &gt; Features &gt; Colors &gt; Schemas] 中选 <em>Cobalt2</em>，
能比较好的解决下面Windows自带模拟器显示目录和REPL文字看不清问题。</p>
<p>在 [Settings &gt; Startup &gt; Tasks] 中新增一个task，名字为 <em>WSL</em>，
命令输入框里输入：<code>wsl.exe</code>.
Hotkey: Ctrl-Alt-w.</p>
<p>P.S.: 使用 <code>wslconfig /l</code> 列出所有 WSL 系统，使用 <code>wslconfig /s</code> 设置默认distro。</p>
<h3>集成 Git Bash</h3>
<p>在 [Settings &gt; Startup &gt; Tasks] 中新增一个task，名字为 <em>Git Bash</em>，
命令输入框里写：<code>"C:\Program Files\Git\bin\bash.exe" --cd-to-home</code>
参数框中输入：<code>/icon "C:\Program Files\Git\mingw64\share\git\git-for-windows.ico"</code>.
Hotkey: Ctrl-Alt-g.</p>
<p>P.S.: 使用Ctrl-1, Ctrl-2, ... 在 cmder 的各个窗口间切换。
将第一个窗口固定为WSL，第2个窗口固定为ssh服务器，第3个窗口固定为dsnote笔记。
WSL和服务器上都可以使用各自的tmux系统，用alt-a, alt-s, alt-d在 tmux 内切换。</p>
<h2>使用 Windows 自带的终端模拟程序</h2>
<p>使用Windows自带的终端模拟程序问题很多，例如：</p>
<ul>
<li>WSL字体如果设置成Consolas，总是自动变回 <em>新宋体</em>。</li>
</ul>
<p>解决方法：下载 <a href="https://github.com/Microsoft/BashOnWindows/files/1362006/Microsoft.YaHei.Mono.zip">Microsoft YaHei Mono</a>
并安装（下载后解压双击ttf文件就可以安装了），
然后在WSL里设置成 <em>Microsoft YaHei Mono</em> 就可以了，
参考 <a href="https://www.zhihu.com/question/46967766">请问如何更换bash on ubuntu on windows10的字体？</a>。</p>
<ul>
<li>目录和 ClojureScript REPL 输出的暗蓝色文字看不清楚。</li>
</ul>
<p>解决方法：目录字体的颜色可以通过修改<code>LS_COLOR</code>解决，例如在~/.zshrc中加入：
`export LS_COLORS=$LS_COLORS:'di=1;32:ow=01;36;'.
命令行输出文字的输出就比较麻烦了，所以建议不要用这个模拟器。</p>
<p>另：在 autohotkey 中添加 <code>!^w:: Run, "wsl.exe"</code>，实现使用 Ctrl-Alt-w 启动，
启动后目录不在根目录，解决方法是在 ~/.zshrc 里加一行 <code>cd $HOME</code>。</p>
            
            
            <hr/>
            <script src="https://utteranc.es/client.js"
                    repo="leetschau/leetschau.github.io"
                    issue-term="pathname"
                    theme="github-light"
                    crossorigin="anonymous"
                    async>
            </script>
            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2018-05-06T17:43:10+08:00">May 6, 2018</time>

<h4>Last Updated</h4>
<time datetime="2020-11-19T13:51:50+08:00">Nov 19, 2020</time>

            <h4>Category</h4>
            <a class="category-link" href="http://leetschau.github.io/categories.html#tech-ref">Tech</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="http://leetschau.github.io/tags.html#linux-ref">linux
                    <span>158</span>
</a></li>
                <li><a href="http://leetschau.github.io/tags.html#wsl-ref">wsl
                    <span>1</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="#" title="My You can add links in your config file Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-you can add links in your config file sidebar-social-links"></i></a>
    <a href="#" title="My Another social link Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-another social link sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>