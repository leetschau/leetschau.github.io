
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Trace File Change History in Git Repository - Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
  <meta name="description" content="The website need hide some menu items under developing,
by comment out the html codes (at line 19~24 in file &ldquo;client/comTemp.html&rdquo;).
But &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leetschau.github.io/blog/2015/06/30/101243/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
    <h2>A notes repository for Meteor.js, data mining, Linux, etc.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="leetschau.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Trace File Change History in Git Repository</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-06-30T10:12:43+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:12 am</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>The website need hide some menu items under developing,
by comment out the html codes (at line 19~24 in file &ldquo;client/comTemp.html&rdquo;).
But last night we found they reappeared in the newest version.
Apparently someone used the older version (in which they were not commented out)
overwrite the latest version by error (without intention).</p>

<p>How to find out who, at which commit make this mistake?</p>

<p><strong>Step 1</strong>: get the error version.</p>

<pre><code>$ git blame -L 19,24 client/comTemp.html
dc7d385a (Tom     2015-06-26 17:39:28 +0800 19)    &lt;li&gt;
8b64184a (Bob     2015-05-04 19:32:43 +0800 20)      &lt;a href="/mall"&gt;Mall&lt;/a&gt;
6bb3ba70 (Franky  2015-05-04 15:45:50 +0800 21)    &lt;/li&gt;
6bb3ba70 (Franky  2015-05-04 15:45:50 +0800 22)    &lt;li&gt;
8b64184a (Bob     2015-05-04 19:32:43 +0800 23)      &lt;a href="/services"&gt;Services&lt;/a&gt;
dc7d385a (Tom     2015-06-26 17:39:28 +0800 24)    &lt;/li&gt;
</code></pre>

<p>Here the line 19 should be <code>&lt;!--&lt;li&gt;</code> and line 24 should be <code>&lt;/li&gt;--&gt;</code>,
to hide &ldquo;Mall&rdquo; and &ldquo;Services&rdquo;, which are under developing.</p>

<p><strong>Step 2</strong>: get the newest right version.</p>

<p>The wrong commit is &ldquo;dc7d385a&rdquo;, so we have to find the nearest change <strong>before</strong> it:</p>

<pre><code>$ git blame -L 19,24 'dc7d385a^' -- client/comTemp.html
96269db1 (Bob     2015-06-10 15:36:31 +0800 19)    &lt;!--&lt;li&gt;
8b64184a (Bob     2015-05-04 19:32:43 +0800 20)      &lt;a href="/mall"&gt;Mall&lt;/a&gt;
6bb3ba70 (Franky  2015-05-04 15:45:50 +0800 21)    &lt;/li&gt;
6bb3ba70 (Franky  2015-05-04 15:45:50 +0800 22)    &lt;li&gt;
8b64184a (Bob     2015-05-04 19:32:43 +0800 23)      &lt;a href="/services"&gt;Services&lt;/a&gt;
96269db1 (Bob     2015-06-10 15:36:31 +0800 24)    &lt;/li&gt;--&gt;
</code></pre>

<p>So we know Mall and Services were commented out at commit 96269db1, 2015-06-10,
and uncommented by error at commit dc7d385a, 2015-06-26, by Tom.</p>

<p><strong>Step 3</strong>: show code changes.</p>

<pre><code>$ git show dc7d385a -- client/comTemp.htm
...
-    &lt;!--&lt;li&gt;
+    &lt;li&gt;
       &lt;a href="/mall"&gt;Mall&lt;/a&gt;
     &lt;/li&gt;
     &lt;li&gt;
       &lt;a href="/services"&gt;Services&lt;/a&gt;
-    &lt;/li&gt;--&gt;
+    &lt;/li&gt;
...
</code></pre>

<p>It shows in commit dc7d385a,
two lines were deleted: &ldquo;<!--<li>&rdquo; and &ldquo;</li>&ndash;>&rdquo;,
while two lines were added: &ldquo;<li>&rdquo; and &ldquo;</li>&rdquo;.</p>

<p><strong>Step 4 (optional)</strong>: revert the commit</p>

<pre><code>git revert dc7d385a
</code></pre>

<p>Ref: <a href="http://stackoverflow.com/questions/14836696/delete-last-commit-in-bitbucket">http://stackoverflow.com/questions/14836696/delete-last-commit-in-bitbucket</a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Li Chao</span></span>

      




<time class='entry-date' datetime='2015-06-30T10:12:43+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:12 am</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/blame/'>blame</a>, <a class='category' href='/blog/categories/git/'>git</a>, <a class='category' href='/blog/categories/show/'>show</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://leetschau.github.io/blog/2015/06/30/101243/" data-via="" data-counturl="http://leetschau.github.io/blog/2015/06/30/101243/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/06/27/085109/" title="Previous Post: Control Linux Server with Tmux on Windows Client">&laquo; Control Linux Server with Tmux on Windows Client</a>
      
      
        <a class="basic-alignment right" href="/blog/2015/07/04/190036/" title="Next Post: Learning Resources for Programming Language Theory">Learning Resources for Programming Language Theory &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/09/20/212102/">Generate Random Date After a Specified Date</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/16/101529/">A JavaScript Closure Demo</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/15/122519/">JSDoc Notes</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/12/233609/">Push to Github Repository With SSH Keys</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/12/093754/">Change SSH Port on Linux</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
