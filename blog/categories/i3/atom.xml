<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: I3 | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/i3/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2015-04-30T15:40:38+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    <email><![CDATA[leetschau@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Build Working Environment With I3 and Mint]]></title>
    <link href="http://leetschau.github.io/blog/2014/08/24/110909/"/>
    <updated>2014-08-24T11:09:09+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/08/24/110909</id>
    <content type="html"><![CDATA[<h1>Base System</h1>

<p>Install Linux Mint 17 Xfce with Live DVD (USB key created by YUMI 2.0.5) on Asus X84H laptop. The &ldquo;/&rdquo; partition is 30GB, while the &ldquo;/home&rdquo; partition is 50GB.</p>

<p>No need to install any hardware drivers. It simply works!</p>

<h1>Window Manager</h1>

<pre><code>sudo aptitude install i3-wm dmenu i3status i3lock
</code></pre>

<h2>Startup Configurations</h2>

<h3>MDM</h3>

<p>Mint&rsquo;s default graphical login manager is MDM,
see <a href="http://linuxmint.com/rel_qiana_xfce_whatsnew.php">New features in Linux Mint 17 Xfce</a>.
Logout of Xfce desktop. In login manager, you can find &ldquo;i3&rdquo;, choose it, and login i3 environment.
Its user level auto startup script is ~/.xsessionrc. It should be the same with .xinitrc.
So make a link from it with <code>ln -s ~/.xinitrc ~/.xsessionrc</code>.
See /etc/mdm/Xsession for variable definitions, such as USERXSESSION, USERXSESSIONRC, etc.
See <a href="https://wiki.ubuntu.com/CustomXSession">CustomXSession</a> for more.</p>

<h3>xinit</h3>

<p>See note &ldquo;Run Linux Without Desktop Environment&rdquo;.
Its user level auto startup script is ~/.xinitrc.</p>

<h2>Input Method</h2>

<p>Add the following lines into ~/.xinitrc before &ldquo;exec i3&rdquo;:</p>

<pre><code>export GTK_IM_MODULE=xim
export QT_IM_MODULE=xim
export XMODIFIERS="@im=fcitx"
fcitx &amp;
</code></pre>

<h2>Power Management in i3</h2>

<p>Check if &ldquo;pm-utils&rdquo; has been installed via <code>dpkg -l|grep pm-utils</code>. If not, install it with <code>sudo aptitude install pm-utils</code>;</p>

<p>Add the following line into /etc/sudoers:</p>

<pre><code>%sudo   ALL=(ALL) NOPASSWD: /sbin/poweroff, /sbin/reboot, /sbin/shutdown, /usr/sbin/pm-suspend, /usr/sbin/pm-suspend-hybrid
</code></pre>

<p>Add file /usr/local/bin/pm and <code>chmod 755 /usr/local/bin/pm</code>:</p>

<pre><code>#!/bin/sh
lock() {
    i3lock -c 000000
}

case "$1" in
    lk)
        lock
        ;;
    logout)
        i3-msg exit
        ;;
    ssd)
        lock &amp;&amp; sudo pm-suspend-hybrid
        ;;
    hibernate)
        lock &amp;&amp; sudo pm-hibernate
        ;;
    rbt)
        sudo reboot
        ;;
    shd)
        sudo poweroff
        ;;
    *)
        echo "Usage: $0 {lk|logout|ssd|hibernate|rbt|shd}"
        exit 2
esac
exit 0
</code></pre>

<p>The &ldquo;-c&rdquo; option of i3lock command specifies the screen color, where &ldquo;000000&rdquo; is black.</p>

<p>Now any user belonging to sudo group can run <code>pm lk|ssd|rbt|shd</code> to lock, suspend, reboot or shutdown computer without input password.
If the user is not a sudoer, run <code>usermod -aG sudo username</code> with root.
Verify user&rsquo;s group with <code>id</code>, <code>groups</code> or <code>groups username</code>.</p>

<p>Ref:</p>

<p><a href="http://askubuntu.com/questions/168879/shutdown-from-terminal-without-entering-password">http://askubuntu.com/questions/168879/shutdown-from-terminal-without-entering-password</a></p>

<p><a href="http://askubuntu.com/questions/159007/how-do-i-run-specific-sudo-commands-without-a-password">http://askubuntu.com/questions/159007/how-do-i-run-specific-sudo-commands-without-a-password</a></p>

<p><a href="http://askubuntu.com/questions/2214/how-do-i-add-a-user-to-the-sudo-group">http://askubuntu.com/questions/2214/how-do-i-add-a-user-to-the-sudo-group</a></p>

<p><a href="http://www.cyberciti.biz/faq/howto-linux-add-user-to-group/">http://www.cyberciti.biz/faq/howto-linux-add-user-to-group/</a></p>

<p><a href="http://linuxers.org/article/difference-between-primary-and-secondary-groups-linux">http://linuxers.org/article/difference-between-primary-and-secondary-groups-linux</a></p>

<h2>Config System Font</h2>

<ol>
<li><p>List all available fonts installed: <code>fc-list</code>. For example, when run <code>fc-list|grep wqy</code>, we got the name of this pre-installed Chinese font: &ldquo;WenQuanYi Micro Hei&rdquo;.</p></li>
<li><p>Edit config file ~/.i3/config: replace &ldquo;font -misc-fixed-medium-r-normal&ndash;13-120-75-75-C-70-iso10646-1&rdquo; with &ldquo;font pango:WenQuanYi Micro Hei 11&rdquo;.</p></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Dual Monitors on Linux]]></title>
    <link href="http://leetschau.github.io/blog/2014/06/24/120847/"/>
    <updated>2014-06-24T12:08:47+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/06/24/120847</id>
    <content type="html"><![CDATA[<ul>
<li><p>Connect VGA cable to laptop;</p></li>
<li><p>List all monitors&#8217; name: <code>xrandr -q</code>, or <code>ls /sys/class/drm/</code> if &ldquo;-q&rdquo; doesn&rsquo;t work.</p></li>
<li><p>Open this monitor: <code>xrandr --output VGA1 --auto</code>, now there should be same output on VGA1 and laptop screen;</p></li>
<li><p>Put scrren of laptop (LVDS1) under the screen of 19 inches monitor (VGA1) : <code>xrandr --output LVDS1 --below VGA1 --auto</code>;</p></li>
<li><p>Move an <a href="http://i3wm.org/">i3</a> workspace to monitor VGA1: <code>i3-msg move workspace to output VGA1</code>,
of course you can use any monitor name instead of &ldquo;VGA1&rdquo;.
Use a i3 shortcut instead of command to move workspace between monitors: add the following codes into ~/.i3/config</p>

<pre><code>  # move workspace to left/right screen
  bindsym $mod+Shift+Left move workspace to output left
  bindsym $mod+Shift+Right move workspace to output right
  bindsym $mod+Shift+Up move workspace to output up
  bindsym $mod+Shift+Down move workspace to output down
</code></pre></li>
<li><p>Close a monitor: <code>xrandr --output VGA1 --off</code>;</p></li>
</ul>


<p>These settings worked both on Xfce and <a href="http://i3wm.org/">i3 wm</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[I3 Window Manager on CentOS 6]]></title>
    <link href="http://leetschau.github.io/blog/2014/05/06/193841/"/>
    <updated>2014-05-06T19:38:41+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/05/06/193841</id>
    <content type="html"><![CDATA[<ol>
<li><p>Make a usb key with dd command and CentOS-6.5-i386-LiveDVD.iso;</p></li>
<li><p>Install CentOS 6.5 on Dell PC;</p></li>
<li><p>Run firefox and install H3C client to connect to internet;</p></li>
<li><p>After installation, run <code>yum update</code> and install epel;</p></li>
<li><p>Search i3 in CentOS repository: <code>yum list i3</code> => i3.i686</p></li>
<li><p><code>yum install i3.i686</code>;</p></li>
<li><p><code>yum install i3lock.i686</code>;</p></li>
<li><p>modify /etc/inittab, set the runlevel to 3;</p></li>
<li><p>create ~/.xinitrc for user chad: <code>echo "exec i3" &gt; ~/.xinitrc</code>;</p></li>
<li><p>reboot;</p></li>
<li><p>Login as user chad;</p></li>
<li><p><code>startx</code>;</p></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Living in Window Manager]]></title>
    <link href="http://leetschau.github.io/blog/2014/05/06/085952/"/>
    <updated>2014-05-06T08:59:52+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/05/06/085952</id>
    <content type="html"><![CDATA[<h1>Input Method</h1>

<p>$mod+d, ibus-daemon</p>

<h1>Calendar</h1>

<p>In terminal: cal</p>

<h1>Dictionary</h1>

<ul>
<li><p>Use goldendict: $mod+d, goldendict</p></li>
<li><p>Use dictd;</p></li>
</ul>


<h1>USB</h1>

<ol>
<li><p>Detect usb device name and type: <code>fdisk -l</code>. For all available device type, see <code>man mount</code>, search &ldquo;vfstype&rdquo;;</p></li>
<li><p>Mount it: <code>mount -t ntfs /dev/sdc1 /media/chad</code>;</p></li>
<li><p>copy something;</p></li>
<li><p>Unmount it: <code>umount /media/chad</code>;</p></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Install I3 on Ubuntu Server]]></title>
    <link href="http://leetschau.github.io/blog/2014/05/04/191733/"/>
    <updated>2014-05-04T19:17:33+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/05/04/191733</id>
    <content type="html"><![CDATA[<h1>Install i3 on Ubuntu Server</h1>

<pre><code># echo "deb http://debian.sur5r.net/i3/ $(lsb_release -c -s) universe" &gt;&gt; /etc/apt/sources.list
# apt-get update        // don't worry error messages at this stage
# apt-get --allow-unauthenticated install sur5r-keyring
# apt-get update
# apt-get install xinit
# apt-get install i3
# apt-get install tilda  // a light-weight terminal
# useradd -m chad
# su - chad
$ startx
</code></pre>

<p>Quit i3 and edit ~/.i3/config, specify tilda as the default termial:</p>

<pre><code>bindsym $mod+Return exec tilda
</code></pre>

<p>Start i3 again, you can use $mod+Return to start tilda window now.</p>

<h1>Install i3 on a Host can&rsquo;t access Internet</h1>

<ol>
<li><p>Install i3 on a Ubuntu Server VM;</p></li>
<li><p>copy the /var/cache/apt/archives folder of this VM to the blocked host;</p></li>
<li><p>On blocked host:</p>

<p> # cd /var/cache/apt/archives
 # dpkg -i *.deb</p></li>
</ol>


<p>In the future if you want install something else (say, firefox), move all deb files in another folder, than <code>apt-get install firefox</code>, then copy all deb files in archives folder to the blocked host, than <code>dpkg -i *.deb</code> again.</p>

<h1>Install i3 on a H3C blocked Host</h1>

<p>This is the best method among these three. It&rsquo;s easy and fast to install, easy to switch back to desktop environment. If you already has data on the disk, they will be kept.</p>

<p>Install a full version Linux (include Desktop environment to install i3 online), only i386 version can work with H3C now.
Only live DVDs which can install without internet can work here</p>

<p>Here I use Mint Xfce.</p>

<ol>
<li><p>Install Mint Xfce with LiveDVD without Internet;</p></li>
<li><p>After installation, login, get online with firefox, install H3C client, and run:</p>

<p> # echo &ldquo;deb <a href="http://debian.sur5r.net/i3/">http://debian.sur5r.net/i3/</a> $(lsb_release -c -s) universe&rdquo; >> /etc/apt/sources.list
 # apt-get update        // don&rsquo;t worry error messages at this stage
 # apt-get &ndash;allow-unauthenticated install sur5r-keyring
 # apt-get update
 # apt-get install i3    // dmenu and i3lock will be installed together
 # useradd -m chad
 # passwd chad
 # vi /boot/grub/grub.cfg    // add &ldquo;text&rdquo; after &ldquo;quiet splash&rdquo;</p></li>
</ol>


<p>Reboot, login as chad, run:</p>

<pre><code>$ echo "exec i3" &gt; ~/.xinitrc
$ startx
</code></pre>

<p>To enable ibus-pinyin, $mod+D: ibus-setup.</p>

<p>To add a &ldquo;green&rdquo; application in dmenu, say &ldquo;~/apps/eclipse-java-juno-SR2/eclipse&rdquo;, edit ~/.zshrc, add its path:</p>

<pre><code>export PATH=$PATH:/home/chad/apps/eclipse-java-juno-SR2
</code></pre>

<p>then quit i3 ($mod+Shift+e), run</p>

<pre><code>$ source ~/.zshrc
$ startx
</code></pre>

<p>Now you can see &ldquo;eclipse&rdquo; in dmenu.</p>
]]></content>
  </entry>
  
</feed>
