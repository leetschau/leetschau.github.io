<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Solaris | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/solaris/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2015-05-26T17:50:21+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    <email><![CDATA[leetschau@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[定制bash命令提示符]]></title>
    <link href="http://leetschau.github.io/blog/2011/10/12/190217/"/>
    <updated>2011-10-12T19:02:17+08:00</updated>
    <id>http://leetschau.github.io/blog/2011/10/12/190217</id>
    <content type="html"><![CDATA[<p>使用shell时经常要知道当前路径，如果将它写在提示符里很节省很多敲pwd的动作，方法是在启动文件(.bash_profile, .bashrc)里加上：</p>

<p>export PS1=&ldquo;[\u@\h \w]\$ &rdquo;</p>

<p>效果如下：</p>

<p>[godu@NOP2-HWXX /opt/godu/terracotta-2.7.2]$ pwd
/opt/godu/terracotta-2.7.2</p>

<p>如果想持久化此效果，在~/.bash_profile文件（如果没有新建之）里追加上面的export语句。</p>

<p>说明：</p>

<p>PS1是bash里表示命令提示符的环境变量，\u表示用户名，\h表示host name，\w表示完整路径名，\W表示当前路径名，\$表示提示符（更多选项google"bash prompt ps1"）。以上在Solaris 10和CentOS 6中验证。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[SunOS与Solaris系统的对应关系]]></title>
    <link href="http://leetschau.github.io/blog/2011/09/29/151901/"/>
    <updated>2011-09-29T15:19:01+08:00</updated>
    <id>http://leetschau.github.io/blog/2011/09/29/151901</id>
    <content type="html"><![CDATA[<p>下文绝大部分译自维基百科Solaris词条的“历史”部分：</p>

<p> <a href="http://en.wikipedia.org/wiki/Solaris_">http://en.wikipedia.org/wiki/Solaris_</a>(operating_system)#History</p>

<p>1987年，AT&amp;T与Sun公司宣布合作开发当时市场上最流行的类Unix操作系统（BSD, System V, Xenix）的融合版：Unix System V Release 4，即SVR4。1991年9月4日，Sun宣布用基于SVR4的系统替代使用中的SunOS 4，它的内部名称是SunOS 5，市场名称是Solaris 2。除了SunOS 4.1.x被命名为Solaris 1之外，Solaris仅指基于SVR4的SunOS 5.0及其以后的版本。SunOS的minor version被包含进了Solaris的release number中，例如：Solaris 2.4对应于SunOS 5.4，Solaris2.6之后，Sun去掉了主版本号2（类似与JDK 1.5变成了JDK 5），所以Solaris 7对应于SunOS 5.7，目前最新的SunOS 5.10对应于Solaris 10。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[线程显示不全的解决方法]]></title>
    <link href="http://leetschau.github.io/blog/2011/09/21/113615/"/>
    <updated>2011-09-21T11:36:15+08:00</updated>
    <id>http://leetschau.github.io/blog/2011/09/21/113615</id>
    <content type="html"><![CDATA[<p>云南现场GODU服务器型号为 SunOS 5.10，即solaris 10，用ps -ef不能显示全部的线程名，只能显示第一行，要显示完整线程名需要用下面的命令：</p>

<p> /usr/ucb/ps -auwwx|grep java</p>

<p> godu  7729 0.1 3.523351362257000 ?  S 8ÔÂ 19 860:07 /usr/jdk/instances/jdk1.5.0/bin/java -server -Xms2048m -Xmx2048m -XX:NewSize=512m -XX:MaxNewSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dcom.sun.management.jmxremote -Dtc.install-root=./.. -cp ./../lib/tc.jar com.tc.server.TCServerMain</p>

<p>所以看terracotta线程不能只看有没有terracotta，还要看是否存在TCServerMain</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[打包与压缩]]></title>
    <link href="http://leetschau.github.io/blog/2011/09/16/160414/"/>
    <updated>2011-09-16T16:04:14+08:00</updated>
    <id>http://leetschau.github.io/blog/2011/09/16/160414</id>
    <content type="html"><![CDATA[<h1>zip and unzip</h1>

<ul>
<li><p>压缩web文件夹到web.zip文件中，不包括web中所有.svn文件夹：zip web.zip -r web -x &lsquo;<em>.svn/</em>&rsquo;</p></li>
<li><p>追加新目录到已有压缩文件中：zip web.zip -r newdir，如果需要在web.zip的dir1/subdir/subsubdir下增加一个文件new.xml，新建dir1/subdir/subsubdir，将new.xml拷贝过去形成dir1/subdir/subsubdir/new.xml，然后zip web.zip -r dir1，web.zip中dir1/subdir/subsubdir下的其他文件不受影响；</p></li>
<li><p>解压缩到指定文件夹：unzip web.zip -d dst_extract_dir</p></li>
<li><p>解压web.zip中的top/sub/aa.js文件到当前目录下，保留目录结构：</p>

<p>  unzip web.zip top/sub/aa.js</p></li>
<li><p>解压web.zip中的top/sub/aa.js文件到指定目录下，保留目录结构：</p>

<p>  unzip web.zip top/sub/aa.js -d dst_extract_dir</p></li>
<li><p>解压web.zip中的top/sub/aa.js文件到指定目录下，不保留目录结构（文件直接放在指定目录下，没有top/sub文件夹）：</p>

<p>  unzip -j web.zip top/sub/aa.js -d dst_extract_dir</p>

<p>  unzip -j build/GcpCollector.zip GcpCollector/lib/core/GcpServerCore.jar -d integral_test/lib</p></li>
<li><p>读取jar包的meta info: unzip -p target.jar META-INF/MANIFEST.MF （-p选项将文件内容输出到stdout上）</p></li>
</ul>


<h1>压缩与解压命令：gzip/zip/gunzip/unzip</h1>

<p>压缩/解压缩gz文件：gzip/gunzip filename</p>

<p>二者默认在压缩/解压后删除原始文件，如果想要保留的话用-c选项：</p>

<p>gzip -c myfile.txt > myfile.gz</p>

<p>gunzip -c test.tar.gz > test.tar</p>

<p>gzcat test.tar.gz > test.tar（gzcat&lt;=>gunzip -c，linux不支持此命令）；</p>

<h1>查看压缩包里文件清单的命令</h1>

<ul>
<li><p>tar -t</p></li>
<li><p>gzip -l</p></li>
<li><p>unzip -l web.zip</p></li>
<li><p>unzip -l web.zip | less 适用于文件内容比较多，且需要查看某一部分的情况</p></li>
<li><p>less web.zip</p></li>
</ul>


<p>tar -tvf只能显示tar文件和tar文件打成的gz包中的内容，如果是 直接用gzip压缩文件，tar -t是无效的，要用：</p>

<p>gzip -l filename.gz</p>

<p>来查看文件清单。</p>

<h1>打包和解包命令：tar</h1>

<p>压缩当前目录里的所有文件到/home/test/kk.tar文件中：</p>

<pre><code>tar -cvf /home/test/kk.tar * 
</code></pre>

<p>将当前目录里的aa和bb两个文件打包到kk.tar中：</p>

<pre><code>tar -cvf /home/test/kk.tar aa bb 
</code></pre>

<p>将s3目录下的所有文件打包到k3.tar.gz中（Solaris不支持-z选项）：</p>

<pre><code>tar -zcvf k3.tar.gz s3/* 
</code></pre>

<p>查看k3.tar.gz的内容：</p>

<pre><code>tar -tvf k3.tar.gz 
</code></pre>

<p>输出为：</p>

<p>-rw-rw-r&ndash; test/test  10240 2011-10-14 03:05:15 s3/aa
-rw-rw-r&ndash; test/test  11 2011-10-13 09:30:43 s3/bb</p>

<p>即包括s3目录也打进了压缩包里；</p>

<p>将/home/test/ss/tt.tar解压到/home/test/s3下（要求s3文件夹已存在）：</p>

<pre><code>tar -xvf /home/test/ss/tt.tar -C /home/test/s3 
</code></pre>

<p>若不用-C指定解压目录，则解压到当前目录下；</p>

<p>tar参数说明：</p>

<p>-c表示创建tar文件；-x表示解压文件；-v表示verbose，即显示处理过程；-f要求后面紧跟要处理的tar文件的文件名；-z表示用gzip压缩生成的tar文件；</p>

<p>Solaris的tar命令没有-z选项，不能用tar -zxvf命令解压gz文件，必须先用：</p>

<p>gunzip filename.gz（或者gzip -d filename.gz）</p>

<p>解压成tar包，然后用tar -xvf解包。</p>

<p>附：</p>

<p>下面是将terracotta-2.7.2目录下的所有内容打包后在tc272-2目录里解压的过程：</p>

<p>[godu@goduserver terracotta-2.7.2]$ tar -cvf /home/godu/tc272.tar *</p>

<p>[godu@goduserver terracotta-2.7.2]$ cd
[godu@goduserver ~]$ mkdir tc272-2
[godu@goduserver ~]$ cd tc272-2
[godu@goduserver tc272-2]$ tar -xvf /home/godu/tc272.tar</p>

<p>这个过程除了生成一个tar文件外，等价于将terracotta-2.7.2目录下的所有内容拷贝到tc272-2目录里：</p>

<p>[godu@goduserver ~]$ mkdir tc272-2</p>

<p>[godu@goduserver ~]$ cp -r terracotta-2.7.2/* tc272-2/</p>

<p>删除tc272-2目录：</p>

<p>[godu@goduserver ~]$ rm -r tc272-2</p>
]]></content>
  </entry>
  
</feed>
