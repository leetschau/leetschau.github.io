<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Vimscript | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/vimscript/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2016-11-11T15:03:30+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Loop Over Visual Selection in Vim Script]]></title>
    <link href="http://leetschau.github.io/blog/2016/07/02/020329/"/>
    <updated>2016-07-02T02:03:29+08:00</updated>
    <id>http://leetschau.github.io/blog/2016/07/02/020329</id>
    <content type="html"><![CDATA[<p>Create file testPos.vim:</p>

<pre><code>function! GetSelection()
  echo "in func"
  let start = line("v")
  echo "start: " . start
  let end = line(".")
  echo "end: " . end
  let firstLine = line("'&lt;")
  echo "start2: " . firstLine
  let lastLine = line("'&gt;")
  echo "end2: " . lastLine
endfunction

noremap &lt;silent&gt; &lt;F4&gt; :call GetSelection()&lt;CR&gt;
</code></pre>

<p>In the same folder, open a file with vim, run <code>:so testPos.vim</code>.
Move the cursor to line 3, press <F4>, get the following output:</p>

<pre><code>in func
start: 3
end: 3
start2: 7
end2: 11
</code></pre>

<p>In visual mode, select line 11 to 13, press <F4>, the output:</p>

<pre><code>in func
start: 11
end: 11
start2: 11
end2: 13
in func
start: 12
end: 12
start2: 11
end2: 13
in func
start: 13
end: 13
start2: 11
end2: 13
</code></pre>

<p>The output shows in visual mode,
the function will be run several times for each line.</p>

<p>So a function need only deal with the current line,
with content <code>getline('.')</code>, or line number <code>line('.')</code>.
No matter in visual mode or not, the function will work fine.</p>
]]></content>
  </entry>
  
</feed>
