<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Apt | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/apt/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2016-11-11T15:03:30+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Ubuntu 14.04 Apt Update Failure]]></title>
    <link href="http://leetschau.github.io/blog/2016/11/11/114228/"/>
    <updated>2016-11-11T11:42:28+08:00</updated>
    <id>http://leetschau.github.io/blog/2016/11/11/114228</id>
    <content type="html"><![CDATA[<pre><code>$ sudo apt-get update

...

W: Failed to fetch http://ppa.launchpad.net/hzwhuang/ss-qt5/ubuntu/dists/trusty/main/binary-amd64/Packages  Hash Sum mismatch

W: Failed to fetch http://archive.canonical.com/ubuntu/dists/trusty/partner/source/Sources  Hash Sum mismatch

W: Failed to fetch http://archive.canonical.com/ubuntu/dists/trusty/partner/binary-amd64/Packages  Hash Sum mismatch

W: Failed to fetch http://archive.canonical.com/ubuntu/dists/trusty/partner/binary-i386/Packages  Hash Sum mismatch

E: Some index files failed to download. They have been ignored, or old ones used instead.
</code></pre>

<p>首先尝试了下面的命令：
<code>
sudo rm -rf /var/lib/apt/lists/*
sudo apt-get clean
sudo apt-get autoclean
sudo apt-get autoremove
</code></p>

<p>再次执行<code>sudo apt-get update</code>错误依然存在，按照上面报错的内容，
在<code>/etc/apt/sources.list</code>文件中注释掉了包含<code>canonical</code>的项，
在<code>/etc/apt/sources.list.d/</code>下把<code>hzwhuang-ss-qt5-trusty.list</code>
重命名为<code>hzwhuang-ss-qt5-trusty.list.old</code>，再次执行<code>sudo apt-get update</code>通过。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[清理/usr/local/bin目录]]></title>
    <link href="http://leetschau.github.io/blog/2014/12/29/112803/"/>
    <updated>2014-12-29T11:28:03+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/12/29/112803</id>
    <content type="html"><![CDATA[<p>为一个用户增加可执行文件通常有两种方法，
第一种是将可执行文件所在的目录添加到命令行自启动文件中（例如~/.profile，~/.bashrc，~/.zshenv等），
这种方法的优点是无需root权限，绿色无污染，
缺点是只对命令行有效，只对一个用户有效，
并且不适用于从全局启动目录（如i3wm的dmenu命令行）中启动图形界面程序；</p>

<p>另一种是把可执行文件添加到/usr/local/bin目录中，这个目录一般用来存放用户自定义的全局可执行命令，
优缺点与上面修改自启动文件的方式相反；</p>

<p>一段时间后/usr/local/bin下可能会有很多文件，清理的方法根据来源不同而不同：
对于链接，直接删除；
对非链接文件，用<code>dpkg -l</code>确认是否为apt-get或者dpkg安装的，然后用<code>apt-get remove</code>删除；
如果不是上面的情况，用<code>pip list|grep &lt;filename&gt;</code>检查是否用pip安装的，若是，用<code>pip uninstall</code>删除。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Speed Up Apt With Fastest Mirror]]></title>
    <link href="http://leetschau.github.io/blog/2014/05/22/161225/"/>
    <updated>2014-05-22T16:12:25+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/05/22/161225</id>
    <content type="html"><![CDATA[<p>First you need find out your OS release version:</p>

<pre><code>$ cat /etc/issue
Linux Mint 14 Nadia
</code></pre>

<p>From <a href="http://www.linuxmint.com/oldreleases.php">Linux Mint Releases</a> we know the corresponding Ubuntu version of Nadia is Quantal, 12.10.</p>

<p>Then add the follow text to the head of /etc/apt/sources.list:</p>

<pre><code>deb mirror://mirrors.ubuntu.com/mirrors.txt quantal main restricted universe multiverse
deb mirror://mirrors.ubuntu.com/mirrors.txt quantal-updates main restricted universe multiverse
deb mirror://mirrors.ubuntu.com/mirrors.txt quantal-backports main restricted universe multiverse
deb mirror://mirrors.ubuntu.com/mirrors.txt quantal-security main restricted universe multiverse
</code></pre>

<p>Modify &ldquo;quantal&rdquo; to other code name according to your system version.</p>

<p>Or you can specify mirror manually: choose mirror geographically close to your location from <a href="https://launchpad.net/ubuntu/+archivemirrors">Official Archive Mirrors for Ubuntu</a> from <a href="https://launchpad.net/ubuntu/+archivemirrors">Official Archive Mirrors for Ubuntu</a>. I choose <a href="https://launchpad.net/ubuntu/+mirror/mirrors.ustc.edu.cn-archive">USTC Linux User Group</a>.</p>

<p>On this page choose &ldquo;Quantal 12.10&rdquo;, then add sources.list entries to the head of /etc/apt/sources.list.</p>

<p>Add sources entries of <a href="https://launchpad.net/ubuntu/+mirror/mirror.bjtu.edu.cn-archive">BJTU</a> the same way, so totally it should be:</p>

<pre><code>deb http://mirror.bjtu.edu.cn/ubuntu/ quantal main 
deb-src http://mirror.bjtu.edu.cn/ubuntu/ quantal main
deb http://mirrors.ustc.edu.cn/ubuntu/ quantal main 
deb-src http://mirrors.ustc.edu.cn/ubuntu/ quantal main 
</code></pre>

<p>Then comment out &ldquo;deb <a href="http://packages.medibuntu.org/">http://packages.medibuntu.org/</a> quantal free non-free&rdquo; in sources.list. It causes errors when upate.</p>

<p>Now run <code>apt-get update</code>, you can find it&rsquo;s much faster than before.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Package Management in Ubuntu Server]]></title>
    <link href="http://leetschau.github.io/blog/2013/01/10/083714/"/>
    <updated>2013-01-10T08:37:14+08:00</updated>
    <id>http://leetschau.github.io/blog/2013/01/10/083714</id>
    <content type="html"><![CDATA[<h1>Search for existing packages</h1>

<pre><code># apt-cache search openjdk
</code></pre>

<h1>Install</h1>

<pre><code># apt-get install openjdk-7-jdk
</code></pre>

<p>or:</p>

<pre><code># dpkg -i &lt;file.deb&gt;
</code></pre>

<h1>List installed packages</h1>

<pre><code># dpkg -l | grep &lt;package-name&gt;
</code></pre>

<p>or</p>

<pre><code># dpkg --get-selections | grep &lt;package-name&gt;
</code></pre>

<h1>Remove(uninstall)</h1>

<pre><code># apt-get purge openjdk-7-jdk
</code></pre>

<p>or</p>

<pre><code># apt-get remove openjdk-7-jdk
</code></pre>

<p>Or you can use purge instead of remove, see in &ldquo;apt-get help&rdquo;.</p>

<pre><code># dpkg -r &lt;package_name&gt;

# dpkg -P &lt;package_name&gt;
</code></pre>
]]></content>
  </entry>
  
</feed>
