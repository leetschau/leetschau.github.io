<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Properties | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/properties/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2014-08-27T13:25:34+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    <email><![CDATA[leetschau@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[读取配置文件的方法]]></title>
    <link href="http://leetschau.github.io/blog/2012/09/19/173502/"/>
    <updated>2012-09-19T17:35:02+08:00</updated>
    <id>http://leetschau.github.io/blog/2012/09/19/173502</id>
    <content type="html"><![CDATA[<p>读取配置文件需要指定配置文件的路径和文件名，可以在Java代码里硬编码配置文件名，然后将配置文件所在目录加入classpath；也可以把路径和文件名都硬编码在Java代码里，只要启动脚本和配置文件的相对位置不变，就不必修改代码。第一种方法更灵活（指定配置文件路径的工作放在了启动脚本里，而不是Java代码中），推荐使用。</p>

<h1>硬编码配置文件名</h1>

<p>用Class的getResourceAsStream(String name)方法加载配置文件，代码如下：</p>

<p> InputStream in = this.getClass().getResourceAsStream(&ldquo;/db.properties&rdquo;);</p>

<p> Properties p = new Properties();</p>

<p> p.load(in);
 System.out.println(&ldquo;value is: &rdquo; + p.getProperty(&ldquo;db&rdquo;));</p>

<p>其中GetResources是运行这段代码所在类的类名，部署目录结构是：</p>

<p>root</p>

<p> |-bin</p>

<p>  |-start.bat</p>

<p> |-conf</p>

<p>  |-db.properties</p>

<p> |-lib</p>

<p>  |-res.jar</p>

<p>启动脚本start.bat内容是：</p>

<p> java -cp f:\VMFiles\tmpFiles\goduEx2\lib\res.jar;f:\VMFiles\tmpFiles\goduEx2\conf getResources.GetResources</p>

<p>其中res.jar的结构是：getResources/GetResources.class（假设代码所在文件的包名是getResources）。</p>

<p>这里最重要的是getResourceAsStream方法的参数前面要加上&#8221;/&ldquo;。</p>

<p>在static方法里无法使用&#8221;this&#8221;关键字，可以硬编码类名，在Eclipse中重构可以同时修改类名：</p>

<p> InputStream in = GetResources.class.getResourceAsStream(&ldquo;/db.properties&rdquo;);</p>

<h1>指定配置文件相对路径</h1>

<p>将上面代码的第一句改为：</p>

<p>InputStream in = new FileInputStream(&ldquo;../conf/db.prop&rdquo;);</p>

<p>相应地start.bat也不需要把conf加到classpath里：</p>

<p> java -cp f:\VMFiles\tmpFiles\goduEx2\lib\res.jar getResources.GetResources</p>

<p>不推荐ResourceBundle.getBundle()方法，因为这个方法不是用来加载文件的。</p>
]]></content>
  </entry>
  
</feed>
