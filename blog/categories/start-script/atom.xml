<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Start Script | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/start-script/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2015-04-15T10:58:04+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    <email><![CDATA[leetschau@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Add Multiple Jar Files Into Classpath]]></title>
    <link href="http://leetschau.github.io/blog/2012/04/16/170053/"/>
    <updated>2012-04-16T17:00:53+08:00</updated>
    <id>http://leetschau.github.io/blog/2012/04/16/170053</id>
    <content type="html"><![CDATA[<p>运行java程序的脚本经常要将conf文件夹和lib文件夹中所有jar包加入到classpath里，送给java命令的-cp参数，当使用JDK6及以上版本时，可以写成：</p>

<p> java -cp lib/*:conf com.boco.nep.Server</p>

<p>其中<em>代表</em>.jar或者*.JAR，参考"<a href="http://stackoverflow.com/questions/219585/setting-multiple-jars-in-java-classpath">http://stackoverflow.com/questions/219585/setting-multiple-jars-in-java-classpath</a>"；</p>

<p>如果上面的方法无效，也可以采用遍历方法加入jar包：</p>

<h1>bash on Unix (start.sh in $APP_HOME/bin folder)</h1>

<p> JARS=&ldquo;./conf&rdquo;
 for i in <code>ls ./lib/*.jar</code>; do
  JARS=&ldquo;$JARS&rdquo;:$i
 done
 exec &ldquo;${JAVA_HOME}/bin/java&rdquo; -cp $JARS com.boco.nep.Server</p>

<h1>Windows (start.bat in $APP_HOME\bin folder)</h1>

<p> @echo off
 cd ../lib
 set jars=
 SETLOCAL ENABLEDELAYEDEXPANSION
 for /f %%i in (&lsquo;dir /b *.jar&rsquo;) do set jars=%%i;!jars!</p>

<p> call java -cp %jars% com.boco.nes.mina.Server</p>

<p>注意jar包文件中不能有空格，否则jars中只有空格前的那一部分文件名；</p>

<h2>语法解释</h2>

<p>&ldquo;dir /b *.jar"以紧凑格式列出lib文件夹下所有的jar包文件（不包括文件大小、修改时间等信息）；</p>

<p>%%i是声明的循环变量（bat脚本中循环变量以%%开头加一个字母组成）；</p>

<p>&ldquo;for /f <var_name> in (set) do <command>"循环执行set中的每一个元素（详细语法可在命令行中指令"for /?"查看）；</p>

<p>&ldquo;SETLOCAL ENABLEDELAYEDEXPANSION"与&rdquo;!jars!&ldquo;配合实现变量jars的延迟赋值，其作用参考<a href="http://www.jb51.net/article/29323.htm">批处理中setlocal enabledelayedexpansion的作用详细整理</a>。</p>

<p>Windows版中使用语法的含义可参考<a href="http://topmanopensource.iteye.com/blog/506634">Windows bat命令编写大全</a>；for命令的用法；</p>

<h1>多层目录遍历</h1>

<p>Windows多层目录遍历可以用"for /r"或者"for /f %%i (&lsquo;dir /ad dir_name&rsquo;) do command"，其中"dir /ad"表示只列出目录，参考<a href="http://ss64.com/nt/for_d.html">FOR /D</a>。</p>
]]></content>
  </entry>
  
</feed>
