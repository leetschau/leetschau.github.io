<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Diff | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/diff/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2016-11-11T14:51:43+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Diff Notes]]></title>
    <link href="http://leetschau.github.io/blog/2013/07/26/155636/"/>
    <updated>2013-07-26T15:56:36+08:00</updated>
    <id>http://leetschau.github.io/blog/2013/07/26/155636</id>
    <content type="html"><![CDATA[<h1>Compare Files Remotely with Diff</h1>

<p>For example, compare ~/.vimrc at different hosts:</p>

<p> ssh <a href="&#x6d;&#x61;&#x69;&#x6c;&#116;&#x6f;&#x3a;&#98;&#x76;&#x74;&#x40;&#49;&#48;&#x2e;&#x30;&#x2e;&#50;&#x2e;&#55;&#x34;">&#x62;&#118;&#116;&#64;&#x31;&#48;&#46;&#48;&#x2e;&#x32;&#46;&#55;&#52;</a> &ldquo;cat /home/bvt/.vimrc&rdquo; | diff -y &ndash;suppress-common-lines - .vimrc</p>

<p>where -y is abbr. of &ldquo;&ndash;side-by-side&rdquo;.</p>

<h1>Compare Files in Two Directories</h1>

<p>Usually we use the following command to compare source files in two directories:</p>

<h2>Find out which files are different</h2>

<p> ┌─[lichao@lichao480] - [~/docs/erlang/processquest-1.0.0/apps]
 └─[$] diff -rq sockserv-1.0.0/src sockserv-1.0.1/src
 Files sockserv-1.0.0/src/sockserv_serv.erl and sockserv-1.0.1/src/sockserv_serv.erl differ</p>

<p>then use vimdiff to show detailed differences between these files.</p>

<p>-r means &ldquo;recursively&rdquo;, -q means only report different files.</p>

<h2>Print out differences of files directly</h2>

<p> ┌─[lichao@lichao480] - [~/docs/erlang/processquest-1.0.0/apps] - [1672]
 └─[$] diff -y &ndash;suppress-common-lines sockserv-1.0.0/src sockserv-1.0.1/src
 diff -y &ndash;suppress-common-lines sockserv-1.0.0/src/sockserv_serv.erl sockserv-1.0.1/src/sockserv_serv.erl
          >  gen_tcp:close(S#state.socket),
 terminate(normal, #state{socket=S}) ->    | terminate(normal, _State) ->
  gen_tcp:close(S);       |  ok;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[使用vimdiff做hg的版本比较工具]]></title>
    <link href="http://leetschau.github.io/blog/2013/04/26/181254/"/>
    <updated>2013-04-26T18:12:54+08:00</updated>
    <id>http://leetschau.github.io/blog/2013/04/26/181254</id>
    <content type="html"><![CDATA[<p>gvim的文本比较功能很强，命令行用法：gvim -d file1 file2，hg自带的hg diff没有颜色标示，含义也不够清晰，所以需要用vim的diff代替它，实现方法是在全局配置文件中增加：</p>

<p> [extensions]
 hgext.extdiff =
 [extdiff]
 cmd.vdiff = D:\Apps\Vim\vim73\gvim.exe
 opts.vdiff = -d</p>

<p>使用时首先用hg st定位哪些文件有变化，然后hg vdiff filename查看文件的变动，例如：</p>

<p> E:\workspace\JDK6UTF8\GoduServerGD>hg st
 M conf\logback.xml
 M &hellip;
 E:\workspace\JDK6UTF8\GoduServerGD>hg vdiff conf/logback.xml</p>

<p>文件路径和文件名在唯一的情况下可以使用通配符，例如上面的指令可以简写为"hg vdiff conf/log*&ldquo;；</p>
]]></content>
  </entry>
  
</feed>
