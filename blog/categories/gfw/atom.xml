<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Gfw | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/gfw/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2015-08-05T17:36:08+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Penetrate GFW With Sshuttle]]></title>
    <link href="http://leetschau.github.io/blog/2015/05/28/102822/"/>
    <updated>2015-05-28T10:28:22+08:00</updated>
    <id>http://leetschau.github.io/blog/2015/05/28/102822</id>
    <content type="html"><![CDATA[<p>Comparing with shadowsocks, <a href="https://github.com/apenwarr/sshuttle">sshuttle</a> is a much lightweight, open source alternative.
All you need is a ssh server outside GFW.</p>

<p>The installation is just <code>git clone</code> its repository on github.</p>

<p>To use it, only run a command on client: <code>./sshuttle --dns -r user@sshServer 0/0</code>.
Here option &ldquo;&ndash;dns&rdquo; is necessary to avoid DNS pollution inside GFW.
Add &ldquo;-v&rdquo; or &ldquo;-vv&rdquo; option ONLY for debug purpose, for it decreases connecting speed a lot.
&ldquo;-r&rdquo; means &ldquo;remote&rdquo;, so add your remote host outside GFW after it.
The last part of this command specifies which connections on client to use this proxy.
&ldquo;0/0&rdquo; means all connections, which is the most common case.</p>

<p>For convenience, add <code>alias sv="$HOME/apps/sshuttle/sshuttle --dns -r root@sshServer 0/0"</code> into ~/.bash_aliases.
Now you can use <code>sv</code> to start the vpn, Ctrl-C to stop it.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Penetrate GFW With ShadowSocks]]></title>
    <link href="http://leetschau.github.io/blog/2015/04/26/101038/"/>
    <updated>2015-04-26T10:10:38+08:00</updated>
    <id>http://leetschau.github.io/blog/2015/04/26/101038</id>
    <content type="html"><![CDATA[<p>To browse internet with <a href="https://github.com/shadowsocks/shadowsocks">shadowsocks</a>,</p>

<h1>Server setup</h1>

<p>You need a VPS (buy it from linode or digitalocean, etc, as the outlet),
to run the server with root (say its IP address is &ldquo;123.234.23.45&rdquo;):</p>

<pre><code># aptitude install python-pip
# pip install shadowsocks
# ssserver -p 2043 -k er@20 -m aes-256-cfb --user nobody -d start
</code></pre>

<p>See the logs:</p>

<pre><code>tail -f /var/log/shadowsocks.log
</code></pre>

<p>Or start it in foreground:</p>

<pre><code># ssserver -p 2043 -k testpwd
</code></pre>

<h1>Client</h1>

<p>Client is the machine you want to bypass the GFW.</p>

<h2>Windows</h2>

<p>Download the client package (Shadowsocks-win-dotnet4.0-2.3.1.zip for now),
extract it, and run.</p>

<p>You can check its &ldquo;System Proxy&rdquo; option, which is convenient for all browsers and terminal.</p>

<h2>Linux</h2>

<h3>Install</h3>

<p>For Ubuntu/Mint:</p>

<pre><code>$ sudo aptitude install python-pip
$ sudo pip install shadowsocks
</code></pre>

<p>Now you have a socks5 proxy. If you want convert it into a http proxy:</p>

<pre><code>$ sudo aptitude install polipo
$ service polipo stop
$ sslocal -s 123.234.23.45 -p 2043 -b 127.0.0.1 -l 1080 -k testpwd
$ sudo polipo socksParentProxy=localhost:1080
</code></pre>

<p>Now setup the http proxy of your browser as localhost:8123.
To use the proxy in terminal, add prefix &ldquo;http_proxy=<a href="http://localhost:8123">http://localhost:8123</a>&rdquo;,
for example:</p>

<pre><code>http_proxy=http://localhost:8123 curl www.xys.org
</code></pre>

<p>Or use a text-based web browser:</p>

<pre><code>http_proxy=http://localhost:8123 lynx rsf.org
</code></pre>

<p>where 8123 is the default port number of polipo.</p>

<p><a href="https://github.com/shadowsocks/shadowsocks/wiki/Using-Shadowsocks-with-Command-Line-Tools">Using Shadowsocks with Command Line Tools</a> in
<a href="https://github.com/shadowsocks/shadowsocks/wiki">shadowsocks wiki</a> use proxychains to achieve proxy in terminal,
which didn&rsquo;t work for me.</p>

<p>To summarize, you need 3 processes to access blocked website on Linux:</p>

<ol>
<li><p>The shadowsocks server on the VPS abroad;</p></li>
<li><p>The shadowsocks client on your machine;</p></li>
<li><p>The polipo to convert a socks proxy into a http proxy.</p></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Penetrate GFW With SSH Tunnels]]></title>
    <link href="http://leetschau.github.io/blog/2013/01/08/193711/"/>
    <updated>2013-01-08T19:37:11+08:00</updated>
    <id>http://leetschau.github.io/blog/2013/01/08/193711</id>
    <content type="html"><![CDATA[<h1>Setup</h1>

<ol>
<li><p>Get a free ssh account. I use CJB.NET;</p></li>
<li><p>Connect my cjb.net account with putty:</p>

<p> Session: ip: 216.194.70.6 (&ldquo;shell.cjb.net&rdquo; is polluted by gfw, but its ip still work), port: 443;</p>

<p> Connection -> Data: Auto-login username: myusername; Auto-login password: mypwd(item &ldquo;password&rdquo; only appear in kitty,
 if using putty you have to input password mannually at runtime);</p>

<p> Connection -> SSH -> Tunnels: Source port(the proxy port for browser): 7070,
 leave &ldquo;Destination&rdquo; blank and select &ldquo;Dynamic&rdquo;, then press &ldquo;Add&rdquo;, like the following:</p></li>
<li><p>press &ldquo;Open&rdquo; to connect to shell.cjb.net. you can verify the connection by the following:</p>

<p>D:\Apps\ConEmu>netstat -ano|findstr 7070
TCP 127.0.0.1:7070   0.0.0.0:0    LISTENING  11088
TCP 127.0.0.1:7070   127.0.0.1:56477  ESTABLISHED  11088
TCP 127.0.0.1:7070   127.0.0.1:56528  ESTABLISHED  11088
TCP 127.0.0.1:56477  127.0.0.1:7070   ESTABLISHED  10348
TCP 127.0.0.1:56528  127.0.0.1:7070   ESTABLISHED  10348</p></li>
<li><p>open firefox, input &ldquo;about:config&rdquo; in address bar, modify the value of &ldquo;network.proxy.socks_remote_dns&rdquo; to &ldquo;true&rdquo;,
and set proxy as Host: 127.0.0.1, Port: 7070, SOCKS v5, like the following:</p></li>
</ol>


<h1>Usage</h1>

<ol>
<li><p>Define the above connection to cjb.net as &ldquo;CJB&rdquo; in kitty_portable;</p></li>
<li><p>in hotkeyDefs.ahk add a hotstring:</p></li>
</ol>


<p> ::ccjb::d:\apps\Kitty\kitty_portable.exe -load CJB</p>

<ol>
<li>open a console and type: ccjb<ENTER>, you will see the following if login cjb successfully:</li>
</ol>


<p> Using username &ldquo;leechau&rdquo;.
 <a href="&#x6d;&#x61;&#x69;&#108;&#x74;&#111;&#x3a;&#108;&#x65;&#101;&#99;&#104;&#x61;&#x75;&#x40;&#x32;&#49;&#54;&#x2e;&#49;&#57;&#52;&#46;&#x37;&#x30;&#x2e;&#x36;">&#x6c;&#101;&#x65;&#x63;&#x68;&#97;&#117;&#x40;&#x32;&#49;&#54;&#46;&#x31;&#x39;&#52;&#x2e;&#55;&#x30;&#46;&#x36;</a>&rsquo;s password:
 Send automatic password
 Last login: Tue Jan 8 20:44:05 2013 from 114.247.236.194
 Welcome to the CJB.NET shell server!
 &hellip;
 [leechau@shell ~]$</p>

<ol>
<li>Open your firefox and enjoy your journey on facebook and twitter :)</li>
</ol>

]]></content>
  </entry>
  
</feed>
