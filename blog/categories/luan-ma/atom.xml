<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: 乱码 | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/luan-ma/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2016-11-11T14:51:43+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Add Chinese Character Display Support on Linux]]></title>
    <link href="http://leetschau.github.io/blog/2014/05/01/093834/"/>
    <updated>2014-05-01T09:38:34+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/05/01/093834</id>
    <content type="html"><![CDATA[<p>Step 1: Can the termianl display unicode character?</p>

<p>If this terminal is set to display UTF-8 character?</p>

<pre><code>$ echo -e '\xe2\x82\xac'
€
</code></pre>

<p>If the euro sign can&rsquo;t be displayed,
ssh to this host via another host which can display UTF-8 character,
and run this command remotely via ssh.
If the euro sign displayed, it&rsquo;s verified your terminal do not support UTF-8,
you have to install another UTF-8 supported terminal.</p>

<p>Ref: &ldquo;My terminal doesn&rsquo;t support UTF-8&rdquo; in <a href="https://wiki.archlinux.org/index.php/locale">Locale</a> of ArchLinux Documentation.</p>

<p>Step 2: Can the editor display unicode character?</p>

<p>If you find Chinese characters can&rsquo;t be displayed correctly in vim,
<code>cat</code> this file, if <code>cat</code> display them correctly,
that&rsquo;s a problem in your settings of vim, jump to section &lsquo;vim settings&rsquo;.</p>

<p>If <code>cat</code> can&rsquo;t display it, too, that&rsquo;s the system&rsquo;s problem,
jump to section &lsquo;Add system language support&rsquo;.</p>

<h1>vim settings</h1>

<p>Run <code>:set encoding=utf-8</code> in vim editor.
If it works, add this setting into vim settings file:
<code>echo 'set encoding=utf-8' &gt;&gt; /usr/share/vim/vimrc</code>.</p>

<p>Here the position of system-wide vim setttings (/usr/share/vim/vimrc) is
specified by <code>vim --version | grep 'system vimrc file'</code> and
<code>vim --version | grep 'fall-back for $VIM'</code>.</p>

<h1>System language support</h1>

<h2>Ubuntu</h2>

<p>List all locales installed on the system:</p>

<pre><code>$ locale -a
</code></pre>

<p>If there&rsquo;s no &lsquo;zh_CN.utf8&rsquo;, that&rsquo;s why the Chinese character can&rsquo;t be
displayed in shell (not in vim).
Run <code>sudo locale-gen zh_CN.utf8</code>.</p>

<p>Test result: <code>export LC_ALL=en_US.utf-8</code>.</p>

<p>Notice <code>LC_ALL=en_US</code> (without <code>.utf8</code>) can&rsquo;t display UTF-8 charaters correctly!
Enable it permanently: add &ldquo;LANG=en_US.UTF-8&rdquo; or &ldquo;LC_ALL=en_US.UTF-8&rdquo; into
/etc/default/locale, and refresh it: <code>sudo locale-gen</code>.</p>

<h2>Arch Linux</h2>

<pre><code>$ sudo pacman -Syu vim  // install vim and xxd
</code></pre>

<h2>Convert file encodings</h2>

<pre><code>$ iconv -l | GBK
$ iconv -l | UTF-8
$ iconv -f gbk -t utf-8 &lt;filename&gt;
</code></pre>
]]></content>
  </entry>
  
</feed>
