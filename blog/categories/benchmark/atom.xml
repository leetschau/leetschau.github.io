<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Benchmark | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/benchmark/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
<<<<<<< HEAD
  <updated>2015-06-01T12:52:39+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    
=======
  <updated>2015-05-26T17:47:26+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    <email><![CDATA[leetschau@gmail.com]]></email>
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[System Benchmark Utility on Linux]]></title>
    <link href="http://leetschau.github.io/blog/2014/04/16/185522/"/>
    <updated>2014-04-16T18:55:22+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/04/16/185522</id>
    <content type="html"><![CDATA[<h1>sysbench</h1>

<p>Install: <code>yum install sysbench</code> or <code>apt-get install sysbench</code>;</p>

<h2>Usage</h2>

<pre><code>$ man sysbench
$ sysbench --help
$ sysbench --test=cpu --cpu-max-prime=20000 run
$ sysbench --test=memory help
$ sysbench --test=memory run
$ sysbench --test=fileio --file-total-size=150G prepare
</code></pre>

<h1>Phoronix Test Suite</h1>

<h2>Installation</h2>

<ol>
<li><p>Download phoronix-test-suite-5.0.0.tar.gz from its <a href="http://www.phoronix-test-suite.com/">homepage</a></p></li>
<li><p>Unzip it and run &ldquo;install-sh&rdquo; in it;</p></li>
<li><p>It will prompt you install php-cli and php-xml (on CentOS 6.4) if you haven&rsquo;t install them.</p></li>
</ol>


<h2>Usage</h2>

<pre><code>$ phoronix-test-suite --help
$ phoronix-test-suite list-tests
$ phoronix-test-suite list-tests | grep '[Mm]emory'
$ phoronix-test-suite install pts/ramspeed
$ phoronix-test-suite run pts/ramspeed
</code></pre>

<p>Ref:</p>

<p><a href="http://www.howtoforge.com/how-to-benchmark-your-system-cpu-file-io-mysql-with-sysbench">How To Benchmark Your System (CPU, File IO, MySQL) With sysbench</a></p>

<p><a href="http://code.google.com/p/byte-unixbench/">UnixBench</a></p>

<p><a href="http://stackoverflow.com/questions/368472/linux-benchmarking-tools">Linux benchmarking tools</a></p>

<p><a href="http://www.interworx.com/community/benchmarking-tools-for-linux-servers/">Benchmarking Tools For Linux Servers</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linux Benchmarking]]></title>
    <link href="http://leetschau.github.io/blog/2014/04/08/170400/"/>
    <updated>2014-04-08T17:04:00+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/04/08/170400</id>
    <content type="html"><![CDATA[<h1>Some Theory</h1>

<ul>
<li><p><a href="http://stackoverflow.com/questions/368472/linux-benchmarking-tools">http://stackoverflow.com/questions/368472/linux-benchmarking-tools</a></p></li>
<li><p><a href="http://tldp.org/HOWTO/Benchmarking-HOWTO.html">Linux Benchmarking HOWTO</a>.</p></li>
</ul>


<h1>Tools</h1>

<h2>Disk IO Benchmark</h2>

<h3>Writing Speed</h3>

<pre><code>$ dd bs=1M count=512 if=/dev/zero of=test conv=fdatasync
</code></pre>

<p>from <a href="http://systembash.com/content/simple-disk-benchmarking-in-linux-using-dd/">Simple Disk Benchmarking in Linux Using &lsquo;dd&rsquo;</a></p>

<h3>Reading Speed</h3>

<pre><code>$ hdparm -tT $(df $HOME|awk 'FNR == 2 {print $1}')
</code></pre>

<p>where &ldquo;df $HOME|awk &lsquo;FNR == 2 {print $1}&rsquo;&rdquo; get the disk name of the $HOME folder. For example, on my laptop it is /dev/sda1, on 49 server it is /dev/mapper/vg_bocoty49-lv_root. In awk command, &ldquo;FNR == 2&rdquo; means the second line.
This is the &ldquo;origin&rdquo; version:</p>

<pre><code>$ hdparm -tT /dev/sda
</code></pre>

<p>from <a href="http://www.lostsaloon.com/technology/how-to-test-the-read-and-write-speeds-of-a-hard-disk-in-linux/">How to Test the Read and Write Speeds of a Hard Disk in Linux</a>.</p>

<p>Another reference: <a href="https://wiki.archlinux.org/index.php/Hdparm">https://wiki.archlinux.org/index.php/Hdparm</a></p>

<h2>Network Throughput Benchmark</h2>

<p>Run the following command on the &ldquo;server&rdquo; host, not the &ldquo;client&rdquo; host which is testd.</p>

<pre><code>$ cat testspeed.sh

filesize=$3
dd bs=1M count=$filesize if=/dev/zero of=test
timeres=$(/usr/bin/time -p scp test $1@$2:/home/$1/ 2&gt;&amp;1 &gt;/dev/null)
echo timeres: $timeres
duration=$(echo $timeres|awk 'FNR == 1 {print $2}')
echo duration: $duration
speed=$(echo "scale=2; $filesize / $duration" | bc -l)
echo $speed MB/s
</code></pre>

<p>The output format of &ldquo;time&rdquo; and &ldquo;bc&rdquo; command varies depending on distro of OS, so I only implements above on my OS: Linux Mint 14.
The &ldquo;-p&rdquo; options give a better output format of this command.
The output of &ldquo;scp&rdquo; is in stdout, while that of &ldquo;time&rdquo; in stderr, so I hide stdout and redirect stderr to stdout, so the output can be processed by the following &ldquo;awk&rdquo;.
&ldquo;bc -l&rdquo; do a float division instead of a integer division.
&ldquo;scale=2&rdquo; set the division scale (precision) to 2 digits after the period.</p>

<p>Run this scprit with a 64MB test file:</p>

<pre><code>$ ./speed.sh chad 10.0.2.49 64
</code></pre>

<p>Now with a 128MB test file:</p>

<pre><code>$ ./testspeed.sh 128
</code></pre>

<p>Note: iperf is network throughput tool, but it has to be installed. So it&rsquo;s a little complicated.</p>
]]></content>
  </entry>
  
</feed>
