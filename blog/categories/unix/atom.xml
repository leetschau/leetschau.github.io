<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Unix | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/unix/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2015-01-04T11:42:13+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    <email><![CDATA[leetschau@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Line Terminator Conversion Between Unix and Windows Format on Ubuntu]]></title>
    <link href="http://leetschau.github.io/blog/2013/12/11/162041/"/>
    <updated>2013-12-11T16:20:41+08:00</updated>
    <id>http://leetschau.github.io/blog/2013/12/11/162041</id>
    <content type="html"><![CDATA[<ol>
<li><p>Install: sudo apt-get install tofrodos</p></li>
<li><p>unix -> dos: todos <file_name>;</p>

<p> dos -> unix: fromdos <file_name></p></li>
</ol>


<p>You can do the same thing with vi: open that file</p>

<p>   :set ff=dos/unix</p>

<p>or use &ldquo;:set ff&rdquo; to query current format.</p>

<p>Verified on Linux Mint 14 Xfce.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Notes About BSD]]></title>
    <link href="http://leetschau.github.io/blog/2013/06/13/093824/"/>
    <updated>2013-06-13T09:38:24+08:00</updated>
    <id>http://leetschau.github.io/blog/2013/06/13/093824</id>
    <content type="html"><![CDATA[<p>FreeBSD: mainly for web server;</p>

<p>OpenBSD: mainly for security concerned server;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[去掉文件中的^M]]></title>
    <link href="http://leetschau.github.io/blog/2013/05/17/094431/"/>
    <updated>2013-05-17T09:44:31+08:00</updated>
    <id>http://leetschau.github.io/blog/2013/05/17/094431</id>
    <content type="html"><![CDATA[<p>一般情况下用:set ff=unix就可以解决问题，如果无效，用下面的方法手工完成：</p>

<pre><code>:%s/[ctrl+v] [ctrl+m]//g
</code></pre>

<p>ctrl+v表示按住Ctrl键再按下v键。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linux系统CPU信息查询方法]]></title>
    <link href="http://leetschau.github.io/blog/2012/09/29/095503/"/>
    <updated>2012-09-29T09:55:03+08:00</updated>
    <id>http://leetschau.github.io/blog/2012/09/29/095503</id>
    <content type="html"><![CDATA[<h1>lscpu</h1>

<p>运行<code>lscpu</code>命令，输出中，&#8221;CPU(s)&ldquo;是逻辑CPU数，&#8221;Socket(s)&#8221;是物理插槽数，&#8221;Core(s) per socket&#8221;是每颗CPU的核数，&#8221;Thread(s) per core&#8221;是每个核的线程数，一般是1或者2，后者叫做“超线程”。
逻辑CPU数是物理插槽数、核数和每核线程数3者的乘积。
平常所说的“CPU个数”，就是指逻辑CPU数，也就是&#8221;CPU(s)&#8221;的值。</p>

<h1>cat /proc/cpuinfo</h1>

<p>下面是一个实例：</p>

<pre><code>processor  : 0 
vendor_id  : GenuineIntel 
cpu family  : 6 
model   : 26 
model name  : Intel(R) Xeon(R) CPU   X5550 @ 2.67GHz 
stepping  : 5 
cpu MHz   : 2666.851 
cache size  : 8192 KB 
physical id  : 0 
siblings  : 8 
core id   : 0 cpu cores  : 4 
apicid   : 0 
fpu   : yes 
fpu_exception  : yes 
cpuid level  : 11 
wp   : yes 
flags   : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm syscall nx rdtscp lm constant_tsc ida nonstop_tsc pni monitor ds_cpl vmx est tm2 cx16 xtpr popcnt lahf_lm 
bogomips  : 5333.70 
clflush size  : 64 
cache_alignment  : 64 
address sizes  : 40 bits physical, 48 bits virtual 
power management: [8] 
processor  : 1 
... 
cpu cores  : 4 
... 
</code></pre>

<p>processor  : n &hellip; cpu cores  : 4 &hellip; processor  : 15 &hellip; cpu cores  : 4 &hellip;</p>

<p>【所以CPU(processor)的数量是最后一个cpu标号加1，每颗CPU的核数是其中&#8221;cpu cores&#8221;的值，这是一个有16颗4核CPU的服务器】</p>

<p>上面的结论错误，阅读cpuinfo的正确方法是：</p>

<ol>
<li><p>通过physical id确定有多少个物理CPU（即多少个CPU插槽socket，或者叫物理封装）；</p></li>
<li><p>通过cpu cores确定某一个物理CPU有多少核；</p></li>
<li><p>如果siblings数量与cpu core一致，说明没有超线程。反之如果siblings的值大于cpu cores，说明开启了超线程（hyperthreading），开启超线程的另一个证据是不同的processor拥有同样的core id，这一点可以用&#8221;cat /proc/cpuinfo|grep &ldquo;core id&#8221;确认；</p></li>
<li><p>processor的数量应该等于物理CPU的数量与siblings的乘积；</p></li>
</ol>


<p>根据以上方法分析，上面的服务器有两颗4核CPU（即两个CPU插槽，每个插槽上的CPU有4个核），开启了超线程，共有16个逻辑CPU。</p>

<p>参考<a href="http://www.richweb.com/cpu_info">Understanding Linux /proc/cpuinfo</a></p>

<h1>相关资料</h1>

<ul>
<li><p>查看CPU是32位还是64的方法是：cpuinfo的flags参数中是否有&#8221;lm&#8221;这一项，lm表示long mode，可以用&#8221;cat /proc/cpuinfo|grep &ldquo;\&lt;lm>&#8221;查询；</p></li>
<li><p>CPU超线程技术可以参考<a href="https://en.wikipedia.org/wiki/Hyper-threading">Hyper-threading</a>。</p></li>
</ul>


<h1>另：用free指令查看系统内存大小</h1>

<p>用free -g以GB为单位显示内存大小，另外可以通过查看cat /proc/meminfo指令结果第一行的方法确定物理内存大小；</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Top指令用法]]></title>
    <link href="http://leetschau.github.io/blog/2012/09/18/204259/"/>
    <updated>2012-09-18T20:42:59+08:00</updated>
    <id>http://leetschau.github.io/blog/2012/09/18/204259</id>
    <content type="html"><![CDATA[<p>输出结果的含义：</p>

<p><a href="http://blog.csdn.net/jackyren007/article/details/3728075">Linux下查看CPU使用率!系统资源使用情况</a></p>

<p>指令参数说明：</p>

<p><a href="http://www.thegeekstuff.com/2010/01/15-practical-unix-linux-top-command-examples/">Can You Top This? 15 Practical Linux Top Command Examples</a></p>

<p>top界面上输入1（数字一）可以列出CPU每个核的情况，输入shift+h可以列出thread情况（详细说明在top界面上按h键）；</p>
]]></content>
  </entry>
  
</feed>
