<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Linux | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/linux/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2014-10-01T21:14:19+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    <email><![CDATA[leetschau@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Dmenu Notes]]></title>
    <link href="http://leetschau.github.io/blog/2014/10/01/210506/"/>
    <updated>2014-10-01T21:05:06+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/10/01/210506</id>
    <content type="html"><![CDATA[<ul>
<li>Add eclipse to dmenu path: <code>cd /usr/local/bin; sudo ln -s $HOME/apps/eclipse-java-luna-R-x86_64/eclipse eclipse</code>;</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linux From Scratch Notes]]></title>
    <link href="http://leetschau.github.io/blog/2014/09/19/153017/"/>
    <updated>2014-09-19T15:30:17+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/09/19/153017</id>
    <content type="html"><![CDATA[<p>Linux from Scratch (LFS) version: 7.5.</p>

<p>Host: Dell PC, ArchLinux.</p>

<h1>Partition Scheme</h1>

<p>The host is GPT, so use <code>cgdisk</code> to create 2 new partitions (after 2 existing partitions): root 10GB, and swap 4GB.
When asked for partition type, input &ldquo;L&rdquo;, it will list all type code, where code of linux swap is 8200.
Reboot and build as root:</p>

<pre><code>mkfs.ext4 /dev/sda3
mkswap /dev/sda4
export LFS=/mnt/lfs
mkdir -pv $LFS
mount -v -t ext4 /dev/sda3 $LFS
swapon -v /dev/sda4
mkdir $LFS/sources
chmod -v a+wt $LFS/sources
mkdir -v $LFS/tools
groupadd lfs
useradd -s /bin/bash -g lfs -m -k /dev/null lfs
passwd lfs
chown -R lfs:lfs $LFS
chown -v lfs $LFS/tools
ln -sv $LFS/tools /
chown -v lfs $LFS/sources
su - lfs

cat &gt; ~/.bash_profile &lt;&lt; "EOF"
exec env -i HOME=$HOME TERM=$TERM PS1='\u:\w\$ ' /bin/bash
EOF
cat &gt; ~/.bashrc &lt;&lt; "EOF"
set +h
umask 022
LFS=/mnt/lfs
LC_ALL=POSIX
LFS_TGT=$(uname -m)-lfs-linux-gnu
PATH=/tools/bin:/bin:/usr/bin
export LFS LC_ALL LFS_TGT PATH
EOF

wget -O wget-list http://www.linuxfromscratch.org/lfs/downloads/stable/wget-list
wget -i wget-list -P $LFS/sources

cd $LFS
tar xf sources/binutils-2.24.tar.bz2
cd binutils-2.24
./configure --prefix=/tools --with-sysroot=$LFS --with-lib-path=/tools/lib --target=$LFS_TGT --disable-nls --disable-werror 
make
mkdir -v /tools/lib
ln -sv lib /tools/lib64
make install
cd $LFS
tar xf sources/gcc-4.8.2.tar.bz2
tar xf sources/mpfr-3.1.2.tar.xz
tar xf sources/gmp-5.1.3.tar.xz
tar xf sources/mpc-1.0.2.tar.xz
mv mpfr* mpfr
mv gmp* gmp
mv mpc* mpc
mv mpfr gmp mpc gcc-4.8.2
cd gcc-4.8.2
cat &gt; runme.sh &lt;&lt;EOF
for file in $(find gcc/config -name linux64.h -o -name linux.h -o -name sysv4.h)
do
    cp -uv $file{,.orig}
    sed -e 's@/lib\(64\)\?\(32\)\?/ld@/tools&amp;@g' \
        -e 's@/usr@/tools@g' $file.orig &gt; $file
    echo '
#undef STANDARD_STARTFILE_PREFIX_1
#undef STANDARD_STARTFILE_PREFIX_2
#define STANDARD_STARTFILE_PREFIX_1 "/tools/lib/"
#define STANDARD_STARTFILE_PREFIX_2 ""' &gt;&gt; $file
    touch $file.orig
done
EOF
chmod 755 runme.sh
./runme.sh
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[在Linux上播放带中文字幕的电影]]></title>
    <link href="http://leetschau.github.io/blog/2014/09/17/094859/"/>
    <updated>2014-09-17T09:48:59+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/09/17/094859</id>
    <content type="html"><![CDATA[<p>今天从<a href="https://kickass.to/">Kickass</a>上下载了黄秋生1996年主演的电影“伊波拉病毒”(Ebola Syndrome)，粤语版听不懂，于是想下载中文字幕，Windows上的射手播放器可以自动下载字幕，Linux上貌似没有这么好用的播放器，于是从<a href="http://shooter.cn/">射手网</a>上下载了字幕文件，用<code>iconv -f gbk -t utf8 ebola_chs.srt</code>将编码转为utf8，然后<code>sudo aptitude install mplayer</code>安装了MPlayer，发现无法正常播放中文字幕，按照网络上的介绍将默认编码设为UTF-8仍然是乱码，于是<code>sudo aptitude install smplayer</code>，然后<code>smplayer</code>启动，在[Preferences -> Subtitles -> Subtitles -> Encodings]中，将"Default subtitle encoding"设为为"UTF-8 (UTF-8)&ldquo;，将"Autoload -> Autoload subtitle files"设置为"All subs containing movie names"，并勾选"Select first available subtitle"，现在视频文件名是Ebola_LKRG.avi，字幕是Ebola_LKRG_chs.srt，播放视频文件时能够自动加载中文字幕，无乱码，另外[Preferences -> Subtitles -> Subtitles -> Font and colors -> Font]默认值为Arial，在MPlayer中同样设为Arial，中文字幕仍为乱码，可见造成乱码的原因很可能是程序本身不支持UTF8编码的多字节字符。</p>

<p>调整字幕延时：
如果某句对白在字幕文件中的时间标记是13s，但在影片中应该在第32s出现，则在[SMPlayer -> Subtitles -> Set delay&hellip;]中的值应设为-19000，即字幕向后推迟19秒。</p>

<p>搜索字幕：
[SMPlayer -> Subtitles -> Find subtitles on Opensubtitles.org].
或者安装subdownloader: <code>sudo aptitude install subdownloader</code>，但这样软件连接服务器速度很慢，不是很好用。</p>

<p>使用amule(<code>sudo aptitude install amule</code>)也可以搜索到这部影片，但下载速度很慢。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Build Working Environment With I3 and Mint]]></title>
    <link href="http://leetschau.github.io/blog/2014/08/24/110909/"/>
    <updated>2014-08-24T11:09:09+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/08/24/110909</id>
    <content type="html"><![CDATA[<h1>Base System</h1>

<p>Install Linux Mint 17 Xfce with Live DVD (USB key created by YUMI 2.0.5) on Asus X84H laptop. The &ldquo;/&rdquo; partition is 30GB, while the &ldquo;/home&rdquo; partition is 50GB.</p>

<p>No need to install any hardware drivers. It simply works!</p>

<h1>Window Manager</h1>

<pre><code>sudo aptitude install i3-wm dmenu i3status i3lock
</code></pre>

<p>That&rsquo;s it. Now you can logout. In login manager, you can find &ldquo;i3&rdquo;, choose it, and login i3 environment.</p>

<h2>Power Management in i3</h2>

<p>Check if &ldquo;pm-utils&rdquo; has been installed via <code>dpkg -l|grep pm-utils</code>. If not, install it with <code>sudo aptitude install pm-utils</code>;</p>

<ul>
<li><p>suspend: <code>sudo pm-suspend-hybrid</code>, it will suspend your system. When out of power, it will hibernate. See <code>man pm-actions</code> for details;</p></li>
<li><p>hibernate: <code>sudo pm-hibernate</code>, it will save current state into disk;</p></li>
<li><p>poweroff: <code>sudo poweroff</code>;</p></li>
<li><p>restart: <code>sudo restart</code>;</p></li>
<li><p>exit i3: <code>i3-msg exit</code> or Mod+Shift+E;</p></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Serial Device Debug on Linux]]></title>
    <link href="http://leetschau.github.io/blog/2014/08/09/140312/"/>
    <updated>2014-08-09T14:03:12+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/08/09/140312</id>
    <content type="html"><![CDATA[<p>The device name is &ldquo;Prolific Technology, Inc. PL2303 Serial Port&rdquo;, you can use <code>lsusb</code> to get its name. Then install gtkterm for communicating with it.</p>

<pre><code>$ sudo apt-get install gtkterm
</code></pre>

<p>Now use syslog to get the device name of pl2303.</p>

<pre><code>$ tail -f /var/log/syslog
...
... usb 3-2: pl2303 converter now attached to ttyUSB0
...
</code></pre>

<p>So its device name is /dev/ttyUSB0. Now you can connect it with gtkterm:</p>

<pre><code>$ sudo gtkterm -p /dev/ttyUSB0 -s 57600
</code></pre>

<p>View -> Send hexadecimal data: 41 54 2B 53 43 41 4E</p>

<h1>minicom</h1>

<pre><code># apt-get install minicom
</code></pre>

<p>But I don&rsquo;t know how to send command via this application.</p>
]]></content>
  </entry>
  
</feed>
