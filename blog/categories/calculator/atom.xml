<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Calculator | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/calculator/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2015-04-15T10:58:04+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    <email><![CDATA[leetschau@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[A Powerful Linux Command Line Calculator Based on Bc]]></title>
    <link href="http://leetschau.github.io/blog/2014/04/30/110339/"/>
    <updated>2014-04-30T11:03:39+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/04/30/110339</id>
    <content type="html"><![CDATA[<p>Create a shell script named my-calculator.sh under ~/apps:</p>

<pre><code>#!/bin/bash

# Example: ./my-calculator ih od 23A+34B =&gt; echo 'ibase=16;obase=10;23A+34B' | bc
#     where "ih" means "input is hex", "od" means "output is decimal"
#     ./my-calculator ih oh echo 'ibase=16;obase=10;A+A' | bc

if [[ $# -gt 3 ]]; then
    echo Bad format: more than 3 arguments found
    exit 1
fi
in=10
out=10
for op in $@; do
    if [[ $op = 'ib' ]]; then
        in=2
    elif [[ $op = 'id' ]]; then
        in=10
    elif [[ $op = 'ih' ]]; then
        in=16
    elif [[ $op = 'ob' ]]; then
        out=2
    elif [[ $op = 'od' ]]; then
        out=10
    elif [[ $op = 'oh' ]]; then
        out=16
    else 
        expr=$op
    fi
done
echo echo \"obase=$out\;ibase=$in\;$expr\" \| bc
echo "obase=$out;ibase=$in;$expr" | bc
</code></pre>

<p>Note: put obase BEFORE ibase, or the obase will based on ibase. For example, the result of</p>

<pre><code>echo "ibase=16;obase=10;A+A" | bc
</code></pre>

<p>is 14, but not 20. After &ldquo;ibase=16&rdquo;, the &ldquo;10&rdquo; in &ldquo;obase=10&rdquo; is actually a hex, not a decimal. To avoid interfered by ibase, we should always declare obase before ibase.</p>

<p>Now add &ldquo;alias mc=/home/chad/apps/my-calculator.sh&rdquo; into your ~/.zshrc, you can do hex calculation by:</p>

<pre><code>$ mc ih oh A+A
</code></pre>

<p>Add hex numbers and output to decimal:</p>

<pre><code>$ mc ih A+A
</code></pre>

<p>Convert a hex into decimal:</p>

<pre><code>$ mc ih 23B
</code></pre>

<p>Convert a decimal to hex:</p>

<pre><code>$ mc oh 23432
</code></pre>

<p>Some ordinary decimal calculation:</p>

<pre><code>$ mc 234+345
</code></pre>
]]></content>
  </entry>
  
</feed>
