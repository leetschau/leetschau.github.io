<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Lan | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/lan/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2015-04-18T14:12:11+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    <email><![CDATA[leetschau@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Create Virtual Network With VirtualBox on Mint 14]]></title>
    <link href="http://leetschau.github.io/blog/2014/01/27/115749/"/>
    <updated>2014-01-27T11:57:49+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/01/27/115749</id>
    <content type="html"><![CDATA[<p>VirtualBox version: VirtualBox-4.2.18-88780-Linux_x86.run
Host OS: Linux Mint 14 Xfce</p>

<h1>Setup Network</h1>

<ol>
<li><p>Add a virtual network in host: VirtualBox -> File -> Preferences -> Network</p></li>
<li><p>Create a VM with the first NIC as Host-only(NIC1) and the second as NAT(NIC2);</p></li>
</ol>


<p>When host connect to Internet, the guest can access internet via NIC2, while the host disconnect with internet, the host and guest still can ssh to each other with the NIC1 IP address.</p>

<ol>
<li>After installed all software on guest when host connected with internet, disconnect with internet and ssh to guest. Use the following console command to speedup.</li>
</ol>


<p>Test shows that ssh to guest is very slow compared with startup GUI guest.</p>

<h1>Manage VMs in Console</h1>

<p>VM name is &ldquo;Mint14Xfce&rdquo; in this case.</p>

<p>List name of all VMs: <code>VBoxManage list vms</code></p>

<p>List state of all VMs: <code>VBoxManage list vms -l|grep State</code></p>

<p>Show current state of a VM: <code>VBoxManage showvminfo Mint14Xfce|grep State</code></p>

<p>Startup VM without GUI: <code>VBoxHeadless -s Mint14Xfce --vrde off</code></p>

<p>Show network type(only list first 3 NIC): <code>VBoxManage showvminfo Mint14Xfce|grep 'NIC [123]'</code></p>

<p>Shutdown VM: <code>VBoxManage controlvm Mint14Xfce poweroff</code></p>

<p>Ref: <a href="https://blogs.oracle.com/fatbloke/entry/networking_in_virtualbox1">Networking in VirtualBox</a> by Fat Bloke on Jun 08, 2012.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Create Virtual Network With Virtualbox]]></title>
    <link href="http://leetschau.github.io/blog/2013/11/02/141013/"/>
    <updated>2013-11-02T14:10:13+08:00</updated>
    <id>http://leetschau.github.io/blog/2013/11/02/141013</id>
    <content type="html"><![CDATA[<ol>
<li><p>Create a virtual machine &ldquo;ubs1&rdquo; with ubuntu server 12.04, set its network as Host-only;</p></li>
<li><p>Start this vm, configure the network manually: IP Address: 192.168.56.11, netmask, gateway and name server address use default value; Set hostname hubs1, domain name as &ldquo;chadhome&rdquo;, set username &ldquo;ubsu1&rdquo;; install OpenSSH server;</p></li>
<li><p>Create the second vm named &ldquo;ubs2&rdquo; with the same settings with above, IP Address is 192.168.56.22, hostname is hubs2, username is ubsu2;</p></li>
</ol>


<p>Now you can ssh between host and these 2 guests.</p>

<h1>How to enable guest to connect to internet with NAT/Host-only settings?</h1>

<h2>Ubuntu</h2>

<ol>
<li><p>Set network -> Adapter 1 as NAT, adapter 2 as Host-only (the order is import! you can&rsquo;t install host-only first then add nat?)</p></li>
<li><p>add eth1 in /etc/network/interfaces</p></li>
</ol>


<h2>CentOS</h2>

<ol>
<li>/etc/sysconfig/network-scripts/ifcfg-eth1</li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[搭建Ubuntu封闭局域网]]></title>
    <link href="http://leetschau.github.io/blog/2013/07/30/110558/"/>
    <updated>2013-07-30T11:05:58+08:00</updated>
    <id>http://leetschau.github.io/blog/2013/07/30/110558</id>
    <content type="html"><![CDATA[<p>机器的网线插在路由器的lan口上</p>

<h1>vi /etc/network/interfaces</h1>

<p>auto lo
iface lo inet loopback
auto eth0
iface eth0 inet static
address 192.168.1.2
netmask 255.255.255.0
gateway 192.168.1.1</p>

<p>Ref: <a href="http://www.ha97.com/4895.html">http://www.ha97.com/4895.html</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[局域网文本传输软件]]></title>
    <link href="http://leetschau.github.io/blog/2013/05/06/170059/"/>
    <updated>2013-05-06T17:00:59+08:00</updated>
    <id>http://leetschau.github.io/blog/2013/05/06/170059</id>
    <content type="html"><![CDATA[<p>有时候两台机器间临时需要传输一些简单的文本，比如网页地址，指令之类的，专门找一个网内聊天软件太麻烦，简单的方法是使用命令行工具，下面是可选的工具。</p>

<h1>利用write或者wall命令</h1>

<p>Linux的内部指令，无需安装，但Windows上没法用。</p>

<p>write适用于多次双向交互（两个人之间聊天的交互方式），格式：write <username> [tty]，其中username是用户名，tty通过运行&#8221;tty&#8221;指令获得，在只有两个用户登录情况下可以省略。当主机A和B需要交互时，B首先SSH登录A（ssh my_name@hostB，据说telnet也行），然后B上运行&#8221;write my_name&#8221;，就进入了聊天状态。</p>

<p>wall是向所有tty广播，例如主机A要向B和C发送消息，需要B和C登录到A上（SSH），然后在A上运行wall，可以加回车写多行文本，写完后输入Ctrl+D，整段文本就被广播到了B和C在A的tty上，可以通过管道向wall输送指令，例如&#8221;cat file_name|wall&#8221;将文件内容广播给其他终端，或者&#8221;df|wall&#8221;将磁盘情况广播给其他终端。</p>

<p>wall和write的主要区别是wall是单向的，write是双向的。</p>

<h1>利用netcat指令</h1>

<p>netcat需要安装，Ubuntu上比较简单：apt-get install netcat，Windows上复杂些，需要下载nc111nt.zip这个文件，下载后报有病毒，但好像是误报。</p>

<p>netcat的信息传输是Server-Client方式，启动Server的方法是&#8221;nc -l server_port&#8221;，server_port可以是任意没被占用的端口，例如nc -l 3456，启动Client的方法是&#8221;nc server_ip server_port&#8221;（例如nc 10.31.2.34 3456），之后不论哪一方输入文本回车后都会被发送到对端，可以先由发送端发送报文，再启动接收端。</p>

<p>要传多行文本（比如一个文本文件），可以用下面的方法：</p>

<p>发送端：cat some.txt|nc -l 3333</p>

<p>接收端：nc 10.21.3.31 3333 > some.txt</p>

<p>可以在Executor里定义一个任务，命令是&#8221;d:\Apps\ConEmu\ConEmu.exe&#8221;，参数是&#8221;d:\Apps\netcat\nc.exe&#8221;，启动nc之后再输入目标的ip地址和端口号。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[添加局域网打印机]]></title>
    <link href="http://leetschau.github.io/blog/2013/05/02/183329/"/>
    <updated>2013-05-02T18:33:29+08:00</updated>
    <id>http://leetschau.github.io/blog/2013/05/02/183329</id>
    <content type="html"><![CDATA[<p>局域网内安装了打印机，但不知道它的IP地址，这时就需要搜索打印机了，Win7下方法如下：</p>

<p>【开始 -> 设备和打印机】，点击上部的“添加打印机”按钮，Windows开始搜索局域网内的打印机，一般就可以找到了。</p>
]]></content>
  </entry>
  
</feed>
