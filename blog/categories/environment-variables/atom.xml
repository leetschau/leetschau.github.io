<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Environment Variables | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/environment-variables/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2015-04-18T20:42:59+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    <email><![CDATA[leetschau@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Auto Deploy Notes]]></title>
    <link href="http://leetschau.github.io/blog/2013/08/29/210003/"/>
    <updated>2013-08-29T21:00:03+08:00</updated>
    <id>http://leetschau.github.io/blog/2013/08/29/210003</id>
    <content type="html"><![CDATA[<ol>
<li>Write a property file: /home/bvt/docs/jenkinsEnv.properties:</li>
</ol>


<p> gcp.job.type=deliver
 gcp.deliver.ip=10.0.7.142
 gcp.deliver.user=gcp
 gcp.deliver.home=/home/gcp
 gcp.deliver.deployFolder=deploy
 gcp.deliver.prompt=gcp@cloud142</p>

<p>Note: Do <strong>not</strong> leave blanks between &ldquo;=&rdquo; and values in property file.</p>

<p> gcp.deliver.home = /home/gcp</p>

<p>will produce wrong value when gotten by expect script.</p>

<ol>
<li><p>Add this file to &ldquo;Build Environment -> Inject environment variables to the build process&rdquo; in Jenkins Job Configure panel with Environment Injector plugin.</p></li>
<li><p>Create a deploy script (deploy.exp) in project base folder:</p></li>
</ol>


<p> #!/usr/bin/expect
 set artifact [lindex $argv 0]
 spawn scp $artifact $env(gcp.deliver.user)@$env(gcp.deliver.ip):$env(gcp.del
 expect eof</p>

<ol>
<li>Create a &ldquo;Conditional step(single)&rdquo; with conditional-buildstep plugin.</li>
</ol>


<p> Run? Strings match</p>

<p>  String 1: ${ENV,var=&ldquo;gcp.job.type&rdquo;}</p>

<p>  String 2: deliver</p>

<p> Builder: Execute Shell</p>

<p>  Command: ./deploy.exp build/*.zip</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Start Jenkins Server With Specified Home Directory]]></title>
    <link href="http://leetschau.github.io/blog/2013/07/19/104345/"/>
    <updated>2013-07-19T10:43:45+08:00</updated>
    <id>http://leetschau.github.io/blog/2013/07/19/104345</id>
    <content type="html"><![CDATA[<p>You can get the current home directory of a Jenkins server at &ldquo;Manage Jenkins -> Configure System -> Home Directory&rdquo;.</p>

<p>When starting a Jenkins server, you can specify its home directory through setting environment variable JENKINS_HOME:</p>

<pre><code>export JENKINS_HOME=~/.jenkins
</code></pre>

<p>then</p>

<pre><code>java -jar &lt;jenkins-ver.war&gt; --httpPort=8088
</code></pre>

<p>or start as a daemon service:</p>

<pre><code>nohup java -jar &lt;jenkins-ver.war&gt; --httpPort=8088 1&gt;jenkins.log 2&gt;jenkins.log &amp;
</code></pre>

<p>When update Jenkins or install some new plugins, you may find all jobs gone. Don&rsquo;t be panic, it&rsquo;s probably because the home folder are changed (for example, ~/.hudson) by the plugins. Specify home directory as above, all jobs will come back.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Environment Variables of Ubuntu GUI Applications]]></title>
    <link href="http://leetschau.github.io/blog/2013/05/07/101025/"/>
    <updated>2013-05-07T10:10:25+08:00</updated>
    <id>http://leetschau.github.io/blog/2013/05/07/101025</id>
    <content type="html"><![CDATA[<p>In Ubuntu Desktop you have to modify /etc/environment and ${HOME}/.pam_environment instead of /etc/bash.bashrc and ${HOME}/.bashrc to set environment variables. See <a href="https://help.ubuntu.com/community/EnvironmentVariables">EnvironmentVariables</a> for details.</p>

<p>${HOME}/.pam_environment does not worked, don&rsquo;t know why.</p>
]]></content>
  </entry>
  
</feed>
