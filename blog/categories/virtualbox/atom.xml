<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Virtualbox | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/virtualbox/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2014-11-28T08:48:37+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    <email><![CDATA[leetschau@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Virtualization With Vagrant on ArchLinux]]></title>
    <link href="http://leetschau.github.io/blog/2014/10/20/094427/"/>
    <updated>2014-10-20T09:44:27+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/10/20/094427</id>
    <content type="html"><![CDATA[<p>Firstly install Virtualbox and Vagrant:</p>

<pre><code>sudo pacman -S virtualbox vagrant
</code></pre>

<p>If you met the following warning, and vagrant can&rsquo;t start:</p>

<blockquote><p>The vboxdrv kernel module is not loaded.
Either there is no module available for the current kernel (3.16.4-1-ARCH) or it failed to load.</p></blockquote>

<p>run following commands to compile kernel module vboxdrv and load it:</p>

<pre><code>sudo pacman -S linux-headers virtualbox-host-dkms
sudo dkms install vboxhost/4.3.18
sudo modprobe vboxdrv
</code></pre>

<p>Verify the module is loaded successfully with <code>lsmod |grep vboxdrv</code>.</p>

<p>Ref: <a href="https://wiki.archlinux.org/index.php/VirtualBox">VirtualBox on ArchWiki</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Build C Development Environment With VirtualBox]]></title>
    <link href="http://leetschau.github.io/blog/2014/08/04/082233/"/>
    <updated>2014-08-04T08:22:33+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/08/04/082233</id>
    <content type="html"><![CDATA[<p>Host: Win7, VM: CentOS 6.5 minimal</p>

<h1>VM setup</h1>

<p>setup network and share folders in Settings of VM.</p>

<h2>Network setup</h2>

<ol>
<li><p>In settings of VM: the first NIC is host-only, second is bridged.</p></li>
<li><p>Start VM, create /etc/sysconfig/network-scripts/ifcfg-eth1 based on ifcfg-eth0, the hardware address is from /etc/udev/rules/70-persistent.network;</p></li>
<li><p>reboot;</p></li>
</ol>


<h1>Install Guest Addons</h1>

<p>In VM:</p>

<pre><code> # yum update
 # yum install gcc
 # yum install kernel-devel
 # mount /dev/scd0 /media/cdrom
 # sh /media/VBOXADDITIONS_4.0.12_72916/VBoxLinuxAdditions.run
</code></pre>

<p>Now you can visit share folders in /media/sf_<share_folder_name>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[VirtualBox on ArchLinux]]></title>
    <link href="http://leetschau.github.io/blog/2014/07/31/114212/"/>
    <updated>2014-07-31T11:42:12+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/07/31/114212</id>
    <content type="html"><![CDATA[<p>Follow <a href="https://wiki.archlinux.org/index.php/VirtualBox">VirtualBox on Arch Wiki</a>.</p>

<ol>
<li><p>Install VirtualBox: <code>pacman -S virtualbox virtualbox-host-modules qt4 ...</code>;</p></li>
<li><p>Load VirtualBox kernel driver manually: <code>modprobe vboxdrv</code>;</p></li>
<li><p>Download &ldquo;VirtualBox 4.3.14 Oracle VM VirtualBox Extension Pack&rdquo; (file name: Oracle_VM_VirtualBox_Extension_Pack-4.3.14-95030.vbox-extpack) from its official website;</p></li>
<li><p>Install it with root: <code>vboxmanage extpack install Oracle_VM_VirtualBox_Extension_Pack-4.3.14-95030.vbox-extpack</code>;</p></li>
<li><p>Start Virtualbox as user chad: <code>VirtualBox</code>;</p></li>
<li><p>Import VM template (Win7Office.ova), modify shared folder, start it.</p></li>
</ol>


<p>Ref:</p>

<p><a href="https://bbs.archlinux.org/viewtopic.php?id=139484">Installing VirtualBox extensions: error getting authority</a>
<a href="https://virtualbox.org/wiki/Downloads">Download VirtualBox</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Virtual Windows on Xpra]]></title>
    <link href="http://leetschau.github.io/blog/2014/06/30/085736/"/>
    <updated>2014-06-30T08:57:36+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/06/30/085736</id>
    <content type="html"><![CDATA[<p>I want run a virtual machine (Windows 7 system, named &ldquo;Win7Office&rdquo;)  on a remote PC (10.32.1.81).</p>

<h1>Modify VM config</h1>

<p>Start VirtualBox GUI (locally via physical monitor and keyboard connected with host 81, or via VNC). Check &ldquo;Auto-resize Guest Display&rdquo; in vm&rsquo;s Settings -> View menu. Then start Win7Office, verify if vm run properly. Once OK, close this vm.</p>

<h1>Use VM remotely</h1>

<p>On client, run following commands:</p>

<pre><code>ssh 81
xpra start :111 --start-child="VBoxManage startvm Win7Office"
exit
xpra attach ssh:81:111
</code></pre>

<p>Once done, use <code>xpra detach ssh:81:111</code> to detach from this VM.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Shutdown VirtualBox VM Forcibly When It's Stuck in Stopping Status]]></title>
    <link href="http://leetschau.github.io/blog/2014/04/22/182822/"/>
    <updated>2014-04-22T18:28:22+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/04/22/182822</id>
    <content type="html"><![CDATA[<p>Today I shutdown a VM using vagrant command <code>vagrant halt</code>, it&rsquo;s stuck in &ldquo;stopping&rdquo; status, and when I use <code>VBoxManage controlvm &lt;vm-name&gt; poweroff</code> to shutdown it, it raise an error:</p>

<pre><code>VBoxManage: error: The virtual machine is being powered down
VBoxManage: error: Details: code VBOX_E_INVALID_VM_STATE (0x80bb0002), component Console, interface IConsole, callee nsISupports
VBoxManage: error: Context: "PowerDown(progress.asOutParam())" at line 224 of file VBoxManageControlVM.cpp
</code></pre>

<p>So the only solution is kill the VM process:</p>

<pre><code>$ ps -ef|grep VBox
</code></pre>

<p>And a process named &ldquo;/opt/VirtualBox/VBoxHeadless &ndash;comment &hellip; &ndash;startvm &hellip;&rdquo; is the target (identified by the comment). Kill it then.</p>
]]></content>
  </entry>
  
</feed>
