<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Firfox | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/firfox/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2015-10-05T15:23:42+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Auto Translate English Words With dict.cn in Firefox]]></title>
    <link href="http://leetschau.github.io/blog/2015/09/12/085417/"/>
    <updated>2015-09-12T08:54:17+08:00</updated>
    <id>http://leetschau.github.io/blog/2015/09/12/085417</id>
    <content type="html"><![CDATA[<p>Everytime I want to get the meaning of a english word,
I have to copy the word, open dict.cn,
paste the word into the box and get the meaning, which is boring.</p>

<p>While there&rsquo;re some google translate extensions of firefox,
but they are slow and not very complete.
For example: the word meaning of &ldquo;spoiler&rdquo; in &ldquo;This synopsis may contain spoilers.&rdquo; on
page <a href="http://www.imdb.com/title/tt0209144/synopsis">Synopsis for Memento</a>.
So I have to build my own translate extension based on dict.cn.</p>

<h1>Steps</h1>

<ol>
<li><p>Install Greasemonkey extension in Firefox.</p></li>
<li><p>Build a new script with the following codes.</p></li>
<li><p>Select some text and press &ldquo;\&rdquo; key.</p>

<p> // ==UserScript==
 // @name        TranslateIt
 // @namespace   LeoScript
 // @include     *
 // @version     1
 // @grant       none
 // ==/UserScript==</p>

<p> // document.addEventListener(&lsquo;mouseup&rsquo;, getSel, false);
 document.addEventListener(&lsquo;keypress&rsquo;, transIt, false);</p>

<p> function transIt(e) {
   // console.log(e.key);
   if (e.key !== &lsquo;\&rsquo;){ return; }
   var sel = document.getSelection().toString();
   if (sel) { window.open(&lsquo;<a href="http://dict.cn/">http://dict.cn/</a>&rsquo; + sel); }
 }</p></li>
</ol>


<p>Sometimes the popuped windows will be blocked by the browser.
Add the website into the whitelist of the blocked sites.</p>

<p>To debug the script, modify and save the script, reload the web page, and test the script.</p>

<h1>References:</h1>

<p><a href="http://hayageek.com/greasemonkey-tutorial/#install-greasemonkey">Greasemonkey Tutorial for Beginners</a></p>

<p>Get selected text:</p>

<p><a href="http://stackoverflow.com/questions/3260926/greasemonkey-addeventlistener-questions">greasemonkey: addEventListener questions</a></p>

<p><a href="http://www.w3schools.com/jsref/met_document_addeventlistener.asp">HTML DOM addEventListener() Method</a></p>

<p>Test if ctrl or alt key is pressed on clicking:</p>

<p><a href="http://stackoverflow.com/questions/6806271/javascript-check-if-ctrl-button-was-pressed">JavaScript: Check if CTRL button was pressed</a></p>

<p>search &lsquo;altKey&rsquo; in <a href="http://www.w3schools.com/jsref/dom_obj_event.asp">HTML DOM Events</a></p>

<p><a href="http://stackoverflow.com/questions/4907843/open-a-url-in-a-new-tab-using-javascript">Open a URL in a new tab using JavaScript</a></p>
]]></content>
  </entry>
  
</feed>
