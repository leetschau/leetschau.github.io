<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Git | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/git/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2015-08-05T17:36:08+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Chinese Characters Can't Be Displayed Correctly in Git Log]]></title>
    <link href="http://leetschau.github.io/blog/2015/07/31/160627/"/>
    <updated>2015-07-31T16:06:27+08:00</updated>
    <id>http://leetschau.github.io/blog/2015/07/31/160627</id>
    <content type="html"><![CDATA[<p>On Ubuntu 14.04, <code>cat</code> can display Chinese characters correctly.
But in <code>vi</code> and <code>less</code> Chinese characters can&rsquo;t display correctly.</p>

<p>Solution:</p>

<p>Run <code>export LC_ALL=en_US.UTF-8</code> before <code>git log</code>.</p>

<p>If it works, add this line into /etc/environment.</p>

<p>If it doesn&rsquo;t work, run <code>export LANG=en_US.UTF-8</code>.</p>

<p>If it doesn&rsquo;t work, run <code>apt-get install language-pack-en-base</code>.</p>

<p>In vim, run <code>set enc=utf-8</code>.</p>

<p>Ref:</p>

<p><a href="http://askubuntu.com/questions/162391/how-do-i-fix-my-locale-issue">http://askubuntu.com/questions/162391/how-do-i-fix-my-locale-issue</a></p>

<p><a href="http://stackoverflow.com/questions/5166652/how-to-view-utf-8-characters-in-vim-or-gvim">http://stackoverflow.com/questions/5166652/how-to-view-utf-8-characters-in-vim-or-gvim</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Development Collaboration With Pull Request]]></title>
    <link href="http://leetschau.github.io/blog/2015/07/23/121622/"/>
    <updated>2015-07-23T12:16:22+08:00</updated>
    <id>http://leetschau.github.io/blog/2015/07/23/121622</id>
    <content type="html"><![CDATA[<p>Say your partner is Tom.</p>

<ol>
<li><p>Fork Tom&rsquo;s repository;</p></li>
<li><p>Clone your forked repository to your laptop;</p></li>
<li><p>Commit modificatioins to your laptop repository;</p></li>
<li><p>Push modifications to your forked repository;</p></li>
<li><p>Send a pull request in your forked repository on github website;</p></li>
<li><p>Tom accept your request and merges into his repository;</p></li>
<li><p>In your laptop repository, add upstream repository as a remote source;</p></li>
<li><p>Sync with the upstream repository with <code>git fetch</code> and <code>git merge</code>;</p></li>
</ol>


<p>This is a whole cycle. Repeat above steps to collaborate with Tom.</p>

<p>Ref:</p>

<p><a href="http://stackoverflow.com/questions/7244321/how-to-update-github-forked-repository">How to update GitHub forked repository?</a></p>

<p><a href="https://help.github.com/articles/pushing-to-a-remote/#pushing-a-branch">Pushing to a remote</a></p>

<p><a href="https://help.github.com/articles/syncing-a-fork/">Syncing a fork</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Trace File Change History in Git Repository]]></title>
    <link href="http://leetschau.github.io/blog/2015/06/30/101243/"/>
    <updated>2015-06-30T10:12:43+08:00</updated>
    <id>http://leetschau.github.io/blog/2015/06/30/101243</id>
    <content type="html"><![CDATA[<p>The website need hide some menu items under developing,
by comment out the html codes (at line 19~24 in file &ldquo;client/comTemp.html&rdquo;).
But last night we found they reappeared in the newest version.
Apparently someone used the older version (in which they were not commented out)
overwrite the latest version by error (without intention).</p>

<p>How to find out who, at which commit make this mistake?</p>

<p><strong>Step 1</strong>: get the error version.</p>

<pre><code>$ git blame -L 19,24 client/comTemp.html
dc7d385a (Tom     2015-06-26 17:39:28 +0800 19)    &lt;li&gt;
8b64184a (Bob     2015-05-04 19:32:43 +0800 20)      &lt;a href="http://leetschau.github.io/mall"&gt;Mall&lt;/a&gt;
6bb3ba70 (Franky  2015-05-04 15:45:50 +0800 21)    &lt;/li&gt;
6bb3ba70 (Franky  2015-05-04 15:45:50 +0800 22)    &lt;li&gt;
8b64184a (Bob     2015-05-04 19:32:43 +0800 23)      &lt;a href="http://leetschau.github.io/services"&gt;Services&lt;/a&gt;
dc7d385a (Tom     2015-06-26 17:39:28 +0800 24)    &lt;/li&gt;
</code></pre>

<p>Here the line 19 should be <code>&lt;!--&lt;li&gt;</code> and line 24 should be <code>&lt;/li&gt;--&gt;</code>,
to hide &ldquo;Mall&rdquo; and &ldquo;Services&rdquo;, which are under developing.</p>

<p><strong>Step 2</strong>: get the newest right version.</p>

<p>The wrong commit is &ldquo;dc7d385a&rdquo;, so we have to find the nearest change <strong>before</strong> it:</p>

<pre><code>$ git blame -L 19,24 'dc7d385a^' -- client/comTemp.html
96269db1 (Bob     2015-06-10 15:36:31 +0800 19)    &lt;!--&lt;li&gt;
8b64184a (Bob     2015-05-04 19:32:43 +0800 20)      &lt;a href="http://leetschau.github.io/mall"&gt;Mall&lt;/a&gt;
6bb3ba70 (Franky  2015-05-04 15:45:50 +0800 21)    &lt;/li&gt;
6bb3ba70 (Franky  2015-05-04 15:45:50 +0800 22)    &lt;li&gt;
8b64184a (Bob     2015-05-04 19:32:43 +0800 23)      &lt;a href="http://leetschau.github.io/services"&gt;Services&lt;/a&gt;
96269db1 (Bob     2015-06-10 15:36:31 +0800 24)    &lt;/li&gt;--&gt;
</code></pre>

<p>So we know Mall and Services were commented out at commit 96269db1, 2015-06-10,
and uncommented by error at commit dc7d385a, 2015-06-26, by Tom.</p>

<p><strong>Step 3</strong>: show code changes.</p>

<pre><code>$ git show dc7d385a -- client/comTemp.htm
...
-    &lt;!--&lt;li&gt;
+    &lt;li&gt;
       &lt;a href="http://leetschau.github.io/mall"&gt;Mall&lt;/a&gt;
     &lt;/li&gt;
     &lt;li&gt;
       &lt;a href="http://leetschau.github.io/services"&gt;Services&lt;/a&gt;
-    &lt;/li&gt;--&gt;
+    &lt;/li&gt;
...
</code></pre>

<p>It shows in commit dc7d385a,
two lines were deleted: &ldquo;<!--<li>&rdquo; and &ldquo;</li>&ndash;>&rdquo;,
while two lines were added: &ldquo;<li>&rdquo; and &ldquo;</li>&rdquo;.</p>

<p><strong>Step 4 (optional)</strong>: revert the commit</p>

<pre><code>git revert dc7d385a
</code></pre>

<p>Ref: <a href="http://stackoverflow.com/questions/14836696/delete-last-commit-in-bitbucket">http://stackoverflow.com/questions/14836696/delete-last-commit-in-bitbucket</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Git初体验]]></title>
    <link href="http://leetschau.github.io/blog/2015/05/10/091733/"/>
    <updated>2015-05-10T09:17:33+08:00</updated>
    <id>http://leetschau.github.io/blog/2015/05/10/091733</id>
    <content type="html"><![CDATA[<p>本文是毛豆网微课程"Git初体验“的文稿。</p>

<h1>Git初体验</h1>

<h2>Git有什么用？</h2>

<p>Git是Linux创造者Linus Torvalds编写的、目前人气最旺的版本控制工具。</p>

<p>那么版本控制是做什么的？</p>

<p>写代码免不了修修改改，比如经过一天的奋斗，你完成了一个”寻找最萌妹子“算法，
刚向死党炫耀，就发现选出来的居然是最萌喵星人，太没面子了，回去仔细研究一番，
发现漏了一层筛选条件，于是通宵达旦修改算法，天蒙蒙亮的时候，你发现自己的方法行不通，
需要回退到修改前的状态，换一种算法实现。但这一晚上修改了4、5个文件，
改动散布在不下十处地方，怎么把代码恢复到修改前的状态？</p>

<p>这个时候，是不是希望有哆啦A梦的时光飞毯，帮你回到昨天晚上？</p>

<p>是的，Git就是你要找的时光飞毯。</p>

<p>当然它的功能不止是在代码历史上跳跃，还有很多更炫酷的功能，但千里之行始于足下，让我们从最基本的功能开始吧！</p>

<h2>用Git做简单的版本控制</h2>

<p>Git最基本的用法是在命令行环境中通过执行Git命令的方式完成的。</p>

<p>比如你NB闪闪的算法保存在一个叫"zuiMeng"的文件夹里，
第一步要做的，是启动命令行环境，用<code>cd</code>命令把"zuiMeng"设置为当前目录，
然后执行：<code>git init</code>，这样你的"zuiMeng"目录就具备回到过去的魔力了。</p>

<p>现在你可以随意修改文件了，修改、删除都随你（当然你要作死把"zuiMeng"这个文件夹都删了Git就帮不了你了），
如果对修改满意，提交你的改动到代码库：</p>

<pre><code>git add -A
git commit -m "commit message"
</code></pre>

<p>&ldquo;commit message"一般是这次修改包含的内容，比如”增加了过滤宠物功能“之类的。</p>

<p>如果对改动不满意呢？
执行<code>git reset --hard HEAD</code>，搞定！
什么？你后悔了，要找回刚才的修改？
这个Git还真能满足你，不过这就不是本课程的范围啦，
记住你现在还是个菜鸟，改代码前多动动脑子想清楚没坏处。</p>

<p>这样周而复始，提交了很多次，这时可以用<code>git log</code>来查看你的提交历史。
如果想回到其中的某一次，首先需要在<code>git log</code>界面中记下目标commit的hash值，
这个值很长，只记下前6位就行了，假设这个值是"ef5a5b"，那么要跳转到这次提交，
执行<code>git checkout ef5a5b</code>，看看你的文件，是不是变回到那次提交时的模样了？</p>

<p>如果想跳回最后一次提交，除了重复上面的过程外，还有更简单的方法：
<code>git checkout master</code>，这是因为"master"是一个特殊标记，代表你的最后一次提交。</p>

<p>好，这就是Git的基本用法了，总结一下：</p>

<ol>
<li><p>初始化代码库：<code>git init</code>;</p></li>
<li><p>修改文件；</p></li>
<li><p>提交改动到代码库：<code>git add -A</code>，<code>git commit</code>；</p></li>
<li><p>查看版本历史：<code>git log</code>；</p></li>
<li><p>回退到历史版本：<code>git checkout &lt;hash&gt;</code>.</p></li>
</ol>


<h2>Git还能做什么？</h2>

<ol>
<li><p>分布式开发</p>

<p> 比如你在北京，刚在广州找到一位创业小伙伴，有了Git，就不用搬到广州去啦，
 也不必像Subversion那样，在公网架设代码库，只要在<a href="https://github.com/">github</a>上创建一个公共代码库，
 走遍天涯海角，你需要就是一个WiFi接入点了。</p>

<p> 如果你不希望大家都能看到你们的代码，推荐把公共代码库放在<a href="https://bitbucket.org/">bitbucket</a>上。</p></li>
<li><p>并行开发</p>

<p> 不管你的团队有多少开发者，大家可以同时开发不同的功能，然后合并在一起。
 当然会存在冲突的风险，这里推荐一个高逼格程序员必备神器<a href="https://github.com/nvie/gitflow">git-flow</a>，
 用它武装你的开发团队吧，从此妈妈再也不用担心我们代码冲突啦~</p></li>
</ol>


<h1>Git FAQ</h1>

<ol>
<li><p>我只会用Windows，能用Git吗？</p>

<p> 没问题！下载<a href="https://msysgit.github.io/">msysgit</a>安装包，一路Next安装好之后就可以用了，除了基本的命令行，还附带了一个图形界面工具，是不是很贴心？</p></li>
<li><p>那些命令记不住，能推荐一款纯图形界面的Git工具吗？</p>

<p> 当然可以。如果用Windows，上面介绍的msysgit的图形界面工具就很好了；如果用Linux，Git自带了gitk工具，Mac俺没用过，自己搜搜吧。</p></li>
<li><p>我英语不好，能给点中文资料吗？</p>

<p> 这个真帮不了你了，虽说Git中文资料蛮丰富的，可你的目标不是变成靠Copy/Paster大法挣千把块钱30岁以后转行产品经理的苦逼码农吧？
 如果你希望通过写代码打开一段崭新的人生，从现在开始阅读官网文档吧，
 我带过那么多小弟小妹被我逼着看文档，现在他们自己混饭吃，没有一个用Baidu找中文文档看的。</p></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Git GUI Clients on Linux]]></title>
    <link href="http://leetschau.github.io/blog/2015/04/30/095841/"/>
    <updated>2015-04-30T09:58:41+08:00</updated>
    <id>http://leetschau.github.io/blog/2015/04/30/095841</id>
    <content type="html"><![CDATA[<h1>gitg</h1>

<p>Very intuitive branch model.
You can select different branch,
which will be displayed as the left-most line in the branch view panel.
Cover the functions of giggle.</p>

<h1>gitk</h1>

<p>Come with git.
See all branches: <code>gitk --all</code>.
Not intuitive for branching information.</p>

<h1>git gui</h1>

<p>Install with <code>aptitude install git-gui</code>.</p>

<p>Use gitk&rsquo;s branch-browsing interface.</p>

<h1>SmartGit</h1>

<p><a href="http://www.syntevo.com/smartgit/">SmartGit</a> is free for non-commercial use.
You have to download the installer, extract it and run.</p>

<h1>giggle</h1>

<p>Install with <code>aptitude install giggle</code>.</p>

<p>You can browse the history of a file.</p>

<h1>git cola</h1>

<p>Install with <code>aptitude install git-cola</code>.</p>

<p>Like git gui, use gitk&rsquo;s branch-browsing interface, too.</p>

<h1>Summary</h1>

<p>gitg is the first choice.
SmartGit is good except its license restriction.</p>
]]></content>
  </entry>
  
</feed>
