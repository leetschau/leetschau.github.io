<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Command | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/command/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2015-04-18T20:45:37+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    <email><![CDATA[leetschau@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Linux常用命令笔记]]></title>
    <link href="http://leetschau.github.io/blog/2010/05/05/102159/"/>
    <updated>2010-05-05T10:21:59+08:00</updated>
    <id>http://leetschau.github.io/blog/2010/05/05/102159</id>
    <content type="html"><![CDATA[<ul>
<li><p>apt-get install/remove 安装/卸载软件；* cat 显示文本文件；</p></li>
<li><p>aspell 交互式拼写检查命令；</p></li>
<li><p>basename 两种用法：1. 去掉路径，返回文件名：basename /foo/bar -> bar；2. 去掉后缀，返回文件名：basename foo.bar .bar -> foo</p></li>
<li><p>cat 显示文件内容，例如"cat /proc/cpuinfo"可以查看CPU信息；有用的几个选项：-A: 显示不可见字符；-n显示行号，-s将相邻的多个空行合并为一个空行（只针对显示内容，不影响原文件内容）；</p></li>
<li><p>cd 改变目录；</p></li>
<li><p>chmod 修改文件属性，chmod user/group/other/all +/- read/write/execute filename, 例如chmod u+x file1是只给file1的user赋予执行权限；参考<a href="https://www.washington.edu/computing/unix/permissions.html">How to Set File Permissions Using `chmod'</a></p></li>
<li><p>chown 变更文件（或目录）的拥有者（或所属群组），例如root用户执行"chown godu:root -R ./ArtifactRepo"表示将当前目录下的ArtifactRepo目录及子目录所有权变更给godu用户和root用户组；</p></li>
<li><p>comm 比较文件，适于比较短的文件间做比较；</p></li>
<li><p>cp 拷贝文件；cp -r src_folder dst_folder 拷贝目录；</p></li>
<li><p>cut 截取文件每一行中的一部分，"-c"以字符为单位，"-f" 以域为单位（要求以tab为分隔符，空格无效）；"-d"指定域的分隔符；</p></li>
<li><p>date 显示系统日期和时间，使用-s参数可以设置日期和时间：date -s &ldquo;2 OCT 2006 18:00:00&rdquo;</p></li>
<li><p>df 显示磁盘使用情况，例如"df -h $HOME"是显示用户主目录的已用和可用的磁盘空间；</p></li>
<li><p>diff 比较两个文件或者目录，"-c"采用context格式，"-u"采用unified格式；</p></li>
<li><p>dmidecode 显示硬件设备信息；</p></li>
<li><p>dpkg 包管理，dpkg -l 列出所有已安装包；dpkg -l <package_name> 查询<package_name>的情况（是否安装，版本等）；dpkg -i 安装包；dpkg -r 卸载包；dpkg -P 完全卸载（purge）；</p></li>
<li><p>du -sh <folderName>: 查看文件夹占用的磁盘空间大小(s stands for summary, h stands for human readable），要打印某目录下所有项目（目录和文件）尺寸汇总：du -sh *，如果只打印目录：du -h &ndash;max-depth=1 <folderName>；将以上汇总按尺寸大小升序（从小到大）排列：du -s * | sort -n，降序排列：du -s * | sort -rn (r stands for reverse)，排序时不要加-h选项（它会导致排序错误，例如5M会被排在6k之前）；List largest 10 folders in current folder: <code>du -s *|sort -rn|head</code></p></li>
<li><p>env 列出环境变量</p></li>
<li><p>exit 退出；</p></li>
<li><p>expand 将文件中的tab转换为spaces;</p></li>
<li><p>export 将变量定义为环境变量（仅用于bash，格式为export VAR_NAME=var_value）；</p></li>
<li><p>find 查找文件，最常用格式：find <path> -name <file_name>，例如查找当前目录下名为test的文件和目录：find . -name test，详见 Linux查找文件命令find</p></li>
<li><p>free 查看系统memory使用情况，第一行（Mem）是考虑了内核缓冲后的使用率，第二行（"-/+ buffer/cache"）才是软件使用的内存；</p></li>
<li><p>genisoimage 将光盘制作为ISO文件，类似的还有dvdbackup，但需要安装，用dd也可以，但据说可能会出错，因为没有错误校验；</p></li>
<li><p>grep 从文件中查找字符串，</p>

<p>  grep -c &ldquo;<regex>"表示计算<regex>出现的次数，参考笔记&rdquo; Replace a String in Multiple Files in a Directory on Linux &ldquo;；</p>

<p>  grep -P &ldquo;\d&rdquo; filename，使用PCRE格式的正则表达式；</p>

<p>  grep -F &lsquo;<regex>&rsquo;: 正则表达式内所有字符均不转义；</p></li>
<li><p>gzip/gunzip 压缩/解压缩gz文件；</p></li>
<li><p>hdparm 获取或者设置硬件信息；</p></li>
<li><p>hwinfo 类似于lshw, Ubuntu上需要安装：apt-get install hwinfo, 内容十分庞杂，或者叫详细；</p></li>
<li><p>inxi -Fx 显示易于阅读的设备信息，格式最易于阅读；</p></li>
<li><p>iostat 显示系统磁盘当前的IO状况（Ubuntu，CentOS支持，Red Hat不支持）</p></li>
<li><p>ip 查询IP相关信息，<code>ip addr</code>=<code>ifconfig</code>, 其他还有<code>ip route</code> 和 <code>ip link</code>;</p></li>
<li><p>less <filename> 查看文本文件内容，或者压缩文件（如zip, tar.gz, jar, war等）的内部结构，操作类似于只读版vi，如用/查找，j, k, gg, G浏览等；</p></li>
<li><p>ln 创建文件链接（link），一般创建的是软链接（symbolic link），在target_dir目录下创建src_file1，src_file2等文件的软链接：ln -s src_file1 src_file2 &hellip; [target_dir]，最常用的格式是在目标目录下运行"ln -s src_file"，就在当前目录下创建了一个与src_file同名的软链接（src_file可以是绝对路径或者相对路径）, or give the link a new name: cd $target_dir; ln -s /source/to/link new_link_name</p></li>
<li><p>ls 显示当前目录下内容，可用选项：-d: 显示目录（而不是目录中的内容）；-R: 显示所有子目录中的内容，类似于tree，但不写成树状；-m:目录项之间用逗号做分隔符（而不是换行符），主要用于向其他程序做管道输入；</p></li>
<li><p>lsb_release -a 显示操作系统的distro ID和版本号，而不仅是uname提供的内核情况，此指令适用于Ubuntu，CentOS和Redhat，Redhat还可以用"cat /etc/redhat-release"查看distro ID；</p></li>
<li><p>lsblk -f 显示块设备信息，用于确定未mount的USB设备卷标、硬盘分区信息等；</p></li>
<li><p>lscpu 显示CPU相关信息；</p></li>
<li><p>lshw 列出硬件信息，比hwinfo精炼一些；</p></li>
<li><p>lsof 列出打开的文件，-p可以指定某个进程打开的文件，-u指定用户打开的文件，-c某个命令打开的文件，-i显示打开的网络端口，-i :22显示谁连接了22端口，-i tcp显示所有打开的TCP连接，-a -u bvt -i显示bvt用户打开的所有网络端口，其中"-a"表示后面的"-u bvt"与"-i"两个参数间是AND关系；
Ref: <a href="http://www.catonmat.net/blog/unix-utilities-lsof/">A Unix Utility You Should Know About: lsof</a> and <a href="http://www.ibm.com/developerworks/aix/library/au-lsof.html">Finding open files with lsof</a></p></li>
<li><p>lspci 显示PCI硬件设备信息，为Gentoo等Linux内核内核安装驱动时有用；</p></li>
<li><p>lsusb 显示USB总线信息；</p></li>
<li><p>mkdir 新建文件夹，-p指令可以用来建立多级目录，配合{}，可以一次建立一个目录树，例如"mkdir -p godu/{bin/{bin1,bin2},lib/{lib1,lib2}}&ldquo;可以建立一个3层目录树（用tree或者ls -R指令查看结果）；</p></li>
<li><p>more 分屏显示文件内容；</p></li>
<li><p>mount 用来挂载设备，如果没有参数则显示当前已挂载的设备；</p></li>
<li><p>mpstat 显示系统cpu当前状态（CentOS和Redhat支持）</p></li>
<li><p>netstat 显示某个进程使用了哪个端口，或者某个端口被哪个进程使用，例如"netstat -tupln|grep :1527"可以查询所有包含1527的进程-端口关系；</p></li>
<li><p>rm 删除文件（和目录），例如删除当前目录下有一个tcp_rpc子目录，删除其中所有.gitignore文件（包括所有子目录）："rm -ri tcp_rpc/<em>*/.git</em>&ldquo;，其中选项r表示包含所有子目录，i表示删除前询问；</p></li>
<li><p>rm -r folder_name 删除目录（如果子目录很多需要手工确认删除，可以用rm -rfv强制删除）；</p></li>
<li><p>passwd 修改密码；</p></li>
<li><p>paste 将多个文件的对应行连接在一起，例如paste -d &lsquo;-&rsquo; file1 file2将file1的第一行与file2的第一行以'-&lsquo;连接，后面各行依此类推；</p></li>
<li><p>pgrep 根据指定规则找出进程PID，相当于"ps -ef| grep &hellip;&ldquo;，-l列出进程名，-lf列出完整进程名；</p></li>
<li><p>pkill 关闭符合指定规则的PID，相当于"pgrep &hellip;|xargs kill"；</p></li>
<li><p>ps 显示进程信息；</p></li>
<li><p>pwdx [PID] 显示[PID]指定进程的当前工作目录，可以先用ps命令查到进程的PID，再用这个命令找工作目录；</p></li>
<li><p>rsync: rsync [options] src dst,</p>

<ul>
<li><p>&ldquo;-r&rdquo;: recursive, if src is a directory, &ldquo;rsync -r src dst&rdquo; means &ldquo;src&rdquo; itself with all things in it will be copied to dst, while &ldquo;rsync -r src/ dst&rdquo; will copy all things under &ldquo;src&rdquo; except &ldquo;src&rdquo; itself to &ldquo;dst&rdquo;;</p></li>
<li><p>&ldquo;-C&rdquo;: If you want avoid copy &ldquo;.svn&rdquo; or &ldquo;.git&rdquo; folder;</p></li>
<li><p>&ldquo;-u&rdquo; means update, if the file in dst is newer than that in src, it will not be copied;</p></li>
<li><p>&ldquo;-a&rdquo; means archive, keep the meta data (modify date and time, etc) of src files when copy, equals to &ldquo;-rlptgoD&rdquo;;</p></li>
<li><p>&ldquo;-t&rdquo; keep the modification time of original files;</p></li>
<li><p>&ldquo;-v&rdquo; means verbose;</p></li>
<li><p>&ldquo;&ndash;delete&rdquo; means delete files in destination folder which not exist in source folder;</p></li>
<li><p>&ldquo;-p&rdquo; means keep permissions between src and dst;</p></li>
<li><p>&ldquo;-l&rdquo; copy symlinks as symlinks;</p></li>
</ul>
</li>
</ul>


<p>&ldquo;r&rdquo; means recursive (including subdirs); t meas preserve modification time of the files; v means verbose; u means update, if the file in dst is newer than that in src, it will not be copied;</p>

<ul>
<li><p>script <file_name> 开始将屏幕输出记录到<file_name>中，输入exit结束日志记录；</p></li>
<li><p>setenv csh中定义环境变量，格式为setenv VAR_NAME var_value（与bash的export不同，变量名与值之间是空格而非等号）；</p></li>
<li><p>sort 以行为单位排序，"-n" 数字排序，例如"du -s <target_path> | sort -n"可以按文件夹大小排序；"-k"指定排序的项，例如下面需要对多个文件夹（Common, Element, Service）下的子目录汇总后按文件名排序，由于文件名是第9项（默认以空格或者tab为分割符，可以用"-t"指定其他分隔符），所以sort的选项设置为"-k 9,9"：</p>

<p>  drwxrwxr-x 7 bvt bvt 4096 Nov 12 10:24 datasource_core</p>

<p>  $ ll Common Element Service | sort -k 9,9</p></li>
</ul>


<p>sort支持用多个-k选项对多个域做不同种类的排序，下面的命令首先对第一个域做字母排序，然后对第二个域做数字排序：</p>

<pre><code>sort -k 1,1 -k 2n distros.txt
</code></pre>

<ul>
<li><p>source .profile 载入环境变量；</p></li>
<li><p>stat 显示文件详细信息</p></li>
<li><p>su 参考 Switch User Command in Linux</p></li>
<li><p>sudo passwd 在新装好系统中为root设置密码；</p></li>
<li><p>tar -zxvf或者gzip -d加tar -xvf解压缩；</p></li>
<li><p>tee 将stdin的内容同时重定向到stdout和文件中：ls /usr/bin|tee ls.txt|grep zip</p></li>
<li><p>time 计算程序运行时间，输出中的total值是时钟时间，还有一个/usr/bin/time -p指令输出的"real"值是实际的时钟时间；实例见 Calculate PI in 3 Languages Dynamically ；</p></li>
<li><p>top 具体功能以及与prstat的关系待查；</p></li>
<li><p>touch 更改文件的最后修改时间，"-r <filename>&ldquo;：设置为<filename>的时间；&rdquo;-d <timeString>&ldquo;：从字符串读取时间，可以是相对时间，这二者连用，可以实现“将A文件的时间设为比B文件早两天”这样的效果：</p>

<p>  touch -r fileB -d &lsquo;-2 days&rsquo; fileA</p></li>
<li><p>tr 字符变换，例如将多行文本汇总到一行，以逗号分隔：cat <file_name> | tr &lsquo;\n&rsquo; &lsquo;,&rsquo;</p></li>
<li><p>tree 用树状结构显示文件夹，-L 3表示只显示最上面3层目录；-d表示只显示目录，不显示文件；</p></li>
<li><p>type 显示命令类型，有shell builtin（如type自身）,shell function（如cd），以及外部命令，显示命令文件路径；</p></li>
<li><p>uptime 系统已经运行的时间、用户数、CPU负载量，与top指令的第一行输出相同；</p></li>
<li><p>whereis 查找可执行文件和文档的位置，例如linux上无法执行ifconfig时用whereis ifconfig可以找到这个命令所在的路径；</p></li>
<li><p>which 显示命令在PATH环境变量中第一个出现的位置，尤其适用于一个命令在PATH中有多个版本，可以用which确定当前执行版本的完整路径；</p></li>
<li><p>who: list all users logged onto the host</p></li>
<li><p>whois: get the owner information of a domain, for example: whois boco.com.cn</p></li>
<li><p>xargs</p></li>
<li><p>xxd: 以16进制显示文件内容，与UltraEdit的Hex模式类似；</p></li>
<li><p>zip: zip <file_name> -r <folder_name></p></li>
</ul>

]]></content>
  </entry>
  
</feed>
