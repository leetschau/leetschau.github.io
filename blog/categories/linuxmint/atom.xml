<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Linuxmint | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/linuxmint/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
<<<<<<< HEAD
  <updated>2015-06-01T12:52:39+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    
=======
  <updated>2015-05-26T17:47:26+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    <email><![CDATA[leetschau@gmail.com]]></email>
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Customize Login Screen of LinuxMint 17]]></title>
    <link href="http://leetschau.github.io/blog/2014/10/31/092340/"/>
    <updated>2014-10-31T09:23:40+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/10/31/092340</id>
    <content type="html"><![CDATA[<p>I think the default LinuxMint login screen is not cool, need a new backgroud picture.
How to change this backgroud picture? In LinuxMint 17 this is done by creating a new login &ldquo;Theme&rdquo; and use it.
According to <a href="http://www.windows-to-linux.com/2014/07/custom-login-screen-background-linux-mint-17/">Custom Login Screen Background On Linux Mint 17</a>
there is 3 steps to achieve this:</p>

<ol>
<li><p>Create a new theme based on the default theme;</p></li>
<li><p>Pack this theme;</p></li>
<li><p>Set it as the login theme.</p></li>
</ol>


<p>Firstly I choose a picture from Variety&rsquo;s Favorites folder as the new backgroud.
Then run following commands:</p>

<pre><code>sudo cp -r /usr/share/mdm/html-themes/Mint-X ~/StarWorld
cp ~/.config/variety/Favorites/fbdgbcb_-_imgur.jpg ~/StartWorld/bg.jpg
cp ~/.config/variety/Favorites/fbdgbcb_-_imgur.jpg ~/StartWorld/screenshot.jpg
# modify name &amp; description in ~/StarWorld/theme.info
tar czf star-world.tar.gz ~/StarWorld
</code></pre>

<p>Next login to Xfce desktop, startup &ldquo;Login Manager&rdquo;, add a new theme, choose star-world.tar.gz.</p>

<p>Now logout and see the effect.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Xen on LinuxMint]]></title>
    <link href="http://leetschau.github.io/blog/2014/10/29/094400/"/>
    <updated>2014-10-29T09:44:00+08:00</updated>
    <id>http://leetschau.github.io/blog/2014/10/29/094400</id>
    <content type="html"><![CDATA[<p>This morning I tried to install Debian 7.6 64bit on the DELL PC, but it failed due to some hardware problems.
Then I installed LinuxMint 17 Xfce 64bit on this machine, and partition disk following <a href="http://wiki.xenproject.org/wiki/Xen_Project_Beginners_Guide">Xen Project Beginners Guide</a>:</p>

<blockquote><p>chad@chadpc ~ $ df -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/sda1       276M   45M  218M  17% /boot
/dev/sda2        15G  4.1G  9.8G  30% /
&hellip;</p></blockquote>

<p>where /dev/sda1 is formated as ext2, and /dev/sda2 is formated as ext3, and leave /dev/sda4 unused.</p>

<p>After reboot and login LinuxMint,
modify apt mirror list according to <a href="https://launchpad.net/ubuntu/+archivemirrors">Official Archive Mirrors for Ubuntu</a>,
adding the following lines into /etc/apt/sources.list:</p>

<pre><code>deb http://mirrors.zju.edu.cn/ubuntu/ trusty main
deb-src http://mirrors.zju.edu.cn/ubuntu/ trusty main
deb http://ubuntu.cnssuestc.org/ubuntu/ trusty main
deb-src http://ubuntu.cnssuestc.org/ubuntu/ trusty main
</code></pre>

<p>Then run commands as root:</p>

<pre><code>apt-get update
apt-get install openssh-server
apt-get install lvm2
pvcreate /dev/sda4
vgcreate vg0 /dev/sda4
apt-get install bridge-utils

brctl addbr xenbr0
brctl addif xenbr0 eth0
dhclient xenbr0

aptitude -P install xen-system  # not xen-linux-system
dpkg-divert --divert /etc/grub.d/08_linux_xen --rename /etc/grub.d/20_linux_xen
update-grub
reboot
# you can find now "Ubuntu GNU/Linux, with Xen hypervisor" is the default startup item in grub boot menu
</code></pre>

<h1>Build DomU</h1>

<pre><code>apt-get install xen-tools
</code></pre>

<h2>Using xen-create-image</h2>

<pre><code>xen-create-image --hostname=ch1 --memory=1024gb --vcpus=2 --lvm=vg0 --dhcp --pygrub --dist=wheezy
</code></pre>

<h2>Using xl</h2>

<p>Follow <a href="http://wiki.xen.org/wiki/Debian_Guest_Installation_Using_Debian_Installer">Debian Guest Installation Using Debian Installer</a>.</p>

<p>Here we download 2 net-install disk (which is very small) and install the guest system via Internet.
So the host machine need to connected with Internet, or can connect to another machine which can access Internet,
and defining a proxy when installing.</p>

<p>Select a mirror <a href="http://ftp.cn.debian.org/debian/">ftp.cn.debian.org/debian/</a> in <a href="http://www.debian.org/mirror/list">Debian worldwide mirror sites</a>.
And download vmlinuz and initrd.gz (from <a href="http://ftp.cn.debian.org/debian/dists/stable/main/installer-amd64/current/images/netboot/xen/">http://ftp.cn.debian.org/debian/dists/stable/main/installer-amd64/current/images/netboot/xen/</a>)
to local folder /home/chad/warez/xen-images-debian.</p>

<p>Create a config file /root/deb.cfg:</p>

<pre><code>name = "debian-installer"
memory = 1024
disk = ['phy:/dev/vg0/debian-installer,xvda,w']
vif = [' ']

kernel = "/home/chad/warez/xen-images-debian/vmlinuz"
ramdisk = "/home/chad/warez/xen-images-debian/initrd.gz"
extra = "debian-installer/exit/always_halt=true -- console=hvc0"
</code></pre>

<p>Then run following commands as root:</p>

<pre><code>lvcreate -L 4G -n debian-installer /dev/vg0
xl create -c /root/deb.cfg
</code></pre>

<p>Once installation has completed the guest will shutdown and exit.
Remove the kernel, initrd and extra lines from the guest configuration, here remove the last 3 lines in deb.conf
and replace them with simply:</p>

<pre><code>bootloader = "pygrub"
</code></pre>

<p>Now the deb.conf became:</p>

<pre><code>name = "debian-installer"
memory = 1024
disk = ['phy:/dev/vg0/debian-installer,xvda,w']
vif = [' ']
bootloader = "pygrub"
</code></pre>

<p>Startup the guest system with <code>xl create -c deb.cfg</code>.
List all running vms with <code>xl list</code> in dom0.
Connect this vm with <code>xl console debian-installer</code>.
List all available subcommands of xl with <code>xl help</code>.
Shutdown this vm with <code>xl shutdown debian-installer</code></p>

<h1>Post installation</h1>

<p>The &ldquo;brctl&rdquo; and &ldquo;dhclient&rdquo; commands above only build the network interface during system session.
After system reboot, the bridge interface disappears, thus startup vm will failed.
So we need define the bridge in /etc/network/interfaces, add the following lines into this file:</p>

<pre><code>auto eth0
iface eth0 inet dhcp

auto xenbr0
iface xenbr0 inet dhcp
    bridge_ports eth0
</code></pre>

<p>If after reboot, the eth0 can&rsquo;t get IP address, use <code>ifdown eth0</code> and <code>ifup eth0</code> to refresh eth0.</p>

<p>Update 2014.10.31: these settings cause network connection failed. After removing &ldquo;auto xenbr0&hellip;&rdquo; section, everything goes fine.
So use <code>brctl</code> and <code>dhclient</code> to setup bridge after system startup.</p>

<p>Notes:</p>

<ol>
<li><p>Use <code>lsblk -f</code> to see the volume group and logical volumes.</p></li>
<li><p>pvcreate means &ldquo;create physical volume&rdquo;, vgcreate means &ldquo;create volume group&rdquo;, lvcreate means &ldquo;create logical volume&rdquo;.</p></li>
<li><p>Use <code>lvremove /dev/vg0/debian-installer</code> to remove the logical volume created before.</p></li>
<li><p>Use <code>dpkg-divert --list</code> to list all diversions, and <code>dpkg-divert --remove /etc/grub.d/20_linux_xen</code> to remove a diversion.</p></li>
</ol>


<p>Ref:</p>

<p><a href="http://wiki.xenproject.org/wiki/Xen_Project_Beginners_Guide">Xen Project Beginners Guide</a></p>

<p><a href="https://wiki.debian.org/Xen">Xen on Debian Wiki</a></p>
]]></content>
  </entry>
  
</feed>
