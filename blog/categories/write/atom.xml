<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Write | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/write/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2015-04-18T14:12:11+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    <email><![CDATA[leetschau@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Python的telnet客户端交互]]></title>
    <link href="http://leetschau.github.io/blog/2011/01/06/155629/"/>
    <updated>2011-01-06T15:56:29+08:00</updated>
    <id>http://leetschau.github.io/blog/2011/01/06/155629</id>
    <content type="html"><![CDATA[<p>代码实例：</p>

<p> import telnetlib</p>

<p> ftp_serv_addr = &lsquo;10.0.2.47&rsquo;</p>

<p> ftp_usrname = &lsquo;godu1&rsquo;</p>

<p> ftp_password = &lsquo;godu1&rsquo;</p>

<p> tn = telnetlib.Telnet(ftp_serv_addr)</p>

<p> tn.read_until(&lsquo;ogin: &rsquo;)</p>

<p> tn.write(ftp_usrname+&lsquo;\n&rsquo;)</p>

<p> tn.read_until(&lsquo;assword: &rsquo;)</p>

<p> tn.write(ftp_password+&lsquo;\n&rsquo;)</p>

<p> tn.read_until(&lsquo;$ &rsquo;)</p>

<p> aa = tn.write(&lsquo;ps -ef|grep CMD\n&rsquo;)</p>

<p> print(aa)</p>

<p> print(&lsquo;=====&rsquo;)</p>

<p> bb = tn.read_until(&lsquo;$ &rsquo;)</p>

<p> print(bb)</p>

<p>运行结果：</p>

<p> None</p>

<hr />

<p> ps -ef|grep CMD</p>

<p> UID  PID PPID C STIME TTY   TIME CMD</p>

<p> godu1  4973 4945 0 16:00 pts/2 00:00:00 grep CMD</p>

<p> [godu1@goduserver ~]$</p>

<p>上面的例子首先说明了telnet客户端与服务端的交互都是用write方法发命令，用read_until方法接收返回结果。可以看到登录过程也是如此（只是返回结果的期望不同），write方法不返回结果，read_until方法返回所有接收到的字符串，包括命令提示符。</p>
]]></content>
  </entry>
  
</feed>
