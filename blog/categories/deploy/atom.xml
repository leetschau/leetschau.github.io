<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Deploy | Dark Matter in Cyberspace]]></title>
  <link href="http://leetschau.github.io/blog/categories/deploy/atom.xml" rel="self"/>
  <link href="http://leetschau.github.io/"/>
  <updated>2015-05-10T10:22:47+08:00</updated>
  <id>http://leetschau.github.io/</id>
  <author>
    <name><![CDATA[Li Chao]]></name>
    <email><![CDATA[leetschau@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Deploy Meteor Application Manually]]></title>
    <link href="http://leetschau.github.io/blog/2015/03/26/203002/"/>
    <updated>2015-03-26T20:30:02+08:00</updated>
    <id>http://leetschau.github.io/blog/2015/03/26/203002</id>
    <content type="html"><![CDATA[<p>首先在<a href="http://www.aliyun.com/">阿里云</a>上购买一台&#8221;云服务器ECS&#8221;，
然后进入通过SSH连接VPS。</p>

<p>作为Meteor应用的生产环境，只需要安装mongoDB和Node.js就可以了，不需要安装Meteor.
通过aptitude安装的mongoDB虽然版本比较老(2.4)，但不接受本机以外的连接，
安全性有保障。</p>

<pre><code># aptitude update
# aptitude install mongodb-server
# aptitude install software-properties-common
# add-apt-repository ppa:chris-lea/node.js
# aptitude update
# aptitude install nodejs
</code></pre>

<p>Then create a start script &ldquo;startMeteor&rdquo;:</p>

<pre><code>#!/bin/bash

export PORT=80
export MONGO_URL=mongodb://localhost:27017/newfairs
export ROOT_URL=http://www.newfairs.biz
node /root/bundle/main.js &gt; /root/meteorApp.log
</code></pre>

<p>Now build Meteor application package on developing computer,
and transfer it to production machine:</p>

<pre><code>cd /path/to/meteorProjectRoot
meteor build .
scp newfairsweb.tar.gz alivps:~/
</code></pre>

<p>On production machine, extract Meteor package and install it as a node app:</p>

<pre><code>cd /root
tar zxf newfairsweb.tar.gz
cd bundle/programs/server
npm install
</code></pre>

<p>将VPS恢复到初始状态的方法是：在云服务器ECS主页的&#8221;实例&#8221;页下，
对应主机最右边，&#8221;管理 升级 续费 更多&#8221;中点击&#8221;更多&#8221;，
首先点击&#8221;停止&#8221;来停止实例运行，然后点击&#8221;重新初始化磁盘&#8221;，
将系统盘和数据盘都初始化。</p>
]]></content>
  </entry>
  
</feed>
