
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Linux系统CPU信息查询方法 - Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
  <meta name="description" content="lscpu 运行lscpu命令，输出中，"CPU(s)&ldquo;是逻辑CPU数，"Socket(s)"是物理插槽数，"Core(s) per socket"是每颗CPU的核数，"Thread(s) per core"是每个核的线程数，一般是1或者2，后者叫做“超线程”。 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leetschau.github.io/blog/2012/09/29/095503/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
    <h2>A notes repository for Meteor.js, data mining, Linux, etc.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="leetschau.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Linux系统CPU信息查询方法</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-09-29T09:55:03+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>9:55 am</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><h1>lscpu</h1>

<p>运行<code>lscpu</code>命令，输出中，"CPU(s)&ldquo;是逻辑CPU数，"Socket(s)"是物理插槽数，"Core(s) per socket"是每颗CPU的核数，"Thread(s) per core"是每个核的线程数，一般是1或者2，后者叫做“超线程”。
逻辑CPU数是物理插槽数、核数和每核线程数3者的乘积。
平常所说的“CPU个数”，就是指逻辑CPU数，也就是"CPU(s)"的值。</p>

<h1>cat /proc/cpuinfo</h1>

<p>下面是一个实例：</p>

<pre><code>processor  : 0 
vendor_id  : GenuineIntel 
cpu family  : 6 
model   : 26 
model name  : Intel(R) Xeon(R) CPU   X5550 @ 2.67GHz 
stepping  : 5 
cpu MHz   : 2666.851 
cache size  : 8192 KB 
physical id  : 0 
siblings  : 8 
core id   : 0 cpu cores  : 4 
apicid   : 0 
fpu   : yes 
fpu_exception  : yes 
cpuid level  : 11 
wp   : yes 
flags   : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm syscall nx rdtscp lm constant_tsc ida nonstop_tsc pni monitor ds_cpl vmx est tm2 cx16 xtpr popcnt lahf_lm 
bogomips  : 5333.70 
clflush size  : 64 
cache_alignment  : 64 
address sizes  : 40 bits physical, 48 bits virtual 
power management: [8] 
processor  : 1 
... 
cpu cores  : 4 
... 
</code></pre>

<p>processor  : n &hellip; cpu cores  : 4 &hellip; processor  : 15 &hellip; cpu cores  : 4 &hellip;</p>

<p>【所以CPU(processor)的数量是最后一个cpu标号加1，每颗CPU的核数是其中"cpu cores"的值，这是一个有16颗4核CPU的服务器】</p>

<p>上面的结论错误，阅读cpuinfo的正确方法是：</p>

<ol>
<li><p>通过physical id确定有多少个物理CPU（即多少个CPU插槽socket，或者叫物理封装）；</p></li>
<li><p>通过cpu cores确定某一个物理CPU有多少核；</p></li>
<li><p>如果siblings数量与cpu core一致，说明没有超线程。反之如果siblings的值大于cpu cores，说明开启了超线程（hyperthreading），开启超线程的另一个证据是不同的processor拥有同样的core id，这一点可以用"cat /proc/cpuinfo|grep &ldquo;core id"确认；</p></li>
<li><p>processor的数量应该等于物理CPU的数量与siblings的乘积；</p></li>
</ol>


<p>根据以上方法分析，上面的服务器有两颗4核CPU（即两个CPU插槽，每个插槽上的CPU有4个核），开启了超线程，共有16个逻辑CPU。</p>

<p>参考<a href="http://www.richweb.com/cpu_info">Understanding Linux /proc/cpuinfo</a></p>

<h1>相关资料</h1>

<ul>
<li><p>查看CPU是32位还是64的方法是：cpuinfo的flags参数中是否有"lm"这一项，lm表示long mode，可以用"cat /proc/cpuinfo|grep &ldquo;\&lt;lm>"查询；</p></li>
<li><p>CPU超线程技术可以参考<a href="https://en.wikipedia.org/wiki/Hyper-threading">Hyper-threading</a>。</p></li>
</ul>


<h1>另：用free指令查看系统内存大小</h1>

<p>用free -g以GB为单位显示内存大小，另外可以通过查看cat /proc/meminfo指令结果第一行的方法确定物理内存大小；</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Li Chao</span></span>

      




<time class='entry-date' datetime='2012-09-29T09:55:03+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>9:55 am</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/cpu/'>cpu</a>, <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/unix/'>unix</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://leetschau.github.io/blog/2012/09/29/095503/" data-via="" data-counturl="http://leetschau.github.io/blog/2012/09/29/095503/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/09/28/165932/" title="Previous Post: Linux中网络相关的配置文件">&laquo; Linux中网络相关的配置文件</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/10/08/093202/" title="Next Post: SVN服务搭建笔记">SVN服务搭建笔记 &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/11/20/104508/">Clear Chrome DNS Cache</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/19/103131/">Linux的图形化Git客户端</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/02/093547/">Move Window Between Multiple Screens via Tmux</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/31/011200/">Synchronize Data From MongoDB to Elasticsearch</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/30/131706/">Elasticsearch River for MongoDB</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
