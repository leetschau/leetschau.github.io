<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Li Chao" />
        <meta name="copyright" content="Li Chao" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="ConEmu, TotalCMD, cmder, Tech, " />

<meta property="og:title" content="Cmder和ConEmu笔记 "/>
<meta property="og:url" content="http://leetschau.github.io/cmderhe-conemubi-ji.html" />
<meta property="og:description" content="cmder是一个优秀的Windows命令行运行环境，它不仅自身对Windows console做了优化， 还可以通过多tab同时运行多个命令行程序，例如cygwin， 避免了同时开多个命令行窗口导致的切换困难的问题。 cmder Modify default settings with Win-Alt-P: [Main &gt; Appearence] check Single instance mode; [Feature &gt; Text cursor] Active Text Cursor: Block. [Keys &amp; Macro], filter with activate, modify Activate console by number (with Type System) from Ctrl to Alt; [Startup &gt; Tasks] click button Add default tasks..., in …" />
<meta property="og:site_name" content="DarkMatter in Cyberspace" />
<meta property="og:article:author" content="Li Chao" />
<meta property="og:article:published_time" content="2013-01-28T18:27:53+08:00" />
<meta property="" content="2017-10-16T15:06:15+08:00" />
<meta name="twitter:title" content="Cmder和ConEmu笔记 ">
<meta name="twitter:description" content="cmder是一个优秀的Windows命令行运行环境，它不仅自身对Windows console做了优化， 还可以通过多tab同时运行多个命令行程序，例如cygwin， 避免了同时开多个命令行窗口导致的切换困难的问题。 cmder Modify default settings with Win-Alt-P: [Main &gt; Appearence] check Single instance mode; [Feature &gt; Text cursor] Active Text Cursor: Block. [Keys &amp; Macro], filter with activate, modify Activate console by number (with Type System) from Ctrl to Alt; [Startup &gt; Tasks] click button Add default tasks..., in …">

        <title>Cmder和ConEmu笔记  · DarkMatter in Cyberspace
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="http://leetschau.github.io/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://leetschau.github.io/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://leetschau.github.io/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://leetschau.github.io/theme/css/custom.css" media="screen">
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="http://leetschau.github.io/"><span class=site-name>DarkMatter in Cyberspace</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="http://leetschau.github.io">Home</a></li>
                            <li ><a href="http://leetschau.github.io/categories.html">Categories</a></li>
                            <li ><a href="http://leetschau.github.io/tags.html">Tags</a></li>
                            <li ><a href="http://leetschau.github.io/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="http://leetschau.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="http://leetschau.github.io/cmderhe-conemubi-ji.html"> Cmder和ConEmu笔记  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <hr>
<p>cmder是一个优秀的Windows命令行运行环境，它不仅自身对Windows console做了优化，
还可以通过多tab同时运行多个命令行程序，例如cygwin，
避免了同时开多个命令行窗口导致的切换困难的问题。</p>
<h1>cmder</h1>
<p>Modify default settings with <code>Win-Alt-P</code>:</p>
<ul>
<li>
<p>[Main &gt; Appearence] check <em>Single instance mode</em>;</p>
</li>
<li>
<p>[Feature &gt; Text cursor] Active Text Cursor: Block.</p>
</li>
<li>
<p>[Keys &amp; Macro], filter with <code>activate</code>,
  modify <code>Activate console by number</code> (with Type <code>System</code>) from <code>Ctrl</code> to <code>Alt</code>;</p>
</li>
<li>
<p>[Startup &gt; Tasks] click button <code>Add default tasks...</code>,
  in all new added tasks, choose <code>{Bash::CygWin bash}</code>,
  rename to <code>zsh::CygWin zsh</code>, assign hotkey <code>Alt-L</code>，
  change its command to <code>set CHERE_INVOKING=1 &amp; %ConEmuDir%\..\..\..\cygRoot\bin\zsh.exe --login -i -new_console:m:/cygdrive -new_console:C:"%ConEmuDir%\..\..\..\cygRoot\Cygwin.ico" -new_console:d:C:\apps\cygRoot\home\lee_c</code>.
  Here its startup executable is changed from <code>bash</code> to <code>zsh</code>,
  and <code>-new_console:d:C:\apps\cygRoot\home\lee_c</code> is added to
  the auto-generated command to change its startup folder.</p>
</li>
</ul>
<p>Now in cmder, you can use <code>Alt-L</code> to open a new cygwin window.
And use <code>Alt-1..9</code> to change between the tabs.</p>
<p>cmder equivalent of .bashrc or .zshrc: <cmderHOME>\config\user-profile.cmd.</p>
<p>cmder equivalent of .bash_aliases: <cmderHOME>\config\user-aliases.cmd.
Note you have to check <em>Use Legacy console</em> to keep the aliases work.
See <a href="https://github.com/cmderdev/cmder/issues/1257">Aliases not working at all</a>
for details.</p>
<h2>Windows split</h2>
<p>Different with tmux, "pane" in cmder is actually a "window",
which has its own tab name. And you can use <em>Alt-<number></em> key
to switch to any pane in a window.</p>
<p>Search <em>split</em> in <em>Keys &amp; Macros</em>, assaign <em>Ctrl-Shift-R</em> to
<em>Split: Duplicate active 'shell' split to right: Split(0, 50, 0)</em>;
and <em>Ctrl-Shift-B</em> to
<em>Split: Duplicate active 'shell' split to bottom Split(0, 0, 50)</em>;
<em>Alt-h</em> to <em>Split: Put focus to nearest pane leftward: Split(2, -1, 0)</em>
and so on.</p>
<h2>cmder不能更新%PATH%环境变量问题的解决方法</h2>
<p>使用<code>choco install yarn</code>后，在cmd里可以执行<code>yarn</code>，但在cmder里报找不到此命令错误，
发现cmder里的%PATH%没有被更新。</p>
<p>参考<a href="https://superuser.com/questions/1182896/dont-refresh-path-user-environment-variable-values-in-conemu-without-windows-re">Don't refresh PATH user environment variable values in ConEmu without Windows reboot</a>，
有可能是运行cmder.exe的父进程没有更新环境变量导致，于是退出并重新启动了运行
cmder.exe的autohotkey脚本，再次启动cmder后<code>yarn</code>命令可用了。</p>
<h2>cmder中的cygwin不能正常显示汉字解决方法</h2>
<p>在cmder的 [Startup &gt; Tasks] 中定义一个zsh启动项：</p>
<div class="highlight"><pre><span></span>set CHERE_INVOKING=1 &amp; %ConEmuDir%\..\..\..\cygRoot\bin\zsh.exe --login -i -new_console:m:/cygdrive -new_console:C:&quot;%ConEmuDir%\..\..\..\cygRoot\Cygwin.ico&quot; -new_console:d:C:\apps\cygRoot\home\lee_c
</pre></div>


<p>启动后不能正常显示汉字，<code>autojump</code>也不能正常工作，
为了确定问题出现位置，新建一个 mintty 启动项：</p>
<div class="highlight"><pre><span></span>c:\apps\cygRoot\bin\mintty.exe -i /Cygwin-Terminal.ico -
</pre></div>


<p>（其中的<code>-</code>表示使用用户默认shell），启动后能正常显示汉字，比较二者<code>locale</code>差异，
发现前者为<code>zh_CN</code>，后者为<code>zh_CN.UTF-8</code>，为什么会不同尚不清楚。
解决方法：在.zshrc中加一行<code>export LC_ALL="zh_CN.UTF-8"</code>，
汉字就可以正常显示了，<code>autojump</code>也正常了。</p>
<p>Task中的启动命令的参数（例如<code>-new_console...</code>）含义，参考：
<em> <a href="http://conemu.github.io/en/NewConsole.html#syntax">Switches -new_console and -cur_console</a>
</em> <a href="http://conemu.github.io/en/CygwinStartDir.html">cygwin, mingw, ConEmu and start up directory</a></p>
<p>cmder配置的[Main]中字符编码定义：
<em> Main console font: Consolas, Size: 12
</em> Font charset: ANSI
* Alternative font: 微软雅黑</p>
<p>.zshrc中oh-my-zsh theme的定义：<code>ZSH_THEME="mortalscumbag"</code>.</p>
<h2>快捷键配置</h2>
<p>在 [Startup &gt; Tasks] 中将cmder启动快捷键设置为 <em>Alt-C</em>。</p>
<p>cmder 的 <em>Quake style</em> 很方便，具体设置为：
在 [Main &gt; Quake style] 中勾选 <em>Quake style slide down</em>，
cmder默认的显示/隐藏主窗体快捷键不方便，
在 [Keys &amp; Macros] 中将 <em>Minimize/Restore</em> 快捷键设置为 <em>Alt-U</em>
（不要用<em>Alt-J</em>，与tmux快捷键冲突）。</p>
<p>这样就可以用 <em>Alt-U</em> 显示/隐藏cmder了，而且隐藏时没有任务栏图标，
在托盘区有图标，如果忘了快捷键，点击托盘区图标也能显示cmder主窗体。</p>
<p>将 <em>Rename active tab</em> 快捷键设置为 <em>Alt-R</em>.</p>
<h1>ConEmu</h1>
<ul>
<li>
<p>在[Startup -&gt; Environment]中添加<code>set PATH=%PATH%;d:\apps\nodejs;...</code>
  可以在命令行里直接执行<code>node</code>.</p>
</li>
<li>
<p>Cmder中可以执行<code>ssh</code>, <code>ssh-keygen</code>和<code>scp</code>命令，
  可以使用<code>.ssh/config</code>定义配置文件，所以在Cmder里连接Linux服务器的基本过程是：
  用ssh-keygen生成本机的公/私钥对，然后在.ssh/config里定义Linux服务器的别名，
  将本机的公钥拷贝到Linux服务器的.ssh/authorized_hosts中，
  就可以使用别名免密码登录Linux服务器了；</p>
</li>
<li>
<p>所有console都关闭后是否在托盘区保留ConEmu图标：
  Settings -&gt; Main -&gt; Task bar -&gt; When last console is closed:
  check "Close ConEmu window";</p>
</li>
<li>
<p>单个窗口时隐藏tab页：Settings -&gt; Features -&gt; Tabs -&gt; Tabs: check "Auto show";</p>
</li>
<li>
<p>自定义命令别名：Settings -&gt; Startup -&gt; Environment: 在文本框中添加别名，
  例如<code>alias e=exit</code>.</p>
</li>
<li>
<p>用ConEmu取代cmd.exe作为默认的Console程序环境：Settings -&gt; Integration: 
  勾选"Force ConEmu as default terminal for console applications"
  和"Register on OS startup"，重启操作系统之后生效。
  结合proto，可以用Ctrl-U键在当前文件夹下启动ConEmu.</p>
</li>
</ul>
<h1>常用快捷键</h1>
<p>Win+Q: 下一个tab页；</p>
<p>Win+X: 新建一个tab页；</p>
<p>Win+Delete: 关闭当前tab页；</p>
<p>Ctrl + PgUp/PgDown: 向前/后翻页</p>
<p>Win+Alt+P: 打开设置窗体</p>
<h1>在TotalCmd中启动ConEmu等外部程序</h1>
<p>TotalCmd的Ctrl+G（Start DOS）可以在当前路径下启动命令行，但命令行窗口的字体太丑了，
需要以ConEmu（命令行增强工具）代替它，
不用Autohotkey或者Executor启动ConEmu的原因在于，
我们需要ConEmu启动后的当前目录是TotalCmd的当前目录，
这个值每次都不同，不可能配到这些全局性的程序里，
只能从TotalCmd里拿到当前目录然后启动ConEmu，实现方法如下：</p>
<ol>
<li>
<p>定义用户指令：主菜单 -&gt; Commands -&gt; Browse Internal Commands:
   "Category"选usercmd.ini，新建一个名为em_ConEmu的指令，
   "Command"和"Icon file"都填"d:\Apps\ConEmu\ConEmu.exe"，
   "Parameters"写"/Single"（大小写敏感，新创建的窗口作为已有ConEmu窗口的tab，
   而不是新开一个窗口），"Start path"留空，因为留空意味着以当前目录为起始目录；</p>
</li>
<li>
<p>为该指令指定快捷键：主菜单 -&gt; Configuration -&gt; Misc -&gt; Redefine hotkeys，
   快捷键设为Alt + G，Command设为em_ConEmu。</p>
</li>
</ol>
<p>这样就可以用Alt + G启动增强的命令行了，
同样的方法可以启动其他任何需要获得TotalCmd当前路径的可执行程序；</p>
<p>要查看已经定义的快捷键，点击"Hotkey"单选框后面的小三角按钮，
就会列出所有已定义的快捷键。</p>
<h1>其他</h1>
<ul>
<li>ConEmu还有其他很多有用的命令行参数，使用ConEmu.exe /help查看。</li>
</ul>
            
            
            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2013-01-28T18:27:53+08:00">Jan 28, 2013</time>

<h4>Last Updated</h4>
<time datetime="2017-10-16T15:06:15+08:00">Oct 16, 2017</time>

            <h4>Category</h4>
            <a class="category-link" href="http://leetschau.github.io/categories.html#tech-ref">Tech</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="http://leetschau.github.io/tags.html#cmder-ref">cmder
                    <span>2</span>
</a></li>
                <li><a href="http://leetschau.github.io/tags.html#conemu-ref">ConEmu
                    <span>3</span>
</a></li>
                <li><a href="http://leetschau.github.io/tags.html#totalcmd-ref">TotalCMD
                    <span>7</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="#" title="My You can add links in your config file Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-you can add links in your config file sidebar-social-links"></i></a>
    <a href="#" title="My Another social link Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-another social link sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>