
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
  <meta name="description" content="List device name of the battery: upower -e, I got the name is &ldquo;/org/freedesktop/UPower/devices/battery_BAT0&rdquo;;
Print the status of the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leetschau.github.io/posts/18">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
    <h2>A note repository aims at Data Mining, Spark, Linux, Python.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:leetschau.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/04/104147/">Check Battery Status From Terminal in Linux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-04T10:41:47+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:41 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
<li><p>List device name of the battery: <code>upower -e</code>, I got the name is &ldquo;/org/freedesktop/UPower/devices/battery_BAT0&rdquo;;</p></li>
<li><p>Print the status of the battery: <code>upower -i /org/freedesktop/UPower/devices/battery_BAT0</code>;</p></li>
<li><p>Only print the charge persent of the battery: <code>upower -i /org/freedesktop/UPower/devices/battery_BAT0|awk '/^\s*percentage:/ {print $2}'</code></p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/29/144719/">Use X-tile Manage Windows on Linux Desktop Environment</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-29T14:47:19+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>2:47 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Install</h1>

<ol>
<li><p>Download deb package &ldquo;x-tile_2.5-1_all.deb&rdquo; from <a href="http://www.giuspen.com/x-tile/">x-tile website</a>;</p></li>
<li><p><code>sudo dpkg -i x-tile_2.5-1_all.deb</code>;</p></li>
</ol>


<p>Verify: <code>x-tile -h</code> with user who has loged into the desktop environment. User root has no desktop environment, so if you run x-tile as root, you get a &ldquo;Client failed to connect to the D-BUS daemon&rdquo; error.</p>

<h1>Usage</h1>

<p>Use the following command in terminal or input box of the collapsed xfce4-appfinder(Alt-F2):</p>

<p><code>x-tile g 2 3</code>: tile all opened window with 2 rows and 3 columns;</p>

<p><code>x-tile g</code> == <code>x-tile g 0 0</code>: tile all opened window with automatic rows and columns;</p>

<p><code>x-tile y</code>: cycle the order of last tiling operation;</p>

<p><code>x-tile m</code>: maximize all opened window;</p>

<p><code>x-tile M</code>: unmaximize all opened window;</p>

<p><code>x-tile h</code>: tile all opened window horizontally;</p>

<p><code>x-tile v</code>: tile all opened window vertically;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/29/115513/">A Good Tutorial About C++ Syntax and Points</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-29T11:55:13+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:55 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The whole tutorial <a href="http://www.cplusplus.com/doc/tutorial/">C++ Language</a> is concise and helpful. The section <a href="http://www.cplusplus.com/doc/tutorial/pointers/">Pointers</a> is a good introduction of pointers. It distinguishes many myth of pointers, for example:</p>

<ul>
<li><p>It distinguishes &ldquo;pointer declaration&rdquo; of &ldquo;dereference operation&rdquo;. They use both the same operator &ldquo;*&rdquo;, but are different things.</p></li>
<li><p>Pointer and array are largely the same, but an import difference: pointer can be reassigned, while array variable can&rsquo;t.</p></li>
<li><p>Incrementation of a pointer produce different result regarding to the data type it referenced. Say a pointer p has the address 1000, according to its referenced type, the incrementation results are:</p>

<p>  char * p; p = 1000; p++ is 1001;
  short * p; p = 1000; p++ is 1002;
  long * p; p = 1000; p++ is 1004;</p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/28/162120/">Mechanical Keyboard</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-28T16:21:20+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>4:21 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Compared with regular membrane keyboard, mechanical keyboard are more suitable for power PC users, like coders and game players.</p>

<p>Brand:</p>

<ul>
<li><p>Cherry</p></li>
<li><p>Keycool</p></li>
<li><p>Filco</p></li>
</ul>


<p>Ref:</p>

<ul>
<li><p><a href="http://www.pcworld.com/article/240939/mechanical_keyboards_should_you_switch_.html">Mechanical Keyboards: Should You Switch?</a></p></li>
<li><p><a href="http://www.pcworld.com/article/242037/mechanical_keyboard_faq_pick_the_right_switch.html">Mechanical Keyboard FAQ: Pick the Right Switch</a></p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/28/105855/">Python Console Debugger</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-28T10:58:55+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:58 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Create a python file and debug it in gdb style with pdb:</p>

<pre><code>$ pdb testpdb.py
&gt; /home/chad/docs/tmp/testpdb.py(1)&lt;module&gt;()
-&gt; aa = 3
(Pdb) help
...
(Pdb) help l
...
(Pdb) l
  1  -&gt; aa = 3
  2     bb = 4
  3     cc = aa + bb
  4     print(cc)
[EOF]
(Pdb) w
  /usr/lib/python2.7/bdb.py(400)run()
-&gt; exec cmd in globals, locals
  &lt;string&gt;(1)&lt;module&gt;()
&gt; /home/chad/docs/tmp/testpdb.py(1)&lt;module&gt;()
-&gt; aa = 3
(Pdb) n
&gt; /home/chad/docs/tmp/testpdb.py(2)&lt;module&gt;()
-&gt; bb = 4
(Pdb) b 4
Breakpoint 1 at /home/chad/docs/tmp/testpdb.py:4
(Pdb) c
&gt; /home/chad/docs/tmp/testpdb.py(4)&lt;module&gt;()
-&gt; print(cc)
(Pdb) w
  /usr/lib/python2.7/bdb.py(400)run()
-&gt; exec cmd in globals, locals
  &lt;string&gt;(1)&lt;module&gt;()
&gt; /home/chad/docs/tmp/testpdb.py(4)&lt;module&gt;()
-&gt; print(cc)
(Pdb) p bb
4
(Pdb) c
7
The program finished and will be restarted
&gt; /home/chad/docs/tmp/testpdb.py(1)&lt;module&gt;()
-&gt; aa = 3
(Pdb) q
</code></pre>

<p>The command is exactly the same with gdb.</p>

<p>On some OS like ArchLinux, there isn&rsquo;t &ldquo;pdb&rdquo; command, so you have to find the location of &ldquo;pdb.py&rdquo;, then define an alias in ~/.zshrc:</p>

<pre><code>$ locate pdb.py
...
/usr/lib/python3.4/pdb.py
...
$ echo 'alias pdb="/usr/lib/python3.4/pdb.py"' &gt;&gt; ~/.zshrc
</code></pre>

<p>Now you can use &ldquo;pdb <script_file_name>&rdquo; as in Mint.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/28/084746/">Modify SSH Welcome Message of Linux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-28T08:47:46+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:47 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The ssh welcome message of a Linux OS is stored in file /etc/motd. So modify it for customization.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/28/082704/">Reminder Application on Linux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-28T08:27:04+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:27 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Alarm Clock</h1>

<ol>
<li><p>sudo apt-get install alarm-clock</p></li>
<li><p>Alt-F2: alarmclock, or <code>alarmclock &amp;</code> from command line;</p></li>
</ol>


<p>Of course Thunderbird is a solution, but is a heavy one.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/27/193340/">Install Raspberry Pi</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-27T19:33:40+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>7:33 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
<li><p>Format the SD card with &ldquo;FAT&#8217; format;</p></li>
<li><p>Download Noob.zip from raspi&rsquo;s website, unzip all files to the SD card, no need to &ldquo;dd&rdquo; or something else;</p></li>
<li><p>Insert SD card, power line, keyboard, mouse and HDMI cable to TV;</p></li>
<li><p>Open TV, switch to &ldquo;AIR-LINE&rdquo; mode, then it will be the Screen;</p></li>
<li><p>Check the OS you want to install, Respbian in my case, and it will install it on the SD card;</p></li>
<li><p>After the installation, the raspi-config interface appears, it&rsquo;s a TUI, use keyboard finish some settings, such as modify user password;</p></li>
<li><p>After reboot, login with username &ldquo;pi&rdquo; and password &ldquo;raspberry&rdquo; if you didn&rsquo;t modify it at the previous step;</p></li>
<li><p>Now you can start GUI with &ldquo;startx&rdquo;, the default desktop environment is LXDE; The ssh server is installed by default;</p></li>
</ol>


<p>That&rsquo;s it.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/23/171938/">Debug Binary File Reading C++ Codes With Gdb</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-23T17:19:38+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>5:19 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We need debug a C++ file, which read and analyze a binary file. We use gdb and xxd in this case. In tmux, split a window horizontally, run gdb in the upper bigger pane, and list file content in lower smaller pane.</p>

<pre><code>$ tmux new -s basic
A-f,-   // split window, I define &lt;prefix&gt; of tmux as A-f in ~/.tmux.conf: set -g prefix M-f
A-f,JJ  // make upper pane larger
$ xxd -l 33 &lt;input-binary-file&gt;.dat   // print first 32 bytes of this file
0000000: 202a 463b 862e d108 2100 ab55 8006 f407   *F;....!..U....
0000010: 0000 0000 0a0e 0401 0102 1800 5201 0501  ............R...
0000020: 15
A-f,k   // jump to upper window
$ cat readfile.cc
#include &lt;fstream&gt;
#include &lt;iterator&gt;
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
using namespace std;

typedef unsigned char BYTE;

BYTE *read_section(FILE *istream, int *length);

int main() {
    string filename = "/home/chad/docs/eclipsews/MrParser/doc/ns-output/1296_2014_04_25_10_00_MR.dat";
    char *fn = const_cast&lt;char*&gt;(filename.c_str());
    FILE *rstream = fopen(fn, "rb"); // 打开.dat文件
    BYTE *buffer = NULL;
    int length = 0;
    buffer = read_section(rstream, &amp;length);
    fclose(rstream);
    printf("Read file length: %d\n", length);
    return 0;
}

BYTE *read_section(FILE *istream, int *length) {
    int count = 0;
    size_t ret = 0;
    BYTE buf[128];
    BYTE *buffer = NULL;

    ret = fread(buf, sizeof(char), 8, istream); if (8 != ret) return NULL;
    ret = fread(buf, sizeof(char), 2, istream); if (2 != ret) return NULL;
    *length = buf[1] * 256 + buf[0];
    if ( 0 == *length) return NULL;
    buffer = new BYTE[*length];
    fseek(istream, -10, SEEK_CUR);
    ret = fread(buffer, sizeof(char), *length, istream);
    if (*length != ret) {
        delete [] buffer;
        return NULL;
    }
    return buffer;
}
$ g++ -g readfile.cc -o rr
$ gdb rr
l
// list source code, we want to probe the content of variable "buffer" after the "fread" operation. So we add a breakpoint after that line
b 37
r
(gdb) p/x *buffer@33
$1 = {0x20, 0x2a, 0x46, 0x3b, 0x86, 0x2e, 0xd1, 0x8, 0x21, 0x0, 0xab, 0x55, 0x80, 0x6, 0xf4, 0x7, 0x0, 0x0, 0x0, 0x0, 0xa, 0xe, 0x4, 0x1, 0x1,
  0x2, 0x18, 0x0, 0x52, 0x1, 0x5, 0x1, 0x15}
p/x buffer[0]
$2 = 0x20
c
q
</code></pre>

<p>where l=list, r=run, p/x means &ldquo;print value in hex format&rdquo;, c=continue, q=quit.
You can see the bytes of &ldquo;buffer&rdquo; is exactly the same with the output of xxd command: 0x20, 0x2a, &hellip;, 0x15.</p>

<p>The format of gdb&rsquo;s print see <a href="http://www.delorie.com/gnu/docs/gdb/gdb_55.html">8.4 Output formats</a> for details.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/23/094625/">Develop With Tmux in Linux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-23T09:46:25+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>9:46 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>tmux is a terminal multiplexer. Its 3-level architecture &ldquo;session-window-pane&rdquo; is very flexible and powerful. Sessions are independent. Windows are different &ldquo;tabs&rdquo; in a session. And panes are different parts in a window. The multiplexer means if different hosts <strong>attach</strong> to the same session, they share the same screen, the same input and output, which like they sit together, use the same computer, so making pair-programming a breeze.</p>

<p>You can detach from a session while it&rsquo;s still kept by tmux server in background. This is very useful on servers. You use laptop attaching to a tmux server running a server machine, work for a while, then detach from this server, shutdown your laptop. Next time when you attach to it, all the works are kept from last detach, as if you didn&rsquo;t leave them.</p>

<p>You can move window between sessions, which is convinient for collaboration. For example, Bob works on session &ldquo;bob&rdquo; and Tom works on &ldquo;tom&rdquo;, Bob write some codes and want Tom to complete it. Then he can move his window to Tom&rsquo;s session. If he want pair-programming with Tom, he can tell Tom to detach from his own session &ldquo;tom&rdquo; and attach to &ldquo;bob&rdquo;. When finished, Tom detach from &ldquo;bob&rdquo; and attach to &ldquo;tom&rdquo; to continue his work.</p>

<p>Ref: &ldquo;tmux - Productive Mouse-Free Development&rdquo; by Brian P. Hogan.</p>

<h1>Install</h1>

<p>With internet connected, install tmux with <code>sudo yum install tmux</code> or <code>sudo apt-get install tmux</code>.
Without internet connection, download <a href="http://pkgs.repoforge.org/tmux/tmux-1.6-1.el6.rf.x86_64.rpm">tmux package</a> on <a href="http://repoforge.org/">RepoForge</a>,
then install it with <code>sudo rpm -ivh tmux-1.6-1.el6.rf.x86_64.rpm</code>.</p>

<h1>Getting help</h1>

<h2>List all binding keys</h2>

<pre><code>tmux list-keys
</code></pre>

<p>so if you know a shortcut, say [prefix]!, and want know the corresponding command, you can run</p>

<pre><code>tmux list-keys|grep !
</code></pre>

<p>then you get</p>

<pre><code>bind-key          ! break-pane 
</code></pre>

<p>So the corresponding command is &ldquo;break-pane&rdquo;.</p>

<h2>List all commands</h2>

<pre><code>tmux list-commands
</code></pre>

<h1>Define tmux startup shortcuts in Xfce, Mint</h1>

<p>Application Finder(Alt-F3) -> Keyboard -> Application shortcuts: Add
    Command: exo-open &ndash;launch TerminalEmulator xfce4-terminal &ndash;fullscreen -x tmux new -s basic
    Shortcut: Alt-[</p>

<h1>My configuration file</h1>

<pre><code>$ cat ~/.tmux.conf
# Set the default terminal mode to 256color mode
set -g default-terminal "screen-256color"

# fix the window name
set-option -g allow-rename off

# Setting the prefix from C-b to Alt-q, Alt-f is conflict with i3wm shortcuts
set -g prefix M-q

# Free the original Ctrl-b prefix keybinding
unbind C-b

# quick window switching, -n means no need to use prefix
bind -n M-a select-window -t :+

# enable vi keys.
setw -g mode-keys vi

# Set the base index for windows to 1 instead of 0
set -g base-index 1

# Set the base index for panes to 1 instead of 0
setw -g pane-base-index 1

# setting the delay between prefix and command
set -sg escape-time 1
#set -sg repeat-time 1000

# Reload the file with Prefix r
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# Split window
bind | split-window -h
bind - split-window -v

# moving between panes
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Pane resizing, -r means you can repeat this key bindings
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Copy mode
unbind [
bind j copy-mode
bind p paste-buffer
bind -t vi-copy 'v' begin-selection
bind -t vi-copy 'y' copy-selection

# Update the status bar every sixty seconds
set -g status-interval 60

# set the status line's colors
set -g status-fg white
set -g status-bg black

# Status line left side
set -g status-left-length 40
set -g status-left "#[fg=green]session: #S #[fg=yellow]#I #[fg=cyan]#P"
set -g status-utf8 on

# enable activity alerts
setw -g monitor-activity on
set -g visual-activity on

# Center the window list
set -g status-justify centre

# set the color of the window list
setw -g window-status-fg cyan
setw -g window-status-bg default
setw -g window-status-attr dim

# set colors for the active window tag in window list
setw -g window-status-current-fg white
setw -g window-status-current-bg blue
setw -g window-status-current-attr bright

# Status line right side
set -g status-right "%R #[fg=black bg=white]%F#[fg=white bg=black] #(/home/chad/apps/getBatteryStuatus)"
# setw -g status-right-attr bright

# Command / message line
set -g message-fg white
set -g message-bg black
set -g message-attr bright

# Execute a command in a new window
bind C command-prompt "new-window -n %1 '%1'"
bind S command-prompt "new-window -n %1 'ssh %1'"
</code></pre>

<p>The last line shows that you can use parameters in key bindings. When you press prefix S, tmux propmt you to input a parameter, I input &ldquo;47&rdquo; and press <Enter>, it will open a new window named &ldquo;47&rdquo;, and run command &ldquo;ssh 47&rdquo;.</p>

<p>If your .tmux.conf doesn&rsquo;t take effect, run the following command to load config file explicitly (or find errors in file):</p>

<pre><code>tmux new
tmux source-file ~/.tmux.conf
</code></pre>

<p>The format strings in status line are interpreted as the followings:</p>

<ul>
<li><p>%X: date-time sign, such as %R is time, %F is date, etc. See full list in &ldquo;FORMAT controls the output&rdquo; section in <code>man date</code>;</p></li>
<li><h1>&hellip;: maybe the output of a shell command, or color of foreground/background, or an attribute. See full list in &ldquo;status-left&rdquo; of <code>man tmux</code>. These meta-data can be used both in status-left and status-right;</h1></li>
</ul>


<h1>Frequently used shortcuts</h1>

<p>According to the defualt shortcuts and above modifications:</p>

<ul>
<li><p>List existing sessions: tmux ls</p></li>
<li><p>Attach to a session: tmux attach -t <session-name>, if there&rsquo;s only one window, you can use <code>tmux a</code> for short;</p></li>
<li><p>Switch to next window: A-a (the default shortcut is &ldquo;prefix n&rdquo; )</p></li>
<li><p>Detach from a session: prefix, d</p></li>
<li><p>Jump to previous/next session: prefix, (/)</p></li>
<li><p>Create new window: prefix, c</p></li>
<li><p>Rename current window: prefix, <comma></p></li>
<li><p>Jump to a window according to it&rsquo;s number: prefix, <num> (see tmux&rsquo;s status line to get its number)</p></li>
<li><p>Split current window horizontally/vertically: prefix, -/|</p></li>
<li><p>Jump to another pane(sub-window): prefix, h/j/k/l</p></li>
<li><p>Jump to next pane: prefix, o</p></li>
<li><p>Move a pane to another window, so maximum it: prefix !</p></li>
<li><p>Move window to another session: prefix .(period)</p></li>
</ul>


<h1>Window-Pane Management</h1>

<p>You can run <code>tmux ...</code> directly within tmux-managed sessions and windows, no need to detach from tmux environment beforehand. The only exception is <code>tmux attach</code>, which will produce a recursive attached tmux session, and messed up things.
All command of tmux has auto-completion, so it&rsquo;s very convenient to run tmux command within tmux window.
The equivalent way of running tmux command without command-line(such as in vi) is using shortcut &ldquo;prefix :&rdquo;.</p>

<h2>Turning a window into a pane</h2>

<ul>
<li><p>In the destination window: <code>tmux join-pane -s [source-window-number]</code>;</p></li>
<li><p>In the source window: <code>tmux join-pane -t [destination-window-number]</code>;</p></li>
<li><p>Specify source and destination windows both: <code>tmux join-pane -s [src-window-number] -t [dst-window-number]</code>;</p></li>
</ul>


<h2>Turning a pane into a window</h2>

<p>Use shortcuts &ldquo;prefix, !&rdquo; in the pane.</p>

<h2>Keep the window name fixed</h2>

<p>Add &ldquo;set-option -g allow-rename off&rdquo; into ~/.tmux.conf.</p>

<h2>Kill zombie window</h2>

<p><code>tmux kill-window -t [n]</code>, where [n] is the window number.</p>

<h1>Clipboard Management</h1>

<h2>Select/copy/paste text with shortcuts</h2>

<ol>
<li><p>Open copy mode: prefix, [</p></li>
<li><p>Move cursor: h/j/k/l;</p></li>
<li><p>Begin select: v</p></li>
<li><p>End select and copy to clipboard: y
or quit copy mode with <Enter>;</p></li>
<li><p>Paste text: prefix, p</p></li>
</ol>


<h2>Path share between windows</h2>

<p>I want to copy all files in window #1 to directory in window #2. The workflow is:</p>

<pre><code>prefix 2
tmux setb $PWD
prefix 1
cp * [prefix p]/
</code></pre>

<p>The trick is using <code>tmux setb</code> to copy working directory to buffer of tmux, then use [prefix p] to paste the path into the copy command. Don&rsquo;t forget the trailing slash at the end of cp command, it&rsquo;s necessary.</p>

<p>If parcellite is installed, there is a little simpler way to achieve this:</p>

<pre><code>prefix 2
pwd|parcellite
prefix 1
cp * [Ctrl-Alt-v]/
</code></pre>

<p>You can use <code>ls -l|parcellite</code> to add command output to parcellite buffer.</p>

<h2>Multiple Buffers Copy &amp; Paste</h2>

<p>tmux maintains a stack of copied buffers. So you can copy multiple times, and paste selected buffers in arbitrary order, with the help of following commands: list-buffer, show-buffer, choose-buffer, save-buffer.</p>

<p>Copy all the texts in the current pane with &ldquo;capture-pane&rdquo;(not including scrolled out texts).</p>

<h1>Customize status bar</h1>

<h2>Add battery status in tmux status bar</h2>

<p>Add the following line into ~/.tmux.conf:</p>

<pre><code>set -g status-right "%R #[fg=black bg=white]%Y %b %d#[fg=white bg=black] #(/home/chad/apps/getBatteryStuatus)"
</code></pre>

<p>And create a shell script named &ldquo;getBatteryStuatus&rdquo; under /home/chad/apps:</p>

<pre><code>upower -i /org/freedesktop/UPower/devices/battery_BAT0|awk '/^\s*percentage:/ {print $2}'
</code></pre>

<h1>Enable Mouse Scrolling</h1>

<p>Add &ldquo;set -g mode-mouse on&rdquo; into ~/.tmux.conf</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/19">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/17">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/03/30/181242/">Convert MS Word File to PDF Files</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/30/175224/">Scrapy Notes</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/27/173224/">优化网站加载速度的方法</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/26/203002/">Deploy Meteor Application Manually</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/25/195307/">Deploy Meteor App With MUP</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
