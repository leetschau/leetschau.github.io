
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
  <meta name="description" content="高华的大作：《红太阳是怎样升起的：延安整风运动的来龙去脉》原始文本是从 PDF 文件导出的 TXT 文件，需要改为手机上阅读比较方便的格式，下面是修改过程。 提取处理文本 从全文（见附件）中提取一节，篇幅不宜超过十页，否则处理它用的时间太长，例如第一章第一节“一、「农民党」、「军党」和毛泽东的「 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leetschau.github.io/posts/106">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
    <h2>A note repository aims at Data Mining, Spark, Linux, Python.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:leetschau.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/16/144025/">用VIM修改《红太阳是怎样升起的》</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-07-16T14:40:25+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>2:40 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>高华的大作：《红太阳是怎样升起的：延安整风运动的来龙去脉》原始文本是从 PDF  文件导出的 TXT  文件，需要改为手机上阅读比较方便的格式，下面是修改过程。<br/>
 提取处理文本
 从全文（见附件）中提取一节，篇幅不宜超过十页，否则处理它用的时间太长，例如第一章第一节“一、「农民党」、「军党」和毛泽东的「书记独裁」问题”。拷贝到 VIM  中。
 删除脚注
 删除每页下面的脚注，找到行首的“①”后手工删除相关段落，用 /^  ①查找目标；
 删除页码
 目标文本：
 人闻名于中共，其活动基本上也是围绕军事武装……
           10
 &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; Page 11&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;
 的一个侧面。中共中央认为毛的理论观点仍……
 步骤 1  ：寻找前面至少 38  个空格，后面是数字的行删除之： :g/^\s{38,}\d*/d
 步骤 2  ：寻找 23  个连字符后面一个空格接 Page  的行删除之： :g/^-{23}\sPage/d
 标出标题
 手工寻找标题所在行，在标题头插入 <P>  ，用宏可提高效率；
 qa  （大写 i  插入行首） <P>  （ ESC  ），以后找到标题行后 @a  即可；
 标出段落
 前面有 4  个空格的行，将 4  个空格替换为 <P>  ： :%s/^\s{4}/<P>/g
 合并行
 将所有文本合为一行： nJ  ，命令中 n  是总行数 -1
 清除所有空格
 :%s/\s+//g
 将段落标志 <P>  替换为回车
 :%s/<P>/\r/g</p>

<p> 至此文本的处理就完毕了，用博文“第一行为文件名保存的文件的实现方法（ VIM 版）”中介绍的方法定义一个快捷键，将处理好的文本存为一个单独的文件，用 notepad++ 转为 UTF-8 格式（带 BOM ）后放入手机中。</p>

<p> 附：处理脚本1
 &ldquo;标出脚注，在脚注文本前面加<P>
%s/^[①②③④⑤⑥⑦⑧⑨]\s\S+/<P>&amp;/g
&#8220;删除页码
g/^\s{10,}\d<em>\s</em>/d
&#8220;将页开始行替换为<P>
%s/^-{23}\sPage.<em>$/<P>/g
&#8220;标出各种标题，在标题文本前面加<P>
%s/^\s</em>第.{1,2}章/<P>&amp;、/g
%s/^\s<em>[一二三四五六七八九十]\s/<P>&amp;，/g
%s/^\s</em>[一二三四五六七八九十]、/<P>&amp;/g
%s/^\s<em>\d、/<P>&amp;/g
&#8220;标出段落
%s/^\s{4}/<P>/g
&#8220;将所有文本合为一行
1,$j!
&#8220;清除所有空格
%s/\s+//g
&#8220;将段落标志替换为回车
%s/<P>/\r/g
 处理脚本2（脚本1在手机上看效果欠佳，且脚本运行需要比较长的时间）
 &#8220;delete all blank lines
g/^\s</em>$/d
&#8220;标出脚注，在脚注文本前面加空行
%s/^[①②③④⑤⑥⑦⑧⑨]\s\S+/\r&amp;/g
&#8220;删除页码
g/^\s{10,}\d<em>\s</em>/d
&#8220;将页开始行替换为空行
%s/^-{23}\sPage.<em>$/\r/g
&#8220;标出各种标题，在标题文本前面加空行
%s/^\s</em>第.{1,2}章/\r\r&amp;、/g
%s/^\s<em>[一二三四五六七八九十]\s/\r&amp;，/g
%s/^\s</em>[一二三四五六七八九十]、/\r&amp;/g
%s/^\s*\d、/\r&amp;/g
&#8220;标出段落
%s/^\s{4}/\r/g
 将以上内容保存到F:\toMobile.txt中，用:so f:\toMobile.txt运行之。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/16/142741/">VIM正则表达式的懒惰模式</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-07-16T14:27:41+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>2:27 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>例如有如下一段话：
Another whale sighting occurred on <January 26>, <2004>. <B>AK</B> and <B>HI</B>
要匹配每一个&lt;&hellip;>，如果用&lt;.<em>>匹配，则匹配到的目标是<January 26>, <2004>，也就是尽量大的匹配范围，要将匹配模式改为尽量小（即懒惰模式），需要用{-}代替</em>，即写成&lt;.{-}>，就可以达到目标了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/15/141959/">远程连接Unix服务器的方法</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-07-15T14:19:59+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>2:19 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在 SecureCRT 中“快速连接”下：【协议】： SSH2 ，【主机名】： 10.0.2.47 ，【端口】： 22 ，【防火墙】：无，【用户名】： boco ，密码： bocogodu ；
 服务器上常用的 Unix 命令
 uname –a ：显示当前操作系统信息；
 ls ：显示当前路径下文件；
 pwd ：显示当前路径；
 ps –ef|grep godu ：搜索所有包含 godu 的活动进程；
 clear ：清空屏幕；
 kill：终止进程；</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/10/142701/">运行VIM脚本的方法</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-07-10T14:27:01+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>2:27 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>1 将VIM脚本写在一个文本文件中，扩展名任意，一般就用txt，例如保存在f盘根目录下：f:\ex.txt；
2 在VIM中用:so（:source的简写）命令运行之：:so f:\ex.txt。
 脚本文件中的注释以英文的双引号（&#8221;）起始。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/06/141019/">VIM文本格式转换一例</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-07-06T14:10:19+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>2:10 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>原文本：
 public static final int GODU_CMD_PORT = 1234;
 public static final int GODU_MONITOR_PORT = 5678;
 public static final int GODU_SUBSCRIBE_PORT = 6789;
 public static final String LOGIN = &ldquo;login:&rdquo;;
 public static final String LOGIN_PASSWORD = &ldquo;password:&rdquo;;
 public static final String GODU_PROMPT = &ldquo;[GODU-CMD]&rdquo;;
 public static final String GODU_OPT_START = &ldquo;BOCOGODUACKSTART&rdquo;;
 public static final String GODU_OPT_END = &ldquo;BOCOGODUACKEND&rdquo;;
 public static final String NE_OPT_START = &ldquo;BOCOGODUCMDSTART&rdquo;;
 public static final String NE_OPT_END = &ldquo;BOCOGODUCMDEND&rdquo;;
目标文本：
 godu.cmd.port = 1234
 godu.monitor.port = 5678
 godu.subscribe.port = 6789
 login = login:
 login.password = password:
 godu.prompt = [GODU-CMD]
 godu.opt.start = BOCOGODUACKSTART
 godu.opt.end = BOCOGODUACKEND
 ne.opt.start = BOCOGODUCMDSTART
 ne.opt.end = BOCOGODUCMDEND
操作过程：
1. 删除前导空格：:%s/^\s*//g
1. 删除每行的前4个单词，将第5个单词转化为小写（使用宏）： qad4wguwjq 9@a
1. 将下划线改为点号：:%s/_/./g
1. 删除行尾分号：:%s/;$//g
1. 删除双引号：:%s/”//g</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/29/140011/">为VIM添加Python扩展</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-06-29T14:00:11+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>2:00 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>VIM的自带的脚本功能很强，但只能用在VIM自己上，如果让它支持Python脚本，那简直就无敌了，这个想法当然不是我想出来的，应该说英雄所见略同，于是乎vim7.2就内建了对python2.4的支持，这么有前途的功能当然得尝尝鲜啦，下面就是实现过程：
 1 检查vim是否支持python；用:version命令，找其中的“python/dyn”一项，如果前面是加号，表示支持，如果是减号，就另找一个支持的吧
2 拷贝python24.dll文件到system32目录下；
3 测试代码：:py import sys
   :py print sys.version
4 如果能够输出python的版本信息则说明可以使用python扩展了。
 第二步里用到的dll文件可以到 <a href="http://www.dll-files.com">http://www.dll-files.com</a> 下载，压缩包只有800多K，实在不愧小强的称号！我在winXP平台上拷贝完dll文件后无需重启windows就可以使用。
 VIM脚本中使用Python代码的详细方法参加VIM中的对:python命令的说明（:h :py）。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/27/135846/">第一行为文件名保存的文件的实现方法（VIM版）</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-06-27T13:58:46+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>1:58 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>问题描述
 例如文档1的内容是：
this is doc A
the following is contents
&hellip;
要保存为“this is doc A.txt”；
文档2的内容是：
that is B
some words more
&hellip;
要保存为“that is B.txt”。
文档的数量很多，无法对每一文档手工保存，希望有一款文本编辑器能用脚本（或者宏之类的）实现该功能。
 解决方案
 在_vimrc文件中加上如下内容：
 function Blog_Save()
 &ldquo; 删除空行，包括全是空格的行
 g/^\s*$/d
 &rdquo; 将文件第一行内容保存在变量line中
 let line = getline(1)
 &ldquo; 去掉其中的非法字符，如\等
 let line = substitute(line, &lsquo;[:/\]&rsquo;, &lsquo;-&rsquo;, &lsquo;g&rsquo;)
 let line = substitute(line, &lsquo;^\s+&rsquo;, &lsquo;&rsquo;, &lsquo;g&rsquo;)
 let line = substitute(line, &lsquo;\s+$&rsquo;, &lsquo;&rsquo;, &lsquo;g&rsquo;)
 let line = substitute(line, &lsquo; &rsquo;, &lsquo;\ &rsquo;, &lsquo;g&rsquo;)
 let line = substitute(line, &lsquo;\r&rsquo;, &lsquo;&rsquo;, &lsquo;g&rsquo;)
 &rdquo; 执行保存文件命令，其中点号是连接符，类似于PHP中的用法
 exe &lsquo;sav &rsquo;.line.&lsquo;.txt&rsquo;
endfunction
&ldquo; 定义一个【用户自定义命令】
command BlogSav call Blog_Save()
&rdquo; 键映射
:map <F5> <ESC>:BlogSav<CR>
 这段代码整体分为3部分：第一部分定义了一个函数，第二部分为这个函数定义了一个【用户自定义命令】，以便于在VIM的普通模式下用:+command的方法使用，第3部分是一个键映射，将按<ESC>、输入:BlogSav、按回车键这一系列动作映射到F5键上，这样只要按一下F5键，就实现了【问题描述】一节中设想的功能。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/25/135711/">VIM命令格式说明</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-06-25T13:57:11+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>1:57 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><dl>
<dt>VIM 的命令格式由 4 部分组成： </dt>
<dt> [ 操作次数 ] 动作名称 [ 目标的数量 ] 目标名称 </dt>
<dt> 其中操作次数和目标的数量两项如不指明，则视为 1 。 </dt>
<dt> 原文来自网络，其中“ Vi Syntax ”一节写的尤其好，对什么是动作、什么是目标解释的非常清楚。 </dt>
<dt> The vi is a text editor. It is small, powerful, and standard on most UNIX systems. The vi often frustrates new users with a unique distinction between its two modes: Command Mode and Insert/Overtype Mode. This distinction, although difficult to become accustomed to for many users, provides great power and ability to the editor. Insert/Overtype Mode is designed for inserting text only. All text manipulations and cursor moving should be done from with in Command Mode. </dt>
<dt> Entering the vi </dt>
<dt> prompt$ vi </dt>
<dt> prompt$ vi file1 file2 … </dt>
<dt> prompt$ vi -r file #Recover file from crash </dt>
<dt> prompt$ vi +string file #Execute ex command “ string ” </dt>
<dt> prompt$ vi @rcfile #Read commands from rcfile </dt>
<dt>  Insert/Overtype Mode </dt>
<dt> Insert/Overtype Mode is solely for entering text. To leave one of these two modes press the [ESC] key. if you wish to enter the ESC character or any other control character while in insert mode: type [CONTROL]-V and then the control sequence. The only difference between Insert Mode and Overtype Mode is that characters are placed in front of the text after the cursor in Insert Mode, where as existing characters are overwritten in Overtype Mode. </dt>
<dt> Command Mode </dt>
<dt> Entering Insert Mode: </dt>
<dt> a — append text, after the cursor </dt>
<dt> i — insert text, before the cursor </dt>
<dt> R — enter Overtype Mode </dt>
<dt> A — append text, after end of line </dt>
<dt> I — insert text, before first non-whitespace character </dt>
<dt> o — open new line below cursor in Insert Mode </dt>
<dt> O — open new line above cursor in Insert Mode </dt>
<dt> vi Syntax </dt>
<dt> vi commands follow the general form: </dt>
<dt> n operator m object </dt>
<dt> which means: </dt>
<dt> execute operator n times on m objects. If n and/or m are omitted, they default to 1. </dt>
<dt> Operators which take objects are(if the operator is pressed twice then the object is the current line) </dt>
<dt> c — Change </dt>
<dt> d — Deletion </dt>
<dt> “ cy — Yank, if “ c is omitted, uses general buffer. </dt>
<dt> &lt; — shift lines left by shiftwidth variable </dt>
<dt> > — shift lines right by shiftwidth variable </dt>
<dt> !cmd — filter trough cmd </dt>
<dt> #The operators &lt; , >, and ! are line based so the set of objects is diminished greatly. </dt>
<dt> Operators which do not take objects : </dt>
<dt> s — Substitute </dt>
<dt> x — Delete character </dt>
<dt> r — Replace character </dt>
<dt> ~ — change case of character </dt>
<dt> Objects (if given with out an operator are interpreted as a cursor motion command): </dt>
<dt> w — forward until beginning of word </dt>
<dt> e — forward until end of word </dt>
<dt> b — backward until beginning of word </dt>
<dt> $ — forward until end of line </dt>
<dt> ^ — backward until first non-whitespace character </dt>
<dt> 0 — backward until first column of line </dt>
<dt> nG — line number n </dt>
<dt> n| — column n of current line </dt>
<dt> /pat — forward until beginning of pat, search </dt>
<dt> ?pat — backward until beginning of pat, backward search </dt>
<dt> n — repeat last search </dt>
<dt> N — repeat last search/backward search, but in opposite direction </dt>
<dt> % — until match of parenthesis, brace, or bracket </dt>
<dt> tc — until next appearance of c on current line </dt>
<dt> Tc — backward until next appearance of c on current line </dt>
<dt> fc — until and including next appearance of c on current line </dt>
<dt> Fc — backward until and including next appearance of c on current line </dt>
<dt> ; — repeat last f, F, t, or T </dt>
<dt> , — repeat last f, F, t, or T in reverse </dt>
<dt> } — forward until end of paragraph </dt>
<dt> { — backward until end of paragraph </dt>
<dt> ) — forward until end of sentence </dt>
<dt> ( — backward until end of sentence </dt>
<dt> ]] — forward until end of section </dt>
<dt> [[ — backward until end of section </dt>
<dt> nH — n lines before first line on screen; n defaults to 0 </dt>
<dt> nL — n lines before last line on screen; n defaults to 0 </dt>
<dt> M — the middle line of the screen </dt>
<dt> j — down one line </dt>
<dt> k — up one line </dt>
<dt> h — left one character </dt>
<dt> l — right one character </dt>
<dt> [BS] — left one character, backspace usually equals H </dt>
<dt> [SPACE] — right one character </dt>
<dt> _ — the entire current line </dt>
<dt> - — until first non-whitespace character on previous line </dt>
<dt> + — until first non-whitespace character on next line </dt>
<dt> [RETURN] — until first non-whitespace character on next line </dt>
<dt> Miscellaneous </dt>
<dt> u — undo last change </dt>
<dt> U — undo entire line </dt>
<dt> “ cp — put “ c or general buffer after the cursor </dt>
<dt> “ cP — put “ c or general buffer before the cursor </dt>
<dt> mc — set mark with character c </dt>
<dt> `c — goto mark c </dt>
<dt> ‘ c — goto beginning of line with mark c </dt>
<dt> &#8220; — return to position before mark jump or search </dt>
<dt> ’’— return to beginning of line before mark jump or search </dt>
<dt> J — join two lines </dt>
<dt> D — delete rest of line </dt>
<dt> C — change rest of line </dt>
<dt> Y — yank current line into general buffer </dt>
<dt> &amp; — execute last ex-style substitution </dt>
<dt> . — execute last modification </dt>
<dt> ! object command — send object as stdin to command and replace with stdout </dt>
<dt> [Ctrl]G - print information about file </dt>
<dd>map x y — when character x is pressed, execute y</dd>
<dd>map! x y — map input mode character x to string y</dd>
<dd>ab x y — x is an abbreviation for y, changes are made on the fly</dd>
<dd>su — Suspend the current editor session</dd>
<dd>sh — run a shell</dd>
<dt> ex Commands </dt>
<dt> ex syntax </dt>
<dt> ex commands in the vi follow this general form: </dt>
<dd>address command</dd>
<dt> which means: </dt>
<dt> Execute command on specific lines obtained from the address part of the general form. If address is omitted, current line is used. Keep in mind that the ex is a line based editor, so all actions are line based. </dt>
<dt> addresses: </dt>
<dt> % — all lines in file </dt>
<dt> x,y — lines x to y </dt>
<dt> . — current line </dt>
<dt> n — line number: n </dt>
<dt> $ — last line of file </dt>
<dt> x-n — n lines before line x </dt>
<dt> x+n — n lines after line x </dt>
<dt> /pat/ — forward to line containing pat </dt>
<dt> ?pat? — backward to line containing pat </dt>
<dt> Some commands are: </dt>
<dt> s/pat/text/ — substitute 1st match of pat with text </dt>
<dt> s/pat/text/g — substitute every match of pat with text </dt>
<dt> s/pat/text/n — substitute the nth occurrence of pat with text </dt>
<dt> ya c — yank into buffer c or the general buffer if c is omitted </dt>
<dt> g address cmd — execute cmd on all lines which satisfy address </dt>
<dt> > — shift right </dt>
<dt> &lt; — shift left </dt>
<dt> d — delete line </dt>
<dt> ! UNIX-cmd — execute UNIX-cmd on line </dt>
<dt> m address — move lines to address </dt>
<dt> refer to ex manual page for more commands </dt>
<dt> The vi environment variables </dt>
<dt> set </dt>
<dt> You can customize your environment with this command by typing set var=value, this will set the specified var to value for a scalar variable. For boolean variables, use set var to set and set novar to unset. You can see which variables are set by just typing the set by its self. You can see a list of all variables by typing set all. Some environment variables are specific to the ex editor and some are specific to the vi editor. I have included both. </dt>
<dt> boolean variables: </dt>
<dt> autoindent(ai) — begin editing next line at same level of indent-ion as this one. </dt>
<dt> autowrite(aw) — write current buffer before leaving </dt>
<dt> exrc(ex) — tells vi/ex if it should read the .exrc file in the current directory. </dt>
<dt> errorbells — editor sends a beep to the terminal when an incorrect </dt>
<dt> ignorecase(ic) — ignore case of characters in searches. </dt>
<dt> list — place a $ at the end of each line and a ^I on each tab. </dt>
<dt> magic — allow ., [, and * to be interpreted as special characters in RE ’ s. </dt>
<dt> number(nu) — number lines in left margin </dt>
<dt> showmatch(sm) — when closing a paren., brace or bracket; move the visual cursor to opening item to check scope </dt>
<dt> showmode(smd) — show type of insert mode </dt>
<dt> wrapscan(ws) — when searching and at bottom of file, continue searching from the top </dt>
<dt> scalar variables: </dt>
<dt> shiftwidth — number of spaces to to insert on a shift operation </dt>
<dt> File Saving and Loading </dt>
<dd>wq — write file and quit</dd>
<dd>w — write file</dd>
<dd>w file — write to specified file</dd>
<dd>w! — overwrite existing file</dd>
<dd>e file — edit new file</dd>
<dd>r file — put contents of file</dd>
<dd>q — quit the editor</dd>
<dd>q! — force quit the editor, do not save changes</dd>
<dd>x — quit the editor, save file if it was modified</dd>
<dt> ZZ — quit the editor, save file if it was modified </dt>
<dd>n — start editing next file in list</dd>
<dd>rew — rewind file list, start editing 1st file on argument list again</dd>
<dt> Q — quit vi and enter ex </dt>
<dd>pre — Preserve file.</dd>
<dd>rec file — recover file
Examples
j — move cursor down
k — move cursor up
h = [BS] — move cursor left
l = [SPACE] — move cursor right</dd>
</dl>

<ul>
<li>= [RETURN] — first non-whitespace character on next line
cw — change word
dd = d<em> — delete line
yy = y</em> — yank current line into the general buffer
“ ayj — yank current line and one below into buffer a
yfc — yank until next occurrence of c on current line into the general buffer
3dl = d3l — delete next 3 characters
4c( = 2c2( = c4( — change next 4 sentences

<blockquote><p>% — while on a brace, paren., or bracket; shift right until closing brace, etc.
:%!sort = :1,$!sort — sort current file
:5,10s/foo/bar/2 — change the second occurrence of foo with bar on lines 5-10
3J — Join next 2 lines to current one
3,9m$ — move lines 3 through 9 to the end of the file
ab w/o with out — when w/o is typed change to with out
:?foo?,/bar/d — delete from the reverse match of foo until the next match of bar
g/{/,/}/&lt; — shift all lines between, and including, a “ { ” and a “ } ” left
:$4,$d - delete last five lines of buffer
:%s/(.) (.)$/2 1/ — swap everything before and after the first space</p></blockquote></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/17/110050/">UML中关联(association)和依赖(dependency)的区别</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-06-17T11:00:50+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>11:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>下面是从网上搜集的一些关联(association)和依赖(dependency)区别的看法： </h2>

<h2>1. </h2>

<p>Dependency Relationship</p>

<p>Draw a dependency relationship between two classes, or between a class and an interface, to show that the client class depends on the supplier class/interface to provide certain services, such as:</p>

<p>?The client class accesses a value (constant or variable) defined in the supplier class/interface.</p>

<p>?Operations of the client class invoke operations of the supplier class/interface.</p>

<p>?Operations of the client class have signatures whose return class or arguments are instances of the supplier class/interface.</p>

<p>A dependency relationship is a dotted line with an arrowhead at one end:The arrowhead points to the supplier class.</p>

<p>Association Relationship</p>

<p>An association provides a pathway for communication. The communication can be between use cases and actors, between two classes or between a class and an interface. Associations are the most general of all relationships and consequentially the most semantically weak. If two objects are usually considered independently, the relationship is an association</p>

<hr />

<h2>2. </h2>

<p>Martin Fowler</p>

<p>If you have an association from Class A to Class B then that means every instance of class A has some kind of link to class B. Now exactly what people mean by &ldquo;some kind of link&rdquo; varies, it may be a conceptual link, a method of the form getA or a field inside class A. But the usual notion is that the link exists at all times (although if the lower bound is 0 it may be empty). This link can be used by any method of A and, if exposed, by other classes too.</p>

<p>With a parameter the connection between A and B only exists within the scope of the method that took the parameter. No other method can use the connection. As such that, for most people I come across, means that it is not an association.</p>

<p>The dependency means that if you change the interface of B then you may have to change A. An association usually implies a dependency, but not vice-versa, as the parameter example suggests.</p>

<hr />

<h2>3. </h2>

<p>Robert C. Martin
However, association is not free of semantics. An association is a data relationship. i.e. the implementation must use some sort of data variable to implement it. Typically this is done with some kind of member variable or instance variable that refers to the associate. In C++ we might create a pointer variable, in Java a reference variable. Or we might use some kind of string that represents the associate in a dictionary somewhere.</p>

<p>In order for a message to be send between two objects, an association must exist between their two classes; and that association must be navigable in the direction that the message was sent.</p>

<hr />

<h2>4. </h2>

<p>quote:</p>

<blockquote><p>What is the difference between Association and Dependency?</p>

<p>My understanding so far was:</p>

<p>If an object of class A has a reference to an object of class B in its
attribute structure, it is association.</p></blockquote>

<p>Robert C. Martin&rsquo;s answer:</p>

<p>Er, well, uh &ndash; hmmm.</p>

<p>That&rsquo;s as good a definition as any I suppose. There are so many different colloquialisms and slangs for UML that I guess it hardly matters any more.</p>

<p>There was a time when an association was the channel between classes over which messages were sent. No message, no association. But that rule has been relaxed by so much conventional usage that I don&rsquo;t think it can hold any more.</p>

<p>Nowadays we seem to use association and aggregation interchangeably to represent a data field (except, of course, that everybody has their own private definition for what the white diamond means.) Dependency if very commonly used to represent an argument passed to a function. This was not the original intent of UML, but it&rsquo;s the way things have turned out.</p>

<p>There was a time when dependency meant that a class knew about another, but did not send messages. Data structures had dependencies on their members because they didn&rsquo;t send them messages, whereas classes had associations with their members because they did send them messages. But that nice separation has gotten so badly muddled that it has become useless.</p>

<p>Perhaps you can read from my tone that I&rsquo;m pretty disillusioned with UML. Too bad. It could have been a standard. Now, I think its just going to be a confusing compendium of confounding conventions.</p>

<hr />

<h2>5. </h2>

<p>//
From UML 2.0 Superstructure Final Adopted Specification:
&ldquo;An association describes a set of tuples whose values refer to typed instances.&rdquo; (p. 97)
&ldquo;A dependency is a relationship that signifies that a single or a set of model elements requires other model elements for their specification or implementation.&rdquo; (p. 124)</p>

<hr />

<h2>6. </h2>

<p>依赖是比关联弱的关系，关联代表一种结构化的关系，体现在生成的代码中，以java为例：
 若类A单向关联指向类B，则在类A中存在一个属性B b。
若类A依赖类B，则不会有这个属性，类B的实例可能存在于某个方法调用的参数中，或某个方法的局部变量中。</p>

<hr />

<h2>7. </h2>

<p> 关联有双向与单向之分，类A与类B双向关联可以是A与B相互可以作为对方的一个attribute，单向的话，就指其中一个类作为另一个类中的 attribute；依赖就只有单向的，不存在attribute的问题，例如类A依赖类B，表示在类A中有三种类B的使用方法：一是类B是全局的，二是类B在类A中实例化，三是类B作为参数被传递</p>

<hr />

<h2>8. </h2>

<p>关联是一种结构关系，表现为一个对象能够获得另一个对象的实例引用并调用它的服务（即使用它）；依赖是一种使用关系，表现为一个对象仅仅是调用了另一个对象的服务。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/13/114321/">Hoekey使用笔记</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-06-13T11:43:21+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>11:43 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>非常好的一款系统快捷键定制软件（名字是Hoekey而不是Hotkey），压缩包只有20多KB，功能却很强大。 所有的快捷键定义在hoekey.ini文件中，以下是几个常用的例子： =Rem|&ndash; 我的定义 &ndash;
~P = Run|e:\MyDoc\PKM2\PKManager.exe ;启动某一程序
~Z = Wait|1000
 = Msg|Progman|274|61808|2 ; 关闭显示器
~3 = Transparency ; Set current window to be
~4 = AlwaysOnTop ; transparent and on top 从上面的例子可以看出，如果要快捷键执行一系列动作，顺次写在等号后面即可。关闭显示器之所以要先有一个等待的动作，是因为如果不等待，快捷键本身会使屏幕重新启动。Hoekey定义了很多“关键字”，这些关键字的含义见[1]，完整的说明文档见Hoekey软件文档（安装目录下的hoekey.htm文件）或者网站（ <a href="http://www.bcheck.net/apps/hoekey.htm">http://www.bcheck.net/apps/hoekey.htm</a> ）。 注意不要使用~R、~D、~E这些windows默认的快捷键，否则Hoekey会报错。 参考文献[1]： <a href="http://hi.baidu.com/ly055442/blog/item/e69ebacec3b4453db600c885.html">http://hi.baidu.com/ly055442/blog/item/e69ebacec3b4453db600c885.html</a>
 Hoekey文档中文译文 标准格式：
键位=动作|选项1|选项2|选项3|选项4|选项5 ; 功能描述 辅助键代号：
~ = WIN键
_ = Shift键
^ = Ctrl键
@ = Alt键 例如： ~@G = win + Alt +G 动作列及参数：
新建窗口动作：Run, RunDialog, MsgBox, Input, Apps</p>

<p> Run
格式：Run|程序路径|窗口运行方式|等待|运行目录
·程序路径后的参数（路径[空格]参数）：
%s = 当前选中的文本内容.
%S = 当前选中的文本内容(URL)
%c = 当前所在目录, %d = 当前盘符
%i = hoekey ini 文件
%t = 当前窗口标题</p>

<p> %l = 当前窗口类 （这个参数在处理窗口的很多命令中都会用到，如Hide/Unhide/Show等，可用 ~@T = MsgBox|%t #!!# %l|show window name and class|10 获得当前窗口的类名）</p>

<p>%u = 最近一次 Input 动作的结果
%U = 最近一次 Input 动作的结果(URL)
%f = 当前日期
%g = 当前时间 (无秒)
%h = 当前时间 (有秒)
·窗口运行方式： 0 = 普通模式； 2 = 最小化； 3 = 最大化
·等待： 1 = 退出后继续运行； 2 = 只运行一个实例
·运行目录： 运行程序所在的目录环境, % 参数一样适用
特殊举例：用记事本打开当前选中的文字，自动生成“选中文字.txt”，并且以窗口最大化方式打开记事本。</p>

<p> ~N=Run|notepad.exe %s|3 RunDialog
格式：RunDialog|运行目录
打开Windows的运行对话框 MsgBox
格式：MsgBox|文本|标题|延时
特殊举例： 按一下快捷键，弹出窗口显示当前年月日时分秒，并在弹出5秒后自动关闭。 <em>^T=MsgBox|%f %h|现在时间|5 Input
格式：Input|文本|标题|延时|参数
特殊举例：打开一个输入框，输入关键字后，调用GreenBrowser的Google引擎搜索这个关键字，输入框文本是“Google
搜索”，对话框标题是“wuchang测试Google搜索”，延时5秒后自动确定。 ~I=Input|Google 搜索:|wuchang测试Google搜索|5|%u
=Run|”C:\GreenBrowser\GreenBrowser.exe” “ <a href="http://www.google.com/search?q=%u">http://www.google.com/search?q=%u</a> “ Apps
格式：Apps|0=显示被隐藏的应用程序（默认）, 1=显示全部
显示被hoekey隐藏的应用程序列表
特殊举例：显示内存中所有应用程序的列表，双击某个应用程序名称后，立即显示该应用程序。 ~</em>F4=Apps|1 特殊举例：如果需要按下一组快捷键，同时打开多个应用程序，比如这样： <em>@R=Run|C:\APP\1.exe =Run|C:\APP\2.exe 当前窗口动作： Move, MoveRel, Center, AlwaysOnTop, Transparency, Hide, Unhide,
UnhideAll, Show, Editify, Kill Move
格式：Move|窗口类|左间距|上间距|宽度|高度
按你设定的大小和桌面位置，放置当前的应用程序窗口
特殊举例： 将当前程序窗口 靠左50 靠上50，宽度500，高度500的位置放置 ~</em>V=Move||50|50|500|500 MoveRel
格式：MoveRel|窗口类|左|上|宽|高
微调修改窗口大小和位置
特殊举例：将当前窗口宽度+10像素，高度-10像素 ~^8=MoveRel||||10|-10 Center
格式：Center|窗口类|无宽度或高度定义
在桌面上置中当前窗口
无宽度或高度定义: 1 = 垂直； 2 = 水平
特殊举例：一般置中 ~^V=Center 特殊举例：垂直置中 ~^V=Center||1 AlwaysOnTop
格式：AlwaysOnTop|窗口类
将当前窗口强制总在最前面
特殊举例：设定Win+T后当前窗口总在最前 ~T=AlwaysOnTop Transparency
格式：Transparency|窗口类|透明度(0-100)
设置窗口透明度
特殊举例：将记事本窗口透明度调为50% @T=Transparency|记事本|50 Hide
格式：Hide|窗口类|1 = 缩小到系统托盘； 2 = 完全隐藏
特殊举例：将当前应用程序窗口缩小的系统托盘 ~H=Hide||1 Unhide
格式：Unhide|窗口类
特殊举例：显示最近通过hoekey隐藏的应用程序窗口 ~U=Unhide UnhideAll
格式：UnhideAll
特殊举例：显示所有被hoekey隐藏的应用程序 ~A=UnhideAll Show
格式：Show|窗口类
特殊举例：未知 Editify
格式：Editify
特殊举例：可让所有应用程序中的文本（标题栏、状态栏，输入框等位置）抓取下来并列表，方便你将他们复制到剪贴板，这个功能不错。 ~Y=Editify Kill
格式：Kill
特殊举例：不用多说，一个快捷键便可杀进程。 ~K=Kill 超能： Keys
格式：Keys|按键|间隔时间
\s:shift down
\S:shift up
\c:control down
\C:control up
\a:alt down
\A:alt up
\w:win down
\W:win up \z:right mouse button/context menu
\n:回车
\t:tab
\l:left
\k:right
\u:up
\d:down
\h:home
\e:end
\i:insert
\x:delete
\b:backspace
\p:escape
%s will be replaced with current selection.
%c will be replaced with current directory, %d with current drive
%i = hoekey ini file
%t = current window title, %l = current window class
%u = results of last Input function
%f = current date
%g = current time (no seconds)
%h = current time (seconds)
%% for a %
Also environment strings will be expanded, e.g. %temp%, %path%, %os% ^~K=Keys|\x\d\h\h ^~K=Keys|\z\d\d\k\|3000 Volume
格式：Volume|音量数值(0-100)
特殊举例：设定音量为50% _~7=Volume||70 Wait
格式：Wait|毫秒
特殊举例：通过快捷键打开Becky（最大化），等待3秒后，自动启动FreePops。 ~B=Run|c:\becky\becky.exe|3 =Wait|3000 =Run|c:\FreePops\FreePopsd.exe Eject
格式：Eject|驱动器盘符|锁定=0； 打开=1, 关闭=2
特殊举例：弹出h:光驱 ~K=Eject|h: HoeKey 系统功能 Config
弹出设置窗口（严格说是命令列表窗口） TrayIcon
格式：TrayIcon|打开=1, 关闭=0|系统托盘图标上的浮动提示
特殊举例：运行HoeKey之后自动显示托盘图标，提示为HoeKey Start=TrayIcon|1|HoeKey HotKeys
格式：HotKeys|打开=1, 关闭=0
特殊举例：关闭Hoekey的所有快捷键 ~0=HotKeys|0| Reload
格式：Reload|文件路径|添加=1
特殊举例：将另一个配置文件 user2.ini 的内容添加到当前配置文件中 ~R=Reload|user2.ini|1 Rem
格式：Rem|命名描述
特殊举例：这是在配置列表里添加一个类别名称，比如“我的快捷键”,可以将自己设定的快捷键放在这行下面。 =Rem|我的快捷键 特殊动作 Config
格式：Config=动作|自定…
特殊举例：在点击Hoekye的config按钮后，同时执行以上某一个动作 Start
格式：Start=动作|自定…
特殊举例：就像上面的打开Hoekey系统托盘图标一样，可以将一个命令放在Start行，那么Hoekey启动后会自动执行这个动作。比如弹出一个消息框，写“欢迎回来”，5秒后自动关闭消息。 Start=MsgBox|欢迎回来！||5 Load
格式：Load=动作|自定…
特殊举例：当设置功能打开后自动执行一个动作，比如弹出一个消息提示框提示自己。 还有一些针对特殊软件的功能键，或者一些键盘多媒体键等，HoeKey都有所考虑，并在其帮助文件中详细列出了，如果有特殊需要可以参考一下那里。
HoeKey作为一个快捷键工具，简单的操作方式就是这样，只要设定好了，会带来很多的便利。
学习使用，身体健康。 附1： Msg|Progman|793|0|655360 ; Volume +
Msg|Progman|793|0|589824 ; Volume -
Msg|Progman|793|0|524288 ; Volume mute
Msg||274|61488 ; 最大化
Msg||274|61472 ; 最小化
Msg||274|61728 ; 还原
Msg||274|61536 ; 关闭
Msg|0|274|61760 ; 启动屏幕保护 ~F4=Wait|1000
=Msg|Progman|274|61808|2 ; 关闭显示器 附2： Msg|Winamp v1.x|273|40044 ; Winamp: prev
Msg|WMPlayerApp|793|0|786432 ; WMP - prev
Msg|TTPlayer_PlayerWnd|273|32005 ; TTplayer - prev Msg|Winamp v1.x|273|40045; Winamp: play
Msg|WMPlayerApp|793|0|851968; WMP - Stop
Msg|TTPlayer_PlayerWnd|273|32002 ; TTplayer - stop Msg|Winamp v1.x|273|40046 ; Winamp: pause
Msg|WMPlayerApp|793|0|917504; WMP - Pause
Msg|TTPlayer_PlayerWnd|273|32001 ; TTplayer - Pause/play Msg|Winamp v1.x|273|40048 ; Winamp: next
Msg|WMPlayerApp|793|0|720896 ; WMP - next
Msg|TTPlayer_PlayerWnd|273|32006 ; TTplayer - next</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/107">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/105">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/05/10/091733/">Git初体验</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/08/155132/">Run Mongo Scripts in Shell</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/07/151147/">Find Verified User in MongoDB</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/07/111310/">Calculate String Length Containing Chinese Characters</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/07/093644/">CoffeeScript Notes</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
