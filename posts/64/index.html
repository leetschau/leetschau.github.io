
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
  <meta name="description" content="Windows Console add erl.exe and vim.exe to %PATH%;
start ConEmu, split window vertically (see note &ldquo; Multiple terminals operation on Windows &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leetschau.github.io/posts/64/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
    <h2>A notes repository for Meteor.js, data mining, Linux, etc.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="leetschau.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/19/153646/">Erlang IDE Setup</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-19T15:36:46+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>3:36 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Windows Console</h1>

<ol>
<li><p>add erl.exe and vim.exe to %PATH%;</p></li>
<li><p>start ConEmu, split window vertically (see note &ldquo; Multiple terminals operation on Windows and Ubuntu &rdquo; for spliting window detail);</p></li>
<li><p>start erlang shell with <code>erl.exe</code> at left and <code>vim erlSrc.erl</code> at the right window;</p></li>
</ol>


<h1>Ubuntu Console</h1>

<ol>
<li><p>start Terminator and split window;</p></li>
<li><p><code>erl</code> at left and <code>vi erlSrc.erl</code> at right;</p></li>
</ol>


<h1>IDE based on Sublime Text 2</h1>

<p>Use package control install two package: SublimErl and SublimeREPL.</p>

<p>Run erlang REPL: Sublime Text Menu / Tools / SublimeREPL / Erlang. If you got a error message, it&rsquo;s most probably caused by not adding werl.exe in $PATH. So Sublime Text Menu / Preferences / Package Settings / SublimeREPL / Settings-User, add <code>{ "default_extend_env": {"PATH": "{PATH};C:/Program Files/erl5.10/bin"} }</code>.</p>

<p>alt+shift+2(shortcut in View / Layout): split window with 2 column;</p>

<p>key shortcuts defs in sublime text 2:</p>

<p><a href="http://docs.sublimetext.info/en/latest/reference/keyboard_shortcuts_win.html#">http://docs.sublimetext.info/en/latest/reference/keyboard_shortcuts_win.html#</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/17/094431/">去掉文件中的^M</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-17T09:44:31+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>9:44 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>一般情况下用:set ff=unix就可以解决问题，如果无效，用下面的方法手工完成：</p>

<pre><code>:%s/[ctrl+v] [ctrl+m]//g
</code></pre>

<p>ctrl+v表示按住Ctrl键再按下v键。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/17/084555/">Analyze Java Code With Sonar on Ubuntu</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-17T08:45:55+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>8:45 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Install Sonar Service</h1>

<ol>
<li><p><code>set JAVA_HOME=/usr/lib/jvm/default-java</code>(optional);</p></li>
<li><p>install database: <code>apt-get install mysql-server</code>;</p></li>
<li><p>download sonar-3.5.1.zip and extract to /opt/sonar-server;</p></li>
<li><p>test startup: <code>$SONAR_HOME/bin/linux-x86-32/sonar.sh console</code>, web browser: <a href="http://localhost:9000;">http://localhost:9000;</a></p></li>
<li><p>build database: root@chadpc56:/opt/sonar-server/sonar-3.5.1/extras/database/mysql# <code>mysql -u root -p &lt; create_database.sql</code>;</p></li>
<li><p>modify db config: comment out &ldquo;sonar.jdbc.url: jdbc:h2&hellip;&rdquo;, uncomment &ldquo;sonar.jdbc.url: jdbc:mysql&hellip;&rdquo; in $SONAR_SERVER/conf/sonar.properties;</p></li>
<li><p>verify db operations: <code>$SONAR_HOME/bin/linux-x86-32/sonar.sh console</code>, you can see many tables are created in mysql db, then <code>mysqlshow sonar -u sonar -p</code>, with password &ldquo;sonar&rdquo;, you can see a list of tables created;</p></li>
<li><p>start sonar service: <code>nohup $SONAR_HOME/bin/linux-x86-32/sonar.sh start 1&gt;/dev/null &amp;</code>, you can monitor its startup via <code>tail -f $SONAR_HOME/logs/sonar.log</code>;</p></li>
</ol>


<p>Note: If using zsh, you have to add <code>disown %1</code> to detach background job from current shell, or your background jobs will be killed when you logged out, even it was nohupped. (or you can add &ldquo;setopt nohup&rdquo; in .zshrc to the same effect).</p>

<h1>First Login Configuration</h1>

<ol>
<li>login <a href="http://localhost:9000">http://localhost:9000</a> with admin/admin;</li>
</ol>


<h1>Analyse Java Project with Sonar Runner</h1>

<ol>
<li><p><a href="http://docs.codehaus.org/display/SONAR/Installing+and+Configuring+Sonar+Runner">Installing and Configuring Sonar Runner</a>: download, extract, set environment variables, add to path, modify config file, verify (sonar-runner -h);</p></li>
<li><p><a href="http://docs.codehaus.org/display/SONAR/Analyzing+with+Sonar+Runner">Analyzing with Sonar Runner</a>: create sonar-project.properties under project root folder, run sonar runner at project root folder (sonar-runner), see result in sonar dashboard;</p></li>
</ol>


<p>Note: add sonar.login &amp; sonar.password in sonar-project.properties;</p>

<h1>Analyse Java Project with Ant Task</h1>

<h2>Build a Demo Java Project</h2>

<ol>
<li><p>apt-get install ant;</p></li>
<li><p>copy junit-4.11.jar and hamcrest-core-1.3.jar to lib folder of ant(/usr/share/ant/lib);</p></li>
<li><p>create build.xml:</p></li>
</ol>


<h2>Run Sonar</h2>

<ol>
<li><p>Download sonar-ant-task-2.1.jar;</p></li>
<li><p>Add sonar tasks into above build.xml;</p></li>
<li><p>Run sonar with <code>ant sonar</code>;</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/16/091955/">Customize Window Buttons Position on Ubuntu</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-16T09:19:55+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>9:19 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Verified on Ubuntu Desktop 12.04.</p>

<p>Move window buttons to upper-right corner:</p>

<p>gconftool -s /apps/metacity/general/button_layout -t string menu:minimize,maximize,close</p>

<p>Move window buttons to upper-left corner:</p>

<p>gconftool -s /apps/metacity/general/button_layout -t string close,minimize,maximize</p>

<p>Only show close and minimize buttons at upper-left corner:</p>

<p>gconftool -s /apps/metacity/general/button_layout -t string close,minimize</p>

<p>(You can maximize window by double-clicking title-bar)</p>

<p>You have to use current user to run this command, or you will get &ldquo;No D-BUS daemon running&rdquo; error. For example, if you login desktop as user &ldquo;john&rdquo;, you will find a .dbus folder owned by john in $HOME of user john.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/15/164215/">Auto Code Review Based on Jenkins and Checkstyle</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-15T16:42:15+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>4:42 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Based on Jenkins 1.509 and Checkstyle 5.6.</p>

<p>Now we need practising code review, as a step of BVT of course. The ideal solution is based on Sonar and its checkstyle plugin. But I am not very familiar with sonar&rsquo;s java runner and other features. So I decided to use some &ldquo;plain&rdquo; method to embed code review into the process of BVT.</p>

<h1>Preparations</h1>

<ol>
<li><p>Install checkstyle plugin of jenkins;</p></li>
<li><p>copy checkstyle-5.6-all.jar to /opt/checkstyle;</p></li>
<li><p>create a code review rule file tyRules.xml at /opt/checkstyle:</p></li>
</ol>


<p> &lt;?xml version=&ldquo;1.0&rdquo; encoding=&ldquo;UTF-8&rdquo;?></p>

<p> &lt;!DOCTYPE module PUBLIC &ldquo;-//Puppy Crawl//DTD Check Configuration 1.3//EN&rdquo; &ldquo;<a href="http://www.puppycrawl.com/dtds/configuration_1_3.dtd">http://www.puppycrawl.com/dtds/configuration_1_3.dtd</a>&rdquo;>
 <module name="Checker">
  <property name="severity" value="warning"/>
  <module name="TreeWalker">
  <metadata name="net.sf.eclipsecs.core.lastEnabledSeverity" value="inherit"/>
  <module name="MethodLength">
   <property name="max" value="200"/>
  </module>
  <module name="NestedIfDepth">
   <property name="max" value="5"/>
  </module>
  <module name="CyclomaticComplexity"/>
  <module name="ParameterNumber">
   <property name="max" value="6"/>
  </module>
  </module>
  <module name="StrictDuplicateCode">
  <property name="min" value="75"/>
  </module>
  <module name="FileLength">
  <property name="max" value="1000"/>
  </module>
 </module></p>

<ol>
<li><p>Project -> Configuration -> Source Code Management -> Subversion -> Repo URL: svn://localhost/ServerMeter</p></li>
<li><p>Project -> Configuration -> Post-build Actions -> Publish Checkstyle analysis results: <em>*/codeReview</em>.xml;</p></li>
<li><p>Project -> Configuration -> Post-build Actions -> E-mail Notification: &hellip;</p></li>
</ol>


<h1>As part of ant build</h1>

<ol>
<li>add a target &ldquo;checkcode&rdquo; in build.xml:</li>
</ol>


<p> &lt;?xml version=&ldquo;1.0&rdquo; encoding=&ldquo;UTF-8&rdquo;?>
 <project name="checkstyleTest" basedir="./" default="checkcode">
   <taskdef resource="checkstyletask.properties" classpath="/opt/checkstyle/checkstyle-5.6-all.jar"/>
   <property name="build.dir" value="${basedir}/build" />
   <target name="init">
     <delete dir="${build.dir}"/>
     <mkdir dir="${build.dir}"/>
   </target>
   <target name="checkcode" depends="init">
     <checkstyle config="/opt/checkstyle/tyRules.xml">
       <fileset dir="src" includes="**/*.java"/>
       <formatter type="xml" toFile="build/codeReviewResult.xml"/>
     </checkstyle>
   </target>
 </project></p>

<ol>
<li>Jenkins setup: Project -> Configuration -> Build -> Invoke Ant -> Targets: checkcode;</li>
</ol>


<p>PROS: simple config, with the power of ant;</p>

<p>CONS: build scripts of every project have to be modified, which violates the DRY principle;</p>

<h1>As an independent step in build process</h1>

<p>Jenkins setup: Project -> Configuration -> Build -> Execute shell:</p>

<p> rm -rf build
 mkdir build
 find . -depth -name .svn -exec rm -fr {} \;
 java -jar /opt/checkstyle/checkstyle-5.6-all.jar -c /opt/checkstyle/tyRules.xml -r src -f xml -o build/codeReviewResult.xml</p>

<p>PROS: no need to modify any thing in project, do one thing in only ONE place;</p>

<p>CONS: there are some dirty work in shell script, for example you have to delete and create build folder manually (otherwise checkstyle report can not be created correctly), and remove all .svn folder recursively (otherwise checkstyle will find some duplicate codes in normal code file and backup file in .svn folder).</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/14/104011/">Install Jenkins and Plugins by Hand</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-14T10:40:11+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>10:40 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Follow instructions on <a href="https://wiki.jenkins-ci.org/display/JENKINS/Plugins">Jenkins wiki</a> section 1.2 &ldquo;By hand&rdquo;.</p>

<ol>
<li><p>download jenkins.war;</p></li>
<li><p>Search for the plugin, find if it has any dependency plugin. For example, plugin <a href="https://wiki.jenkins-ci.org/display/JENKINS/Checkstyle+Plugin">checkstyle</a> depends on <a href="https://wiki.jenkins-ci.org/display/JENKINS/Static+Code+Analysis+Plug-ins">analysis-core</a> stated in &ldquo;Dependencies&rdquo; section;</p></li>
<li><p>Download hpi files in <a href="http://updates.jenkins-ci.org/download/plugins/">Download Site</a>;</p></li>
<li><p>Copy hpi files downloaded to $HOME/.jenkins/plugins folder and restart Jenkins:</p></li>
</ol>


<p> nohup java -jar jenkins.war 1>jenkins.log 2>jenkins.log &amp;</p>

<p>Verify: Jenkins Dashboard(<a href="http://localhost:8080">http://localhost:8080</a>) -> Manage Jenkins -> Manage Plugins -> Installed:</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/14/081549/">Multiple Terminals Operation on Windows and Ubuntu</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-14T08:15:49+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>8:15 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Termianl, a.k.a. console or command line, is a great tool to tell computers what to do. It&rsquo;s efficient and cool to type some words in a terminal(of course in full screen mode) and get all things done. But if you have only one terminal on the screen, switching between directories are always disturbing and time-consuming jobs. So to keyboard fans, a terminal enhancement tool is necessary. With the help of workspace(a.k.a. virtual desktop) switching tool and window arrangements shortcuts, a geek&rsquo;s screen is like this:</p>

<ol>
<li><p>Put all GUI windows in workspace 1;</p></li>
<li><p>Put terminal windows in workspace 2;</p></li>
<li><p>In workspace 2, switch multiple terminal tool in full screen mode;</p></li>
<li><p>Use workspace switching shortcuts to switching between GUI workspace and terminal workspace;</p></li>
</ol>


<h1>Windows: Conemu + VirtuaWin</h1>

<p>Terminal full screen: alt + enter;</p>

<p>Split window: alt + h/v (split horizontal/vertical, defined in [Settings-> Keys &amp; Macros -> duplicate active &lt;<shell>> split to bottom/right]);</p>

<p>Switch between terminal: [ctrl + tab] or [Win + q];</p>

<p>Hide tab bar: Settings -> Features -> Tabs -> Don&rsquo;t show;</p>

<p>Switch workspace: alt + win + Left/Right/Up/Down (defined in Setup -> Hotkeys of VirtuaWin);</p>

<h1>Ubuntu: Teminator</h1>

<p>Auto run command when startup (ssh to a remote server in this case): terminator -x ssh bvt@10.0.2.74;</p>

<p>(use terminator -h for details. xterm and konsole also surppot -e <command> syntax).</p>

<p>Terminal full screen: F11 (defined in [System Settings -> Keyboard -> Shortcuts -> Windows -> Toggle fullscreen mode]);</p>

<p>Split window: alt + h/v (split horizontal/vertical, defined in [Preference -> Keybindings -> split_horiz/split_vert]);</p>

<p>Switch between terminal: alt + Left/Right/Up/Down;</p>

<p>Toggle Window max/normal of one of all terminals: ctrl + shift + z (defined in [Preferences -> Keybindings -> scaled_zoom]);</p>

<p>Make background transparent: [Preferences -> Profiles -> defaults -> Background -> Transparent background: 0.8];</p>

<p>copy on selection: [Preferences -> Profiles -> Copy on selection];</p>

<p>Switch workspace: alt + ctrl + Left/Right/Up/Down (defined in [System Settings -> Keyboard -> Shortcuts -> Navigation -> Move to workspace left/right/above/below]);</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/10/150602/">Start Cygwin in ConEmu With Executor</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-10T15:06:02+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>3:06 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Cygwin is powerful, but its single window interface is inconvenient. So I put it in ConEmu, and invoke it via Executor.</p>

<p>When define keyword in Executor, the command is &ldquo;d:\Apps\ConEmu\ConEmu.exe&rdquo;, parameters are &ldquo;/Single /cmd e:\myDoc\cygwinRoot\Cygwin.bat&rdquo;. Here &ldquo;/cmd&rdquo; can&rsquo;t be ommited, while it can be ommited when there is no &ldquo;/Single&rdquo; option. So the following two forms are valid:</p>

<p> d:\Apps\ConEmu\ConEmu.exe /Single /cmd e:\myDoc\cygwinRoot\Cygwin.bat</p>

<p> d:\Apps\ConEmu\ConEmu.exe e:\myDoc\cygwinRoot\Cygwin.bat</p>

<p>But &ldquo;d:\Apps\ConEmu\ConEmu.exe /Single e:\myDoc\cygwinRoot\Cygwin.bat&rdquo; is malformed, cygwin can&rsquo;t be invoked.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/09/172351/">基于Jenkins+Gradle的自动构建系统搭建笔记</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-09T17:23:51+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>5:23 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>前期准备：</h1>

<ol>
<li><p>搭建SVN服务器，参考笔记“ SVN服务器搭建笔记 ”；</p></li>
<li><p>新建一个基于Gradle的测试项目，参考“ 定制Gradle的项目文件目录结构 ”；</p></li>
<li><p>将此项目提交到SVN服务器；</p></li>
<li><p>启动Jenkins服务器：java -jar jenkins.war;</p></li>
<li><p>安装Gradle插件：在Jenkins管理面板的 [系统管理 -> 管理插件] 中在线安装；</p></li>
<li><p>指定Gradle位置：[系统管理 -> 系统设置 -> Gradle]中指定服务器上Gradle的安装位置（取消勾选“自动安装”）；</p></li>
</ol>


<h1>搭建过程</h1>

<ol>
<li><p>New Job -> “构建一个自由风格的软件项目”；</p></li>
<li><p>配置此项目：</p></li>
<li><p>项目名称；</p></li>
<li><p>源码管理 -> Subversion -> Repository URL: svn://localhost/JenkinsGradleTest/quickstart2</p></li>
<li><p>构建触发器 -> check &ldquo;Build periodically&rdquo; -> 日程表：H/15 * * * * （每15分钟构建一次）</p></li>
<li><p>构建 -> 增加构建对象 -> Invoke Gradle script -> Tasks: build；</p></li>
<li><p>构建后操作 -> Add post-build action -> Publish JUnit test result report -> Test report XMLs: <em>*/test-results/</em>Test.xml</p></li>
<li><p>构建后操作 -> Add post-build action -> Email Notification -> Recipients: <a href="&#x6d;&#97;&#x69;&#108;&#x74;&#x6f;&#x3a;&#x75;&#x73;&#x65;&#x72;&#64;&#x63;&#111;&#x6d;&#x70;&#97;&#110;&#121;&#46;&#x63;&#111;&#109;">&#117;&#x73;&#x65;&#114;&#64;&#x63;&#111;&#x6d;&#x70;&#x61;&#110;&#x79;&#46;&#x63;&#111;&#x6d;</a></p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/09/100304/">定制Gradle的项目文件目录结构</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-09T10:03:04+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>10:03 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>参考Gradle文档chapter 23: The Java Plugin, 23.4: Project Layout, 23.4.1: Changing the project layout。
根据此说明，基于文档自带的$GRADLE-1.5_HOME\samples\java\quickstart进行的一个实验：</p>

<p>首先将原示例的项目文件结构修改为如下形式：</p>

<pre><code>$ tree 
. 
|-- build.gradle 
|-- conf 
| `-- db.properties 
|-- src 
| `-- org 
|  `-- gradle 
|   `-- Person.java 
`-- test 
 `-- org 
  `-- gradle 
   `-- PersonTest.java 
</code></pre>

<p>然后在build.gradle中增加如下对sourceSets的定制：</p>

<pre><code>... 
apply plugin: 'eclipse' 
sourceSets { 
    main { 
        java { 
            srcDir 'src' 
        } 
        resources { 
            srcDir 'conf' 
        } 
    } 
    test { 
        java { 
            srcDir 'test' 
        } 
    } 
} 
sourceCompatibility = 1.5 
... 
</code></pre>

<p>然后就可以用gradle build或者gradle uploadArchives执行构建任务了。</p>

<hr />

<p>2014-8-11更新：</p>

<p>基于Grale 2.0，创建一个新Java项目的方法是在一个空文件夹中运行<code>gradle init --type basic</code>，然后修改build.gradle文件，去掉其中的全文注释，添加"apply plugin: &lsquo;eclipse&rsquo;&ldquo;和目录结构定义，然后运行<code>gradle eclipse</code>，并在Eclipse中导入这个项目。如果是为一个已有(Eclipse)项目增加Gradle管理，则只要在项目根目录下创建build.gradle文件，然后就可以用<code>gradle build</code>等命令构建项目了。</p>

<p>与在Eclipse中安装Gradle插件，然后完全在Eclipse中完成Grale构建相比，这种方法不需要在Eclipse中安装Gradle插件，在命令行中进行项目的构建，Eclipse只是一个代码编写和调试环境，相对更灵活一些。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/65">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/63">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/02/21/110422/">3月6日演讲提纲</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/02/20/010838/">Merge Multiple PDF Files in Ubuntu</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/02/16/212514/">Debug Python Script</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/02/09/120142/">Golang Notes</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/02/07/103930/">Cabal Notes</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
