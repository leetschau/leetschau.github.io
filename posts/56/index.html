
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
  <meta name="description" content="Using Proxy Verified on Ubuntu Server 12.04, 2013-6-8. start a goagent server at 10.21.3.31;
login in as root, modify any cn.archive&hellip; to us. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leetschau.github.io/posts/56/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
    <h2>A notes repository for Meteor.js, data mining, Linux, etc.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="leetschau.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/08/141508/">Install Packages on a Internet-blocked Server</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-08T14:15:08+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>2:15 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Using Proxy</h1>

<p>Verified on Ubuntu Server 12.04, 2013-6-8.</p>

<ol>
<li><p>start a goagent server at 10.21.3.31;</p></li>
<li><p>login in as root, modify any cn.archive&hellip; to us.archive&hellip; in /etc/apt/sources.list;</p></li>
<li><p>use proxy temporarily: <code>export http_proxy=http://10.21.3.31:8087</code>;</p>

<p>use it permament: add the following line to your /etc/apt/apt.conf(substitute your details for address and port):</p>

<p> Acquire::<a href="http::Proxy">http::Proxy</a> &ldquo;<a href="http://10.21.3.31:8087">http://10.21.3.31:8087</a>&rdquo;;</p></li>
</ol>


<p>now you can use apt-get or wget to install something.</p>

<h1>Download &amp; Install</h1>

<h2>RPM-based</h2>

<h3>Download from a internet-connected host</h3>

<p>Get rpm files from cache /var/cache/yum, or use 3rd-party tool yumdownloader:</p>

<pre><code># yum install yum-utils
# yumdownloader --resolve subversion
</code></pre>

<p>Note you can add &ldquo;&ndash;urls&rdquo; to only list download urls instead of downloading RPMs, it can be used as &ldquo;dry-run&rdquo; mode;
If yumdownloader can&rsquo;t resolve dependencies properly, see <a href="http://errors.bz/Questions/yumdownloader-downloads-only-i686-resolved-rpms-153416.html">yumdownloader downloads only i686 resolved rpms</a> for solutions.</p>

<h3>Instll on a isolated host</h3>

<pre><code># rpm -ivh &lt;package-name&gt;.rpm
</code></pre>

<h2>Debian-based</h2>

<h3>aptitude</h3>

<p>Notice that 32bit and 64bit of some packages are uncompatible. So you want to download 64bit packages on a 32bit machine, you have to &ldquo;vagrant up&rdquo; a 64bit VM, download deb files and save them in shared folder.</p>

<h4>Download</h4>

<p>Download package and all its dependencies with aptitude:</p>

<pre><code>`sudo aptitude --download-only install &lt;package-name&gt;`
</code></pre>

<p>This will download deb files to /var/cache/apt/archives. Copy the package and all its dependencies to a folder then run <code>sudo dpkg -i *.deb</code>.
If you are not sure about which is the related packages, use <code>sudo aptitude clean</code> to remove all existing .deb files before download.</p>

<p>Verified by <code>sudo aptitude --download-only install subversion</code> on vagrant box precise64.</p>

<p><code>sudo apt-get download &lt;package-name&gt;</code> will download deb files to current directory, since it does not resolve dependencies. So it&rsquo;s not very useful.</p>

<h4>Install</h4>

<pre><code>`sudo dpkg -i *.deb`
</code></pre>

<p>Ref:
<a href="http://stackoverflow.com/questions/13756800/how-to-download-all-dependencies-and-packages-to-directory">http://stackoverflow.com/questions/13756800/how-to-download-all-dependencies-and-packages-to-directory</a>
<a href="http://stackoverflow.com/questions/4419268/how-do-i-download-a-package-from-apt-get-without-installing-it">http://stackoverflow.com/questions/4419268/how-do-i-download-a-package-from-apt-get-without-installing-it</a></p>

<h3>apt-offline</h3>

<h4>Installation</h4>

<pre><code>`sudo aptitude install apt-offline`
</code></pre>

<h4>Usage</h4>

<ol>
<li><p>Specify what to install on the offline-machine: <code>sudo apt-offline set --update --upgrade --install-packages subversion openjdk-6-jre ant -- apt-offline.sig</code>;</p></li>
<li><p>Downlaod data on a internet-connected machine: <code>apt-offline get --bundle mypack.zip -t 5 apt-offline.sig</code>, where mypack is the downloaded archive and &ldquo;-t  5&rdquo; means &ldquo;download with 5 threads&rdquo;;</p></li>
<li><p>Copy mypack.zip to the offline-machine and extract it: <code>sudo apt-offline install mypack.zip</code>;</p></li>
<li><p>Install it with <code>sudo dpkg -i &lt;packages&gt;.deb</code>.</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/07/101540/">Package Repository for Ubuntu Offline Installation</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-07T10:15:40+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>10:15 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For example, we need install &ldquo;unzip&rdquo; command on a Ubuntu machine without Internet.</p>

<ol>
<li><p>On a online computer, google: unzip site:packages.debian.org, download unzip_6.0-8_i386.deb;</p></li>
<li><p><code>scp unzip_6.0-8_i386 user@remoteServer:/home/user</code>;</p></li>
<li><p>on remoteServer: <code>dpkg -i unzip_6.0-8_i386</code>;</p></li>
</ol>


<p>bingo.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/07/082016/">Install Postgresql Database for Sonar</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-07T08:20:16+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>8:20 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Setup Postgresql Server</h1>

<p>Use &ldquo;cross distribution packages&rdquo; postgres_9.2.4-1.i386.openscg.deb and install it on Mint 14. This kind of installer can be installed without GUI environment, suitable for Ubuntu Server. Installer of Postgresql is much smaller than its mysql counterpart.</p>

<p>You can follow <a href="http://wiki.openscg.com/index.php/Postgres_9.1_DEB">the instructions at OpenSCG</a> to setup server and manipulate data.</p>

<ol>
<li><p>Download &ldquo;cross distribution packages&rdquo; postgres_9.2.4-1.i386.openscg.deb;</p></li>
<li><p>install it with <code>dpkg -i</code>;</p></li>
<li><p>start service: <code>/etc/init.d/postgres-9.2-openscg start</code>;</p></li>
<li><p>verify service: <code>invoke-rc.d postgres-9.2-openscg status</code>, and <code>su postgres</code> to verify if user postgres has been created;</p></li>
<li><p><code>. /opt/postgres/9.2/pg92-openscg.env</code></p></li>
<li><p>verify connection: <code>psql</code>, then you can see the postgresql prompt &ldquo;postgres=#&rdquo;, use &ldquo;\l&rdquo; to list all databases;</p></li>
</ol>


<h1>Setup Connection between Sonar and Postgresql database</h1>

<ol>
<li><p>build sonar database in Postgresql</p>

<ol type="a">
<li>create user sonar: <code>postgres=# create user sonar with password 'sonar';</code>, notice you must &ldquo;;&rdquo; at end of command,</li>
<li>verify: <code>postgres=# \du</code>;</li>
<li>create database: <code>postgres-# create database sonar with owner sonar encoding 'UTF8';</code></li>
<li>verify: <code>postgres=# \l</code>;</li>
</ol>
</li>
<li><p>modify sonar jdbc url: modify &ldquo;sonar.jdbc.url&rdquo; as &ldquo;jdbc:postgresql://localhost/sonar&rdquo; in file $SONAR_HOME/conf/sonar.properties (remember comment out default h2 jdbc url);</p></li>
<li><p>start sonar server: <code>$SONAR_HOME/bin/sonar.sh console</code>;</p></li>
<li><p>verify: <code>psql -h localhost -d sonar -U sonar</code>, then <code>sonar=&gt; select table_name from information_schema.tables where table_schema='public';</code>, you can see &ldquo;49 rows&rdquo; at the bottom of the output;</p></li>
</ol>


<p>Note 2: When upgrade or reinstall SonarQube, and after modifying configuration file, you have to goto <a href="http://10.0.2.74:9000/setup">http://10.0.2.74:9000/setup</a> to upgrade database manually, or you will see &ldquo;sonar is under maintenance. please check back later&rdquo;.</p>

<h1>Enable Remote Access to Postgresql Server(unnecessary for Sonar)</h1>

<p>(updated at 2013.12.23: The following operation is very <strong>dangerous</strong> and not preferred.</p>

<p>Ref: <a href="http://serverfault.com/questions/110154/whats-the-default-superuser-username-password-for-postgres-after-a-new-install/325596#325596">http://serverfault.com/questions/110154/whats-the-default-superuser-username-password-for-postgres-after-a-new-install/325596#325596</a></p>

<ol>
<li><p>setup password for user postgres: <code>sudo passwd postgres</code>;</p></li>
<li><p>login as postgres: <code>su postgres</code> (the $HOME on Ubuntu should be /etc/postgres/9.2);</p></li>
<li><p>add a line in data/pg_hba.conf: &ldquo;host all all 0.0.0.0/0 md5&rdquo;;</p></li>
<li><p>modify listen_addresses=&ldquo;127.0.0.1&rdquo; to &ldquo;*&rdquo; in data/postgresql.conf;</p></li>
<li><p>verify(on client machine): <code>psql -h 10.21.3.31 -U postgres -d postgres</code> (-U means username, -d means database);</p></li>
</ol>


<p>or use squirrel-sql client: download driver jar postgresql-9.2-1002.jdbc4.jar at jdbc.postgresql.org and copy to $SQUIRREL_HOME/lib, start squirrel-sql, create a connection with url=&ldquo;jdbc:postgresql://10.21.3.31/postgres&rdquo;, username=&ldquo;postgres&rdquo; and password=&ldquo;&hellip;&rdquo;;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/06/201203/">Reuse Sonar Checkstyle Violation Report for Custom Data Analysis</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-06T20:12:03+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>8:12 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
<li><p>Write a violation rules file;</p></li>
<li><p>Import it into Sonar as a Quality Profile named as &ldquo;MyRules&rdquo;;</p></li>
<li><p>Add the following properties to ant script:</p>

<p> <property name="sonar.profile" value="MyRules" />
 <property name="sonar.checkstyle.generateXml" value="true" /></p></li>
<li><p>Run Ant script, and you can get the report at $PROJECT_HOME/.sonar/checkstyle-result.xml;</p></li>
<li><p>Use the following python script to extract data from the report:</p>

<p> from xml.etree import ElementTree as ET
 tree = ET.parse(&lsquo;/path/to/checkstyle-result.xml&rsquo;)
 root = tree.getroot()
 cycleCnt = 0
 nestCnt = 0
 for error in root.iter(&lsquo;error&rsquo;):
     msg = error.get(&lsquo;message&rsquo;)
     if msg.startswith(&lsquo;Cyclomatic&rsquo;):
         cycleCnt += 1
     if msg.startswith(&lsquo;Nested&rsquo;):
         nestCnt += 1
 print &ldquo;Cyclomatic:&rdquo;,cycleCnt,&ldquo;Nested:&rdquo;,nestCnt</p></li>
</ol>


<p>See &ldquo;Section 19.7: xml.etree.ElementTree&rdquo; of documentation of Python 2.7.5 for details.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/06/191906/">Share Keyboard, Mouse and Clipboard Between Multiple Computers</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-06T19:19:06+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>7:19 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Synergy version: 1.4.12</p>

<h1>Server</h1>

<ol>
<li><p>Download and install synergy-1.4.12-Linux-i686.deb on Mint 14;</p></li>
<li><p>Run it under <strong>Desktop</strong> mode (in [Edit -> Settings -> Advanced -> Process mode]);</p></li>
<li><p>Click &ldquo;Configure Server&rdquo;, drag a new &ldquo;Desktop&rdquo;(at the upper-right corner) to grid, then double click it and assign it a name &ldquo;mylaptop&rdquo;;</p></li>
<li><p>Click &ldquo;Start&rdquo; button, you can see &ldquo;Synergy is running (desktop mode)&rdquo; at the bottom of the main panel, or use <code>netstat -an|grep 24800</code> to verify it starting successfully;</p></li>
</ol>


<h1>Client</h1>

<ol>
<li><p>Download and install synergy-1.4.12-Windows-x86.exe on Windows 7;</p></li>
<li><p>Run it under <strong>Desktop</strong> mode as server does, enter &ldquo;mylaptop&rdquo; at [Edit -> Settings -> Advanced -> Screen name];</p></li>
<li><p>In main panel, select &ldquo;Client&rdquo; mode and enter server ip address, then click &ldquo;Start&rdquo;, you can see &ldquo;Synergy is running (desktop mode)&rdquo;;</p></li>
</ol>


<p>Now you can copy some text in PC and paste it to somewhere in laptop.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/06/121456/">Manually Install Packages With Apt-get</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-06T12:14:56+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:14 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
<li><p>download packages with apt-get: <code>sudo apt-get -d install mysql-server</code>;</p></li>
<li><p>verify downloaded packages: <code>ls -lht /var/cache/apt/archives | grep mysql</code>;</p></li>
<li><p>copy packages to destination machine;</p></li>
<li><p>install packages: dpkg -i *.deb&hellip;</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/05/163150/">Cursor Move in Vi</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-05T16:31:50+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>4:31 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>参考:h scrolling 或者 google: vi scroll</p>

<h1>光标移动（屏幕内容变化）</h1>

<ul>
<li><p>以字符为单位：h,j,k,l；以单词为单位：w/W,e/E,b/B</p></li>
<li><p>移动到行首：0，到行内第一个非空字符：^，到行尾：$</p></li>
<li><p>移动到文档首/尾：gg, G</p></li>
<li><p>跳转到第<k>行行首：<k>G，不写k则跳转到最后一行</p></li>
<li><p>移动到第n行：nG或者ngg</p></li>
<li><p>移动到屏幕中间行的行首: M</p></li>
<li><p>移动到第n列：n|</p></li>
<li><p>移动到一行的屏幕中心位置：gm</p></li>
<li><p>移动到屏幕上的行首、行尾：g0, g$</p></li>
<li><p>移动到文档的80%处：80%</p></li>
<li><p>跳转到光标上次停靠的地方：'&lsquo;（两个单引号）</p></li>
<li><p>跳转到相匹配的括号处：%</p></li>
<li><p>跳转到局部变量定义处：gD</p></li>
<li><p>向前/后翻一整页：ctrl+b/f</p></li>
<li><p>向前/后翻指定行：ctrl+u/d（浏览文件的时候很有用！可用:set scroll=n设置行数值）</p></li>
</ul>


<h1>光标移动（屏幕内容不变）</h1>

<ul>
<li><p>移动到当前窗口顶端/中间/底部的行首：H/M/L</p></li>
<li><p>移动到第n行：nH</p></li>
<li><p>移动到倒数第n行：nL</p></li>
</ul>


<h1>相对于光标滚动（光标不动，屏幕内容变化）</h1>

<h2>水平滚动</h2>

<p>让光标处在屏幕左/右边（相对于看光标的右/左侧文字）：zs, ze;</p>

<h2>垂直滚动</h2>

<p>光标处于屏幕底部(bottom）/顶部（top）/中部：zb, zt, zz;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/05/153741/">Note About Marks in Vi</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-05T15:37:41+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>3:37 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>:h marks or <a href="http://vim.wikia.com/wiki/Using_marks">Using marks</a> for detailed info.</p>

<h1>Type of marks</h1>

<p>a ~ z: valid within one file, erased when file closed;</p>

<p>A ~ Z: valid between files, you can use these marks jump between files;</p>

<p>0 ~ 9: reserved for vi use;</p>

<h1>Frequently used actions</h1>

<p>(use &ldquo;a&rdquo; as mark name)</p>

<p>set marks: ma</p>

<p>jump to marks(line and column): `a</p>

<p>junp to marks(line head): &lsquo;a</p>

<p>list all marks: :marks</p>

<p>delete all marks: :delm!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/04/111553/">Directories Sync Utility on Mint</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-04T11:15:53+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>11:15 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Meld (GUI App)</h1>

<p>TotalCommander&rsquo;s Mint(Ubuntu) counterpart is &ldquo;Meld&rdquo;. It supports command-line invocation, much slower than TotalCmd, and its visual filters and backup policies are all weaker than that of TotalCmd(See note &ldquo; Auto Dir Sync Script Based on Total Commander &rdquo; for details). Use it from command line:</p>

<pre><code>meld dir1 dir2
</code></pre>

<p>Note: Gnome-commander is much like TotalCmd, and it can use Meld as sync tools.</p>

<h1>rsync</h1>

<pre><code>rsync -rtvu --delete &lt;src_folder&gt; &lt;dst_folder&gt;
</code></pre>

<p>for example:</p>

<pre><code>rsync -rtvu --delete ~/Documents/CalibreLib/ 'chad@10.21.3.31:/home/chad/Calibre Library'
</code></pre>

<p>very slow. Maybe you can fast it with adding a &ldquo;-c&rdquo; parameter(checksum): <code>rsync -rtuvc ...</code></p>

<p>In parameter list, r means recursive (including subdirs); t meas preserve modification time of the files; v means verbose; u means update, if the file in dst is newer than that in src, it will not be copied; &ndash;delete means delete files in destination folder which not exist in source folder.</p>

<p>Note: never forget the trailing slash of src_folder (that after dst_folder is unnecessary), or src_folder will be copied <strong>into</strong> the dst_folder.</p>

<p>Ref: <a href="http://www.jveweb.net/en/archives/2010/11/synchronizing-folders-with-rsync.html">Synchronizing folders with rsync</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/31/133829/">Note About `Learn You Some Erlang for Great Good`</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-31T13:38:29+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2013</span></span> <span class='time'>1:38 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Chapter 8</h1>

<p>In road.erl, to demonstrate the process of folding on path tuple, you can add the following sentence after the line <code>OptB2=...</code> in method &ldquo;shortest_step&rdquo;:</p>

<pre><code>io:format("OptA1=~p, OptA2=~p, OptB1=~p, OptB2=~p~n", [OptA1, OptA2, OptB1, OptB2]),
</code></pre>

<p>The last sentence of road.erl in main method could also be <code>erlang:halt().</code>, while in book it&rsquo;s <code>erlang:halt(0).</code>. Both work ok.</p>

<h1>chapter 13</h1>

<ul>
<li><p>In event.erl and evserv.erl, you can add the following line before every <code>Pid ! Message</code> to trace message flows between processes:</p>

<p>  io:format(&ldquo;~p send msg ~p to ~p~n&rdquo;, [self(), Message, Pid]),</p></li>
<li><p>In sup.erl, if you modify <code>{'EXIT', _From, shutdown} -&gt;</code> to <code>{'EXIT', _From, shutup} -&gt;</code> in loop/1, you will have to use &ldquo;exit(SupPid, shutup).&rdquo; instead of &ldquo;exit(SupPid, shutdown).&rdquo; to shutdown the sup process. See process_flag/2 and exit/2 for explanations;</p></li>
</ul>


<h1>Chapter 14</h1>

<ul>
<li><p>In kitty_server.erl, return_cat/2 put a cat in the shop (actually the list Cats, the parameter of loop/1). While order_cat/4 do 2 things: if shop is empty, create and return a new cat (then you can use return_cat to add this cat to shop), otherwise return the head of Cats. You can use folloing codes to verify(tom and bob are both set free):</p>

<p>  Pid = kitty_server:start_link().
  C1 = kitty_server:order_cat(Pid, tom, yellow, &ldquo;shinny&rdquo;).
  rr(kitty_server).
  C2 = #cat{name=bob}.
  kitty_server:return_cat(Pid, C1).
  kitty_server:return_cat(Pid, C2).
  kitty_server:close_shop(Pid).</p></li>
<li><p>monitor technique in above kitty_server.erl: When <code>Ref = erlang:monitor(process, Pid).</code>, the calling process is &ldquo;monitoring&rdquo; Pid, which means 2 things:</p>

<ol>
<li><p>when Pid is down, the calling process will receive a &lsquo;DOWN&rsquo; message;</p></li>
<li><p>if the monitored target is a naming process, adding the Ref in message can guarantee correctness after target restarted (see &ldquo;Naming Process&rdquo; of chapter 12 for details);</p></li>
</ol>
</li>
<li><p>You can use <code>i().</code> or <code>etop:start().</code> in erlang shell to list all processes; use <code>process_info(Pid)</code> to print detailed information about the Pid; use <code>regs().</code> to list all registered processes;</p></li>
</ul>


<h1>Chapter 15</h1>

<p>Use <code>trade_calls:main_ab().</code> to demonstrate the use of trade_fsm;</p>

<h1>Chapter 16</h1>

<p>&ldquo;curling_scoreboard&rdquo; is a callback module (a handler in gen_event context). The return value of its init/1 function is {ok, State} (see erlang doc: gen_event: Module:init/1). So curling_scoreboard store the PID of client in its internal State variable (from ToPid in curling:join_feed/2, which called by <code>curling:join_feed(Pid, self()).</code>). At <code>curling:add_points(Pid, "T1", 2).</code>, <strong>both</strong> registered handlers receive message {add_points, Team, N}). Handler curling_scoreboard prints two message to show points are added. While handler curling_feed send a message it received to client process (the Pid in its handle_event/2 function, see erlang doc gen_event:Module:handle_event/2 for API specification);</p>

<h1>Chapter 21</h1>

<p>On p341, when set target directory as &ldquo;~/docs/erlang/ppool-1.0&rdquo; there is a exception. But when set it as &ldquo;~/docs/erlang&rdquo; everything goes fine:</p>

<pre><code>$ ./erts-5.9.1/bin/erl -boot releases/1.0.0/start -erlcount directory '"/home/lichao/docs/erlang/"' -noshell
</code></pre>

<p>systools is simple than Reltool, which is much powerful than systools. Rebar can do release job, too. See <a href="http://www.metabrew.com/article/erlang-rebar-tutorial-generating-releases-upgrades">Erlang rebar tutorial: generating releases and upgrades</a> by Richard Jones;</p>

<h1>Chapter 22</h1>

<p>On p361, you have to modify the value of &ldquo;lib_dirs&rdquo; in file processquest-1.0.0.config at the root directory of processquest to the path where your &ldquo;apps&rdquo; directory resides, in my computer it&rsquo;s &ldquo;/home/lichao/docs/erlang/processquest/apps&rdquo; because I copy processquest to /home/lichao/docs/erlang. Then you can execute &ldquo;{ok, Conf} = &hellip; reltool:eval_target_spec&hellip;&rdquo;, and a bunch of files will be created under the &ldquo;rel&rdquo; directory under processquest.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/57">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/55">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/09/24/185036/">Add a Local Meteor Package</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/23/123748/">Stack Notes</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/22/104351/">Using Webstorm as Meteor IDE</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/22/092543/">Autosave in Webstorm</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/21/092600/">Convert a Folder Into Meteor App in Webstorm</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
