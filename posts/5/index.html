
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
  <meta name="description" content="Define hostname on every node Add &ldquo;HOSTNAME=cloud60&rdquo; into file /etc/sysconfig/network on host 10.12.2.60. Then reboot system.
Do this &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leetschau.github.io/posts/5">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
    <h2>A note repository aims at Data Mining, Spark, Linux, Python.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:leetschau.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/24/153852/">Install Hadoop With CDH on CentOS</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-24T15:38:52+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>3:38 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Define hostname on every node</h1>

<p>Add &ldquo;HOSTNAME=cloud60&rdquo; into file /etc/sysconfig/network on host 10.12.2.60. Then reboot system.
Do this with it&rsquo;s own hostname on every node.</p>

<h1>Add host name to every node</h1>

<p>Add /etc/hosts to every node:</p>

<pre><code>10.12.2.60 cloud60
10.12.2.61 cloud61
10.12.2.62 cloud62
10.12.2.63 cloud63
10.12.2.90 cloud90
10.12.2.91 cloud91
10.12.2.92 cloud92
10.12.2.93 cloud93
</code></pre>

<p>where 10.12.2.60 is the manager node (where the cloudera manager is installed).</p>

<h1>Local Repository</h1>

<p>Copy DVD iso file to manager node, mount it. Create a link of /mnt/cdrom to /var/www/html with httpd:</p>

<pre><code># mkdir /mnt/cdrom
# mount -o loop /path/to/CentOS6.3-DVD.iso /mnt/cdrom
# cd /var/www/html
# ln -s /mnt/cdrom cdrom
</code></pre>

<p>Then add file cdrom.repo under /etc/yum.repos.d/:</p>

<pre><code>[cdrom]
name = CDROM
baseurl = http://10.12.2.60/cdrom/
gpgcheck = 0
</code></pre>

<h1>Other notes</h1>

<ul>
<li><p>Add user &ldquo;boco&rdquo; to &ldquo;sudoers&rdquo; on all nodes: add &ldquo;boco ALL=(ALL) NOPASSWD: ALL&rdquo; to /etc/sudoers;</p></li>
<li><p>The manager node can ssh to any other node with no password (ssh-copy-id &hellip;);</p></li>
<li><p>SSH from normal node to manager node to remove &ldquo;are you sure you want to continue connecting (yes/no)?&rdquo; prompt;</p></li>
<li><p>Shutdown iptables on all nodes: <code>service iptables stop</code> and <code>chkconfig iptables off</code>;</p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/23/154955/">Reset Forgotten Password in CentOS</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-23T15:49:55+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>3:49 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
<li><p>When system booting, press Space bar to interrupt the GRUB process;</p></li>
<li><p>Press &ldquo;a&rdquo; and <Enter>;</p></li>
<li><p>When see &ldquo;rhgb quiet&rdquo;, add &ldquo; 1&rdquo; after &ldquo;quiet&rdquo; and press <Enter>;</p></li>
</ol>


<p>Now CentOS boot in single user mode, you login as root, use <code>passwd</code> to reset password.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/23/151635/">Fix NIC Name of Cloned CentOS VMs</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-23T15:16:35+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>3:16 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Sometimes the NIC name in output of <code>ip addr</code> or <code>ifconfig</code> is not the same with that defined in /etc/sysconfig/network-scripts/ifcfg-eth0, for example, in ifcfg-eth0, the first line is:</p>

<pre><code>DEVICE="eth0"
</code></pre>

<p>but the output of <code>ip addr</code> is:</p>

<pre><code>2: eth1: &lt;BROADCAST...
</code></pre>

<p>This is because the source of <code>ip addr</code> is /etc/udev/rules.d/70-persistent-net.rules. Edit this file to correct the NIC name.</p>

<p>The total step to fix network of a centos VM is:</p>

<ol>
<li><p>vi /etc/sysconfig/network   // fix hostname and gateway IP</p></li>
<li><p>vi /etc/sysconfig/network-scripts/ifcfg-eth0 // fix NIC name, host IP and netmask</p></li>
<li><p>vi /etc/udev/rules.d/70-persistent-net.rules  // NIC name and hardware address should be the same with that in file ifcfg-eth0</p></li>
<li><p>reboot</p></li>
</ol>


<h1>Update 2014-9-19</h1>

<p>The MAC address is determined by <code>ifconfig -a</code>, so copy IP address after &ldquo;HWaddr&rdquo; in command output, and modify &ldquo;HWADDR&rdquo; in /etc/&hellip;/ifcfg-eth0, then <code>sudo service network restart</code>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/20/164953/">Linux发行版的更新方式</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-20T16:49:53+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>4:49 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>之前一直以为Mint 14像Windows一样，过期之后还可以一直用，后来发现Linux和Windows的一个很大的不同，就是由于Linux是通过Repo安装和更新软件的，所以一旦发行版制作者不再维护这个版本，就会把该版本的Packages从Repo中移除，比如Mint 14是今年（2014年）5月份生命周期结束的(End of Life, EOL)，之后除非下载deb包安装，否则用&#8221;apt-get update&#8221;和&#8221;apt-get install &hellip;&ldquo;都会报错，因为Repo中已经没有Nadia和Quantal的目录了，手工升级的方法是：</p>

<ol>
<li><p>到/etc/apt/source.list中的地址看看哪些版本还在，比如在<a href="http://mirrors.ustc.edu.cn/ubuntu/dists/">http://mirrors.ustc.edu.cn/ubuntu/dists/</a> , <a href="http://security.ubuntu.com/ubuntu/dists/">http://security.ubuntu.com/ubuntu/dists/</a> 和 <a href="http://archive.ubuntu.com/ubuntu/dists/">http://archive.ubuntu.com/ubuntu/dists/</a> 下面可以看到，比Nadia高的有saucy和trusty两个版本，因为saucy距离nadia比较近，升级成功的可能性大，所以我们先升级到saucy，由于这个版本马上也要到期了，我们在升级完后可以再次升级到trusty，就可以用到2019年4月了；</p></li>
<li><p>确定了升级的目标版本，把/etc/apt/source.list中的nadia都该为petra，quantal改为saucy，参考<a href="http://www.linuxmint.com/oldreleases.php">Linux Mint Releases</a>确定Mint的对应版本代码；</p></li>
<li><p><code>sudo apt-get update</code>，如果出现错误，修复之，比如出现了一个PuppetLab更新错误，是由于之前曾把puppetlabs的ppa加入进来了，运行<code>rm sources.list.d/puppetlabs.list</code>删除之，重新apt-get update，直到没有错误为止；</p></li>
<li><p><code>sudo apt-get dist-upgrade</code>, 这一步很慢，比如nadia升价到petra下载了2GB多安装包，所以网络一定要够快，否则就只能整夜下载了；安装过程中会询问是否更新版本号，我认为还是更新好，否则真实的版本与/etc/issue和lsb_release的结果不符会造成困惑；下载完成后的安装也很慢，整个升级过程大约2小时左右（网速大约1MB/s），远比用新的Live盘安装慢多了，而且如果版本间间隔大，还存在升级失败的风险，所以还是应该把/home做到一个单独的分区上，然后用目标版本的Live盘安装新系统，如果只能用apt升级的方法，建议找一本有意思的书，守在电脑旁，因为升级过程中时不时会要求用户决定使用哪个配置文件（这次升级过程中我所有的项目都输入Y，即使用新版本的配置文件），所以无法做到完全自动化；</p></li>
<li><p><code>sudo apt-get upgrade</code>;</p></li>
<li><p><code>reboot</code>;</p></li>
<li><p>验证：<code>lsb_release -a</code>;</p></li>
</ol>


<p>整个执行过程可以通过ssh登录到服务器上运程执行；</p>

<p>重启后登录屏幕是黑屏，但SSH能够正常登录，貌似是Linux Mint的登录管理器MDM出了问题，卸载了相关的两个模块：</p>

<pre><code># dpkg -P mdm
# dpkg -P mint-mdm-themes
</code></pre>

<p>重启后变为字符登录界面，登录后运行<code>startxfce4</code>可以启动xfce环境。</p>

<p>一个收获是升级后RabbitVCS可以用了；</p>

<p>Debian的更新方法类似，也是先改source.list，然后&#8221;apt-get dist-upgrade&#8221;；</p>

<p>CentOS不同，小版本之间的升级用&#8221;yum update&#8221;就搞定了，大版本之间只能用重装的方法升级；</p>

<p>ArchLinux属于纯正的rolling release，没有版本的概念，好处是不需要大升级，坏处是有时更近之后系统会起不来；</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/18/201809/">Build Multiple OS on a Host</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-18T20:18:09+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:18 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Rearrange Disk Partitions</h1>

<p>Start computer with gparted LiveCD and start GParted. The data partition is &ldquo;/dev/sda1&rdquo;.</p>

<ol>
<li><p>Use &ldquo;Resize/Move&rdquo; to move /dev/sda1 partition to the end of the disk, before the swap partition. Shrink 928GB to 295GB, where 87GB are used. It took about 5 hours. You can only shrink the partition without moving them to the end, which will be faster than the previous &ldquo;shrink + move&rdquo; method.</p></li>
<li><p>Right click /dev/sda1 -> Manage Flags, uncheck the &ldquo;boot&rdquo; flag.</p></li>
<li><p>Create a new 50GB partition /dev/sda3 with EXT4 format, label it as &ldquo;system1&rdquo; and quit GParted;</p></li>
<li><p>Start computer with new system (Mint 17 64bit here) LiveCD;</p></li>
<li><p>Install Mint, select &ldquo;Something else&rdquo; when asked for &ldquo;Installation type&rdquo;;</p></li>
<li><p>Select /dev/sda3, click &ldquo;change&rdquo;, then choose &ldquo;Ext4 journaling file system&rdquo; in &ldquo;Use as&rdquo;, then choose &ldquo;/&rdquo; as the &ldquo;Mount point&rdquo;, set /dev/sda1 mounted at /home and the old swap partition as swap;</p></li>
<li><p>Install the system, then reboot;</p></li>
</ol>


<h2>Transfer old data</h2>

<p>The old partition is mounted on /home, so the old home folder is now /home/home/chad. So we need:</p>

<ol>
<li><p>Move sub-folders of /home/home/chad to /home/chad;</p></li>
<li><p>After some days when it&rsquo;s sure all data have been transfered, delete all folders and files under /home except &ldquo;chad&rdquo; (new $HOME folder);</p></li>
</ol>


<p>Now on /dev/sda3, there is only one folder &ldquo;chad&rdquo;. When install the second system, just mount /dev/sda3 to /home, everything will be ok.</p>

<h2>Supported methods for disk partition management</h2>

<p>Start &ldquo;Terminal&rdquo; on LiveCD.</p>

<ol>
<li><p>Detect disk: <code>gdisk /dev/sda</code>, notice  your detection target is the whole disk instead of a partition, so &ldquo;sda&rdquo; can&rsquo;t be written as &ldquo;sda1&rdquo;, or there will no MBR be found.</p></li>
<li><p>Backup MBR: <code>sfdisk -d /dev/sda &gt; parts.txt</code>, you can recover MBR with <code>sfdisk /dev/sda &lt; backup-sda.sfdisk</code> , or with &ldquo;dd&rdquo; command:</p>

<p> Backup: # dd if=/dev/sda of=/backup/mbr_sda.bak bs=512 count=1
 Restore: # dd if=/backup/mbr_sda.bak of=/dev/hda bs=512 count=1</p></li>
</ol>


<h1>Install the Second OS</h1>

<ol>
<li><p>Backup MBR and grub.cfg:</p></li>
<li><p>Install centOS 6.5 Minimal with USB stick;</p></li>
<li><p>Choose &ldquo;Create Custom Layout&rdquo;, create a new partititon, mounted at /, and mount sdb1 as /home;</p></li>
<li><p>Uncheck &ldquo;Install boot loader on /dev/sdb&rdquo;;</p></li>
<li><p>Reboot system. There is no change in boot menu, startup origin system (Mint 17), run <code>update-grub</code> with root.</p></li>
<li><p>Reboot, you can see the CentOS is in boot menu.</p></li>
</ol>


<p>Note: If you don&rsquo;t want an OS in your boot menu, rename its &ldquo;boot&rdquo; folder as &ldquo;boot.old&rdquo; (or anything else).</p>

<p>Ref:</p>

<p><a href="http://www.maketecheasier.com/move-home-folder-ubuntu/">How to Move Your Home Folder to Another Partition</a></p>

<p>Google: Linux系统启动过程</p>

<p><a href="http://keping.me/linux-boot-process/">Linux系统启动过程</a></p>

<p><a href="http://www.thegeekstuff.com/2011/02/linux-boot-process/">6 Stages of Linux Boot Process (Startup Sequence)</a></p>

<p><a href="http://www.lifelinux.com/how-to-backup-restore-master-boot-record-mbr-in-linux/">How To Backup &amp; Restore Master Boot Record (MBR) In Linux</a></p>

<p><a href="http://www.techpository.com/?page_id=123">Linux: Copy Master Boot Record (MBR)</a></p>

<p>Manpage of sfdisk.</p>

<p><a href="https://sites.google.com/site/easylinuxtipsproject/grub">Boot loader Grub: how to repair, adapt or remove it</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/18/142036/">Build Working Environment on CentOS Minimal</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-18T14:20:36+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>2:20 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>System</h1>

<ol>
<li><p>Install CentOS with CentOS-6.5-i386-minimal.iso;</p></li>
<li><p>Choose &ldquo;Install system with basic video driver&rdquo;;</p></li>
</ol>


<h1>Network</h1>

<ol>
<li><p>After Installation, login as root, modify &ldquo;NM_CONTROLLED&rdquo; to &ldquo;no&rdquo; and &ldquo;ONBOOT&rdquo; to &ldquo;yes&rdquo;, and &ldquo;BOOTPROTO&rdquo; to &ldquo;dhcp&rdquo; in file /etc/sysconfig/network-scripts/ifcfg-eth0;</p></li>
<li><p>run <code>service network restart</code>, verify network with <code>ip addr</code> and <code>ping www.baidu.com</code>;</p></li>
</ol>


<h1>Desktop Environment</h1>

<p>Install epel repository: on x84_64 host:</p>

<pre><code># rpm -Uvh http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
</code></pre>

<p>Instead &ldquo;x86_64&rdquo; above with &ldquo;i386&rdquo; on x86 (32bit) host.</p>

<pre><code># yum update
# yum groupinstall Xfce Fonts
# useradd -m chad
</code></pre>

<p>Reboot and login as chad, run <code>startxfce4</code> and the Desktop Environment start (you can&rsquo;t run this command when you switch from another user via &ldquo;su&rdquo;).</p>

<h1>Other</h1>

<pre><code># yum install git zsh tmux
# yum install rabbitvcs-thunar rabbitvcs-cli  // a tortoise-svn like subversion &amp; git client, start repo browser with `rabbitvcs browser` or right-click in a thunar window
</code></pre>

<h1>Define Shortcuts</h1>

<p>Alt-F2 -> xfce4-appfinder -> keyboard -> Application Shortcuts -> Add:
    Command: xfce4-appfinder; ShortCut: Alt-[</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/17/103524/">RabbitVCS Notes</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-17T10:35:24+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:35 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>ArchLinux</h1>

<ol>
<li><p>Get dependencies: search &ldquo;rabbitvcs&rdquo; on AUR, and the &ldquo;Dependencies&rdquo; of it contains:</p>

<p> git
 pygtk
 python2-configobj
 python2-dulwich
 python2-gobject2
 python2-gtkspellcheck
 python2-pysvn
 python2-simplejson</p></li>
<li><p>Install rabbitvcs:</p>

<p> yaourt -S git pygtk python2-configobj python2-dulwich python2-gobject2 python2-gtkspellcheck python2-pysvn python2-simplejson rabbitvcs</p></li>
</ol>


<p>If any errors occurs during the installation, use yaourt to install it.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/17/095107/">Fix Repository Update Failure Due to PGP Signature</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-17T09:51:07+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:51 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Scenario:</p>

<pre><code>[chad@blackpad rabbitvcs]$ sudo pacman -Syu                                                                                           │··············
error: GPGME error: No data                                                                                                           │··············
error: GPGME error: No data                                                                                                           │··············
error: GPGME error: No data                                                                                                           │··············
:: Synchronizing package databases...                                                                                                 │··············
error: GPGME error: No data
...
</code></pre>

<p>Solutions:</p>

<pre><code># rm /var/lib/pacman/sync/*db.sig* 
# pacman-key --init
# pacman-key --populate archlinux
# pacman -Syy
# pacman -Syu
</code></pre>

<p>If &ldquo;File &hellip; is corrupted (invalid or corrupted package (PGP signature))&rdquo; occured during install a package, when pacman asked &ldquo;Do you want to delete it? (Y/n)&rdquo;, press <Enter> to delete the file, then run &ldquo;pacman -S &hellip;&rdquo; again to reinstall it. I fixed these errors today.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/17/094259/">Yaourt Notes</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-17T09:42:59+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:42 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://wiki.archlinux.org/index.php/yaourt">Yaourt</a> is a community-contributed wrapper for pacman which adds seamless access to the AUR, allowing and automating package compilation and installation from your choice of the thousands of PKGBUILDs in the AUR, in addition to the many thousands of available Arch Linux binary packages.</p>

<h1>Install</h1>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo pacman -S --needed base-devel
</span><span class='line'>
</span><span class='line'>// download package-query package from AUR to ~/Downlaods manually
</span><span class='line'>$ cd ~/Downloads
</span><span class='line'>$ tar zxvf package-query.tar.gz
</span><span class='line'>$ cd package-query
</span><span class='line'>$ makepkg
</span><span class='line'>$ sudo pacman -U package-query-1.4-1-i686.pkg.tar.xz
</span><span class='line'>
</span><span class='line'>// download yaourt package from AUR to ~/Downlaods manually
</span><span class='line'>$ tar zxvf yaourt.tar.gz
</span><span class='line'>$ cd yaourt
</span><span class='line'>$ makepkg
</span><span class='line'>$ sudo pacman -U yaourt-1.5-1-any.pkg.tar.xz</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/16/195552/">Add Xfce Desktop Environment for ArchLinux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-16T19:55:52+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>7:55 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After install ArchLinux and awesome, in console, run following as root:</p>

<pre><code># pacman -S xfce4 xfce4-goodies variety networkmanager network-manager-applet xfce4-notifyd gnome-keyring
# systemctl enable NetworkManager
# systemctl start NetworkManager
</code></pre>

<p>Without gnome-keyring, you can find wireless hot-point, but you will disconnecting from it immediately.</p>

<p>Add &ldquo;exec startxfce4&rdquo; in ~/.xinitrc. Then run &ldquo;startx&rdquo; in console.</p>

<h1>Dell PC</h1>

<h2>Video</h2>

<p>You need install video drivers and fonts for this DELL PC.</p>

<p>Firstly, use <code>lspci|grep VGA</code> to get video driver information, for example, for &ldquo;Intel Corporation 4 Series Chipset Integrated Graphics Controller&rdquo;, you need to install &ldquo;xf86-video-intel&rdquo;, see <a href="https://wiki.archlinux.org/index.php/Intel_Graphics#Installation">Intel Graphics on Arch Wiki</a>.</p>

<h2>Font</h2>

<p>Use &ldquo;dajavu&rdquo; to make font in Xfce desktop nicer, the second make system display Chinese character properly.</p>

<pre><code># pacman -S ttf-dejavu adobe-source-han-sans-otc-fonts     // or adobe-source-han-sans-cn-fonts for only Chinese character
# pacman -S ttf-ubuntu-font-family     // good-looking fonts for Variety: Ubuntu Condensed
</code></pre>

<h2>Time</h2>

<pre><code># timedatectl status
# timedatectl list-timezones
# timedatectl set-timezone Asia/Hong_Kong
</code></pre>

<h2>Web browser</h2>

<pre><code># pacman -S firefox    // chromium can't display Chinese character properly
</code></pre>

<h2>Other</h2>

<pre><code># pacman -S git openssh
</code></pre>

<h2>Input Method</h2>

<pre><code># pacman -S fcitx-im fcitx-configtool fcitx-googlepinyin fcitx-libpinyin
</code></pre>

<p>Search &ldquo;archlinux fcitx&rdquo; on Arch Wiki for installation details.</p>

<p>For now fcitx is much better than ibus.</p>

<pre><code># pacman -S ibus-libpinyin
# su - chad
$ ibus-setup
</code></pre>

<p>Then select &ldquo;Chinese - Intelligent Pinyin&rdquo; under &ldquo;Input Method&rdquo; tab, and click &ldquo;Preferences&rdquo; to customize it.
The package &ldquo;ibus-sunpinyin&rdquo; is OK, too.
&ldquo;ibus-pinyin&rdquo; can&rsquo;t work properly.
&ldquo;ibus-rime&rdquo; can only input traditional Chinese.</p>

<p>Ref:</p>

<p><a href="https://wiki.archlinux.org/index.php/xfce#Installation">Xfce Installation on ArchWiki</a>
<a href="https://wiki.archlinux.org/index.php/NetworkManager">NetworkManager on ArchWiki</a></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/6">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/4">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/10/02/005047/">Clojure Web Development</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/01/210506/">Dmenu Notes</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/27/113819/">A Simple Ring Server</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/24/073009/">Xen on CentOS 6</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/20/105816/">Lightweight Web Browser Dwb</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
