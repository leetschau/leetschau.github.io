
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
<<<<<<< HEAD
  <meta name="description" content="Write a procedure to reverse a string. If you wrote an iterative solution, now write a recursive solution or vice versa. #!/usr/bin/tclsh # &hellip;">
=======
  <meta name="description" content="After version 1.4.0, ranger add a command &ldquo;yp&rdquo; to copy full path name of a file with xsel. So you have to install xsel (apt-get install &hellip;">
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
<<<<<<< HEAD
  <link rel="canonical" href="http://leetschau.github.io/posts/46/">
=======
  <link rel="canonical" href="http://leetschau.github.io/posts/46">
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<<<<<<< HEAD
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
=======
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
<<<<<<< HEAD
    <h2>A notes repository for Meteor.js, data mining, Linux, etc.</h2>
=======
    <h2>A note repository aims at Data Mining, Spark, Linux, Python.</h2>
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
<<<<<<< HEAD
    <input type="hidden" name="sitesearch" value="leetschau.github.io">
=======
    <input type="hidden" name="q" value="site:leetschau.github.io" />
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
<<<<<<< HEAD
      <h1 class="entry-title"><a href="/blog/2013/08/20/102248/">Exercies of Chapter 2 in `Exploring Expect`</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-20T10:22:48+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>10:22 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><ol>
<li>Write a procedure to reverse a string. If you wrote an iterative solution, now write a recursive solution or vice versa.</li>
</ol>
</blockquote>

<p> #!/usr/bin/tclsh</p>

<p> # iterative solution:</p>

<p> proc rev_str_iter { input } {
  for {set idx [string length $input]} {$idx > 0} {incr idx -1} {
   append res [string index $input [expr $idx-1]]
  }
  return $res
 }
 # recursive solution:
 proc rev_str_recur { input } {
  set len [string length $input]
  if {[expr $len - 1] > 0} {
   append res [rev_str_recur [string range $input 1 end]] \
             [string index $input 0]
  } else {
   set res $input
  }
  return $res
 }
 set m &ldquo;abcdefg&rdquo;
 set n [rev_str_iter $m]
 puts $n
 set n2 [rev_str_recur $m]
 puts $n2</p>

<blockquote><ol>
<li>Repeat the previous exercise but with a list instead of a string.</li>
</ol>
</blockquote>

<p> #!/usr/bin/tclsh
 # iterative solution:
 proc rev_list_iter { input } {
  for {set idx [llength $input]} {$idx > 0} {incr idx -1} {
   lappend res [lindex $input [expr $idx-1]]
  }
  return $res
 }
 # recursive solution:
 proc rev_list_recur { input } {
  set len [llength $input]
  if {[expr $len - 1] > 0} {
   set res [concat [rev_list_recur [lrange $input 1 end]] [lindex $input 0]]
  } else {
   set res $input
  }
  return $res
 }
 set m &ldquo;a b c d e g&rdquo;
 set n [rev_list_iter $m]
 puts $n
 set n2 [rev_list_recur $m]
 puts $n2</p>

<blockquote><ol>
<li>Write a procedure to rename all the files in a directory ending with .c to names ending in &ldquo;.cc“.</li>
</ol>
</blockquote>

<p> #!/usr/bin/tclsh
 foreach file_name [glob *.c] {
  file rename $file_name [append file_name c]
 }</p>

<blockquote><ol>
<li>Write a procedure that takes a list of variable names and a list of values, and sets each variable in the list to the respective value in the other list. Think of different alternatives to handle the case when the lists are of different lengths.</li>
</ol>
</blockquote>

<p> #!/usr/bin/tclsh
 proc assign {names values} {
  if {[llength $names] > [llength $values]} {
   set len [llength $values]
  } else {
   set len [llength $names]
  }
  for {set idx 0} {$idx&lt;$len} {incr idx} {
   set var_name [lindex $names $idx]
   set $var_name [lindex $values $idx]
   puts [concat $var_name = [set $var_name]]
  }
 }
 set names &ldquo;za bb ee dk&rdquo;
 set values &ldquo;11 32 53 94 5&rdquo;
 assign $names $values</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/20/101843/">Tcl Shell Notes</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-20T10:18:43+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>10:18 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li><p>Start origin tcl shell: tclsh (apt-get install tcl);</p></li>
<li><p>Start tcl shell with command history shortcuts (up arrow for previous command and other powerful command line shortcuts like alt+backspace, brackets matching, etc. on Ubuntu): rlwrap -c tclsh;</p></li>
</ul>


<p>For efficiency, add <code>alias tcl="rlwrap -c tclsh"</code> to ~/.zshrc;</p>

<p>Note: rlwrap is readline wrapper;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
=======
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
      <h1 class="entry-title"><a href="/blog/2013/08/16/174647/">Copy Full Path Name of a File in Ranger</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-16T17:46:47+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>5:46 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After version 1.4.0, ranger add a command &ldquo;yp&rdquo; to copy full path name of a file with xsel. So you have to install xsel (apt-get install xsel), then use middle-button of the mouse to paste it somewhere else (both console and GUI apps, and if you are using laptop, you can only paste to console with <code>xsel -o</code>). Because xsel is a &ldquo;global clipboard&rdquo;, you can use yp of ranger in one console, and get the path with middle button or <code>xsel -o</code> in another console.</p>

<p>Note: see man page of xsel for the concept of 3 different clipboard PRIMARY, SECONDARY and CLIPBOARD of X windows.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/15/103209/">CFEngine Notes</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-15T10:32:09+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>10:32 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Based on: <a href="https://cfengine.com/archive/manuals/cf3-quickstart">CFEngine Quick Start Guide</a></p>

<ol>
<li><p>Use 10.21.3.23 as cfhub (server), 10.21.3.31 as cfhost (client);</p></li>
<li><p>Install cfengine on both cfhub and cfhost:</p>

<ol type="a">
<li><p>download cfengine-community_3.5.1-3_i386.deb;</p></li>
<li><p>Ensure OpenSSL, BerkeleyDB and PCRE are installed: <code>apt-get install libdb4.* libpcre3 libssl</code>, so weired that this can not be excecuted in zsh, but bash is ok;</p></li>
<li><p><code>sudo dpkg --install cfengine-community_3.5.1-3_i386.deb</code>;</p></li>
</ol>
</li>
<li><p>Start policy server: <code>/var/cfengine/bin/cf-agent -B 10.21.3.23</code>;</p></li>
<li><p>Start client: same as above;</p></li>
<li><p>On cfhub: create a file cftest1.cf at /var/cfengine/masterfiles;</p></li>
<li><p>Modify /var/cfengine/masterfiles/promises.cf file;</p></li>
<li><p>&hellip;</p></li>
</ol>


<h1>Uninstall CFEngine3</h1>

<p>$ sudo apt-get purge cfengine-community</p>

<p>$ sudo rm -rf /var/cfengine</p>

<h1>bcfg2</h1>

<ol>
<li><p>Use 10.21.3.31 as server: <code>apt-get install bcfg2-server</code>;</p></li>
<li><p>Use 10.21.3.23 as client: <code>apt-get install bcfg2</code>;</p></li>
<li><p><a href="http://docs.bcfg2.org/appendix/guides/ubuntu.html#initialize-your-repository">Initialize your repository</a></p></li>
</ol>


<h1>cdist</h1>

<ol>
<li><p>install python3: <code>apt-get install python3</code>;</p></li>
<li><p><code>git clone git://git.schottelius.org/cdist</code>;</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/14/160009/">Run Interactive Shell Command in Erlang</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-14T16:00:09+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>4:00 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The following simple Erlang netcat client demonstrates the communication between Erlang program and external OS process. The rc.erl start a netcat client to connect to a netcat server, and send some message to the server at a given time.</p>

<ol>
<li><p>Create Erlang server;</p>

<p> -module(rc).
 -export([cmd/1]).
 cmd(Cmd) ->
     Opt = [stream, exit_status, stderr_to_stdout, eof],
     P = open_port({spawn, Cmd}, Opt),
     get_data(P, [], 0).
 get_data(P, Sofar, 3) ->
     port_command(P, &ldquo;abcd&rdquo;),
     get_data(P, Sofar, 4);
 get_data(P, Sofar, Cnt) ->
     receive
         {P, {data, Bin}} ->
             io:format(&ldquo;rec Bin: ~p, Cnt=~p~n&rdquo;, [Bin, Cnt]),
             get_data(P, [Bin|Sofar], Cnt+1);
         {P, eof} ->
             port_close(P),
             receive
                 {P, {exit_status, N}} ->
                     {N, lists:reverse(Sofar)}
             end
     end.</p></li>
<li><p>Start netcat server: run command <code>nc -l 3333</code> at host 10.21.3.31;</p></li>
<li><p>Start netcat client:</p>

<p> $ erl
 &hellip;</p>

<p> 1> c(rc).</p>

<p> {ok,rc}
 2> rc:cmd(&ldquo;nc 10.21.3.31 3333&rdquo;).</p></li>
<li><p>Send message from server to client: press &ldquo;1<CR>2<CR>3<CR>4<CR>^C&rdquo;, client output as follows:</p>

<p> rec Bin: &ldquo;1\n&rdquo;, Cnt=0
 rec Bin: &ldquo;2\n&rdquo;, Cnt=1
 rec Bin: &ldquo;3\n&rdquo;, Cnt=2
 rec Bin: &ldquo;4\n&rdquo;, Cnt=4
 {0,[&ldquo;1\n&rdquo;,&ldquo;2\n&rdquo;,&ldquo;3\n&rdquo;,&ldquo;4\n&rdquo;]}
 3></p></li>
</ol>


<p>When you press <CR> after 3, you can receive &ldquo;abcd&rdquo; from netcat client.</p>

<p>The pattern of Erlang-Shell communication is:</p>

<ul>
<li><p>Use &ldquo;open_port&rdquo; to start a external shell process;</p></li>
<li><p>Use &ldquo;receive&rdquo; clause to receive output of the process;</p></li>
<li><p>Use &ldquo;port_command&rdquo; to send message to process;</p></li>
<li><p>Use &ldquo;port_close&rdquo; to close the shell;</p></li>
</ul>


<p>Notes:</p>

<ol>
<li><p>For non-interactive shell command, os:cmd/1 is a better choice;</p></li>
<li><p>If you want to catch the event that the peer close actively, add &ldquo;eof&rdquo; into option list of open_port; If you want to catch the exit value of the shell process, add &ldquo;exit_status&rdquo; to option list of open_port;</p></li>
<li><p>Not specify &ldquo;in&rdquo; in option list of open_port when you want to send the process some message, or a &ldquo;ebadf&rdquo; exception arises, because &ldquo;in&rdquo; means this process only used for input, and &ldquo;ebadf&rdquo; means the file is not open for reading or writing.</p></li>
<li><p><a href="http://www.cnblogs.com/gibbon/archive/2012/12/26/Erlang.html">Erlang port communicate with python</a> is a good demonstration of erlang calling a python script; Chapter 12 of &ldquo;Programming Erlang&rdquo; also concentrate Erlang interfacing techniques.</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/13/174638/">My Vimrc</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-13T17:46:38+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>5:46 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Plugins used in this file includes:
FuzzyFinder, L9, bufexplorer (v7.4.2), <a href="https://github.com/bling/vim-airline">vim-airline</a>,
<a href="https://github.com/plasticboy/vim-markdown">vim-markdown</a>.</p>

<p>nerdcommenter is a must-have plugin.</p>

<p>For html editing, <a href="https://github.com/sukima/xmledit/">xmledit</a> is a good helper.</p>

<pre><code>set nocompatible
set clipboard=unnamedplus
execute pathogen#infect()
call pathogen#helptags()
call pathogen#incubate()

noremap &lt;left&gt; &lt;C-w&gt;h
noremap &lt;right&gt; &lt;C-w&gt;l
noremap &lt;up&gt; &lt;C-w&gt;k
noremap &lt;down&gt; &lt;C-w&gt;j
nnoremap &lt;F2&gt; :set wrap!&lt;CR&gt;

set nobackup
set noswapfile

colo ron
syntax on
set incsearch
set et
set sw=2
set ts=2
set nu
set nowrap

nnoremap &lt;C-o&gt; :FufCoverageFile&lt;CR&gt;

" status line
set laststatus=2
let g:airline_section_c='%F'

" markdown
let g:vim_markdown_initial_foldlevel=2

filetype plugin indent on
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/10/081522/">Hadoop 1.2.1 Up and Running</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-10T08:15:22+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>8:15 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Pseudo-distributed Mode</h1>

<ol>
<li><p>Download Oracle jdk-6u45-linux-i586.bin from Oracle website. Openjdk is unsuitable here because some package like sun.net.dns.ResolverConfiguration only exists in rt.jar of Oracle jdk;</p></li>
<li><p>Install (run <code>./jdk-6u45-linux-i586.bin</code> under ~/apps) this jdk at ~/apps with current user (do not install it into /opt with root user, because this will cause access restriction of rt.jar of jdk);</p></li>
<li><p>Add $JAVA_HOME and $CLASSPATH into /etc/profile and re-log into OS to validate:</p>

<pre><code> export JAVA_HOME=/home/lichao/apps/jdk1.6.0_45 
 export PATH=$PATH:$JAVA_HOME/bin 
 export CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib
</code></pre></li>
<li><p>Follow <a href="https://hadoop.apache.org/docs/stable/single_node_setup.html">Single Node Setup</a>.</p></li>
</ol>


<p>Verified this morning: 2013-8-9, Linux Mint 14 32bit, Hadoop 1.2.1.</p>

<h1>Distributed Mode</h1>

<ol>
<li><p>Create user hadoop in host 23, 31, 49 and 139;</p></li>
<li><p>Create apps and warez folder in home directory on all hosts above;</p></li>
<li><p>Copy jdk-6u45-linux-i586.bin from Oracle and hadoop-1.2.1.tar.gz to warez directory to all above hosts;</p></li>
<li><p>Unzip jdk6u45 and hadoop to ~/apps;</p></li>
<li><p>modify $JAVA_HOME as &ldquo;/home/hadoop/apps/jdk1.6.0_45&rdquo; in ~/apps/hadoop-1.2.1/conf/hadoop-env.sh;</p></li>
<li></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/09/120651/">Build Hadoop Develop Environment</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-09T12:06:51+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:06 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Prerequisites</h1>

<ol>
<li><p>Download Oracle jdk-6u45-linux-i586.bin from Oracle website. Openjdk is unsuitable here because some package like sun.net.dns.ResolverConfiguration only exists in rt.jar of Oracle jdk;</p></li>
<li><p>Install (./jdk<strong>.bin) this jdk at ~/apps/jdk</strong> with current user (do not install it into /opt with root user, because this will cause access restriction of rt.jar of jdk);</p></li>
<li><p>Add $JAVA_HOME and $CLASSPATH into /etc/profile and re-log into OS to validate;</p></li>
<li><p>Add this jdk to eclipse (Preferences -> Install JREs);</p></li>
</ol>


<h1>Method 8-10</h1>

<p>Follow <a href="https://wiki.apache.org/hadoop/EclipseEnvironment">Working with Hadoop under Eclipse</a></p>

<ol>
<li>make sure your maven version is 3.x (mvn &ndash;version), if not:</li>
</ol>


<p> sudo apt-get remove maven2
 sudo apt-get update
 sudo apt-get install maven</p>

<ol>
<li><p>git clone git://git.apache.org/hadoop-common.git ()</p></li>
<li><p>mvn install -DskipTests</p></li>
<li><p>mvn eclipse:eclipse -DdownloadSources=true -DdownloadJavadocs=true</p></li>
<li></li>
</ol>


<h1>Method 8-9</h1>

<ol>
<li><p>Create a Java Project in Eclipse, modify default output folder to $PROJECT_HOME/out (because &ldquo;bin&rdquo; is a script folder in hadoop source pack);</p></li>
<li><p>Exclude src from source folder and create &ldquo;lib&rdquo;, &ldquo;conf&rdquo; folder under $PROJECT_HOME;</p></li>
<li><p>Import $HADOOP_HOME/src, lib, conf into $PROJECT_HOME;</p></li>
<li><p>Add all jar files under lib to build path;</p></li>
<li><p>Add ant.jar to build path;</p></li>
<li><p>Add mapred, tools, ant, core, hdfs under src folder as source folder;</p></li>
</ol>


<h1>Verify</h1>

<ol>
<li><p>modify config files;</p></li>
<li><p>run hadoop</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/09/083854/">Windows上安装Linux后Grub目录中没有Windows启动项的修复方法</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-09T08:38:54+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>8:38 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>启动Linux后，执行<code>sudo update-grub</code>，此命令将重新扫描启动区，输出更新结果，并更新/boot/grub/grub.cfg文件。</p>

<p>今天在联想笔记本上执行此命令后，找回了之前安装的Windows 7启动项。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/08/114315/">Solution of Cobertura Exception `touchJump` When Unit Test</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-08T11:43:15+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>11:43 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>During unit test I encounter a &ldquo;java.lang.NoSuchMethodError: net.sourceforge.cobertura.coveragedata.ClassData.touchJump(IIZ)V&rdquo; exception.
I find there are 2 cobertura.jar in classpath. That jar in /usr/share/ant/lib is v1.9.2, while in ./lib/ is 1.8.1.</p>

<p>When I delete the jar in ./lib, there is a &ldquo;java.lang.NoClassDefFoundError: net/sourceforge/cobertura/coveragedata/HasBeenInstrumented&rdquo; exception.</p>

<p>Then I copy cobertura.jar from /usr/share/ant/lib to ./lib, everything goes fine.</p>

<h1>Solution of &ldquo;local class incompatible&rdquo;</h1>

<p>Problem: local class incompatible: stream classdesc serialVersionUID = 2, local class serialVersionUID = 2152686494816595840</p>

<p>Solution: use <code>unzip -q -c cobertura.jar META-INF/MANIFEST.MF</code>, I found the version of this jar is 1.8, while that in other projects is 1.9.1. So I copy the jar of version 1.9.1 to replace that of version 1.8, everything goes fine.</p>
</div>
  
  


    </article>
  
<<<<<<< HEAD
=======
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/07/164139/">SVN命令行客户端使用方法</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-07T16:41:39+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>4:41 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>主要是Linux上的命令行客户端。</p>

<h1>常用命令</h1>

<ul>
<li><p>svn mkdir -m &ldquo;some notes&rdquo; <svn_url>： 在svn_url指定的位置建立文件夹，一般用于建立项目根目录；</p></li>
<li><p>svn import -m &ldquo;some notes&rdquo; <local_folder_to_be_imported> <svn_url>： 注意只有文件夹下的内容（文件和文件夹）会被导入，文件夹本身不会被导入，所以如果想导入当前目录下的testProject文件夹到svn根目录下，应执行下面的指令（testProject要写两次）：</p>

<p>  svn import -m &ldquo;initial import project&rdquo; testProject svn://10.0.7.141/testProject</p></li>
</ul>


<p>常用的用法是导入当前文件夹下的所有文件，这时<local_folder_to_be_imported>不写，直接写成：</p>

<pre><code>svn import -m "..." svn://10.0.7.141/testProject
</code></pre>

<ul>
<li><p>svn info：显示当前repo对应的SVN路径、版本号、用户名等；</p></li>
<li><p>svn ci -m &ldquo;&hellip;&rdquo; [filename]: 提交改动，首先用svn st查看改动情况；如果没有配置默认用户，增加&ndash;username <user>来指定使用哪个用户提交；</p></li>
<li><p>svn co svn://localhost/Trunk/Project1 targetFolder: 将repo中Project1的内容检出到当前目录的targetFolder文件夹中；</p></li>
<li><p>svn log -l 3：显示当前目录对应的repo文件夹的最近3次提交，可以在log后面增加目标repo地址指定要显示的目标；</p>

<p>  svn log -l 3 <file_name>: 针对某一个文件的最近3次提交；</p></li>
<li><p>svn ls [svn://localhost [-R]]: 列出repo中的内容（加-R表示包含子目录内容）；</p></li>
<li><p>svn st: 查看文件改动情况；</p></li>
<li><p>svn add <file>: 将svn st查到的未纳入版本控制的文件加入到版本控制中；</p></li>
<li><p>svn up：更新working directory，当在working dir中提交版本后，需要用svn up更新svn客户端库，才能在svn log中看到新提交的版本；update之前先用status查看一下本地有没有未提交的修改，否则易造成冲突；</p></li>
<li><p>svn diff <file_name>: 比较head revision与本地working copy之间的差异；</p>

<p>  svn diff -r 1345:1346 <file_name>：比较文件<file_name>的r1345版本与r1346版本的区别（先用svn log &hellip; <file_name>确定要比较的版本号；</p></li>
<li><p>svn move <source> <destination></p></li>
<li><p>svn revert <file_name>: If you add some file but not commit yet, and you find it&rsquo;s useless and want to remove it,you can use this command;</p></li>
<li><p>svn cat [-r<version_number>] <file_path_on_server></p></li>
</ul>


<p>可以用svn help列出所有可用命令，svn help <cmd_name>查询某个命令的使用方法。</p>

<h1>设置忽略列表</h1>

<h2>一次性设置</h2>

<ul>
<li><p>svn propset svn:ignore folder .：将folder放入ignore列表中；如果多次使用此命令，后面的<folder>会覆盖前面的（而不是追加）；</p></li>
<li><p>如果有多个项目，用多行命令，每行一个忽略元素：</p>

<p>  svn propset svn:ignore &ldquo;folder1
  folder2
  folder3&rdquo; .</p></li>
<li><p>列出当前的忽略列表：svn propget svn:ignore</p></li>
</ul>


<h2>编辑忽略列表</h2>

<pre><code>svn propedit svn:ignore .
</code></pre>

<p>这样会打开一个文本编辑器，内容是当前的忽略列表（每行一个元素），编辑之后保存即可修改忽略列表。</p>

<p>用&#8221;echo $EDITOR&#8221;查看默认编辑器，用&#8221;export EDITOR=vi&#8221;将其改为vi；</p>

<h1>查看默认用户</h1>

<p>~/.subversion/auth/svn.simple下的文件中保存着默认用户名，如果想更改默认用户，删掉这个保存默认用户的文件，然后使用一个svn命令，在提示中输入用户名；</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/05/160413/">Use ArtifactDeployer Plugin to Publish Product Artifacts</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-05T16:04:13+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>4:04 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Jenkins will cleanup workspaces of jobs for some (unknown) reasons. So we have to save them to some other place as product publish repository. ArtifactDeployer plugin is perfect for this purpose.</p>

<h1>Installation</h1>

<p>Jenkins -> Manage Jenkins -> Manage Plugins -> Available, check &ldquo;Jenkins Artifact Deployer Plug-in&rdquo;, then click &ldquo;Install without restart&rdquo;. If the Jenkins server can&rsquo;t access internet, you can use http proxy to achieve install online;</p>

<h1>Usage</h1>

<ol>
<li><p>In the &ldquo;Configure&rdquo; page of job GCP-6.20, add a post-build action &ldquo;[ArtifactDeployer] Deploy artifacts from workspace to remote directories&rdquo;. Enter &ldquo;<em>*/build/</em>.zip&rdquo; in &ldquo;Files to deploy&rdquo;, and &ldquo;/home/bvt/.jenkins/userContent/GCP&rdquo; in &ldquo;Remote directory&rdquo;. And check &ldquo;Clean-up remote directory before deployment&rdquo; and &ldquo;Delete remote artifacts when the build is deleted&rdquo; in &ldquo;Advanced&rdquo;. You can add more artifacts by click &ldquo;Add&rdquo; button.</p></li>
<li><p>Build job GCP-6.20;</p></li>
<li><p>After build, you can get artifacts at <a href="http://10.0.2.74:8088/userContent/GCP,">http://10.0.2.74:8088/userContent/GCP,</a> or in <a href="http://10.0.2.74:8088/job/GCP-6.20">the home page of this job</a>;</p></li>
</ol>


<p>Note: It seems that ArtifactDeployer can only save artifacts somewhere in the bvt host. There is a &ldquo;Publish Over&rdquo; plugin which can send artifacts to remote hosts via ssh(sftp) or ftp protocol.</p>
</div>
  
  


    </article>
  
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
  <div class="pagination">
    
      <a class="prev" href="/posts/47">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/45">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
<<<<<<< HEAD
        <a href="/blog/2015/05/28/102822/">Penetrate GFW With Sshuttle</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/27/180718/">Store Small Images in MongoDB via Base64</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/26/174257/">Meteor基础知识之系统篇</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/15/142023/">Run MongoDB Server on Docker in VPS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/10/091733/">Git初体验</a>
=======
        <a href="/blog/2015/05/26/174257/">Meteor基础知识之系统篇</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/15/142023/">Run MongoDB Server on Docker in VPS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/10/091733/">Git初体验</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/08/155132/">Run Mongo Scripts in Shell</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/07/151147/">Find Verified User in MongoDB</a>
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
