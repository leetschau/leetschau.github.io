
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
<<<<<<< HEAD
  <meta name="description" content="Synopsis: xargs When you run &ldquo; | xargs &rdquo;, and the result of (only) running is: &lt;cmd1-result-line1&gt;
&lt;cmd1-result-line2&gt;
... &hellip;">
=======
  <meta name="description" content="From ControlTier. Tools comparison: https://en.wikipedia.org/wiki/Comparison_of_open-source_configuration_management_software Now ControlTier is &hellip;">
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
<<<<<<< HEAD
  <link rel="canonical" href="http://leetschau.github.io/posts/44/">
=======
  <link rel="canonical" href="http://leetschau.github.io/posts/44">
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<<<<<<< HEAD
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
=======
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
<<<<<<< HEAD
    <h2>A notes repository for Meteor.js, data mining, Linux, etc.</h2>
=======
    <h2>A note repository aims at Data Mining, Spark, Linux, Python.</h2>
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
<<<<<<< HEAD
    <input type="hidden" name="sitesearch" value="leetschau.github.io">
=======
    <input type="hidden" name="q" value="site:leetschau.github.io" />
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
<<<<<<< HEAD
      <h1 class="entry-title"><a href="/blog/2013/09/05/152615/">Xargs Notes</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-09-05T15:26:15+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>3:26 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Synopsis: xargs <command> <command options></p>

<p>When you run &ldquo;<command> | xargs <command2> <cmd2-options>&rdquo;, and the result of (only) running <command> is:</p>

<pre><code>&lt;cmd1-result-line1&gt;
&lt;cmd1-result-line2&gt;
...
</code></pre>

<p>actually you are running:</p>

<pre><code>&lt;command2&gt; &lt;cmd2-options&gt; &lt;cmd1-result-line1&gt;
&lt;command2&gt; &lt;cmd2-options&gt; &lt;cmd1-result-line2&gt;
...
</code></pre>

<p>If you want add <cmd1-result> before <cmd2-options>, you have to use -I options. Usually we use &ldquo;%&rdquo; as a placeholder. For example, <code>echo '1\n2\n3' |xargs -n 1 echo ok</code> produces:</p>

<pre><code>ok 1
ok 2
ok 3
</code></pre>

<p>while <code>echo '1\n2\n3' |xargs -n 1 -I % echo % ok</code> produces:</p>

<pre><code>1 ok
2 ok
3 ok
</code></pre>

<p>Here &ldquo;-n 1&rdquo; means the maximum number of arguments is 1 in every command line.</p>

<p>So <code>echo '1\n2\n3'|xargs -n 2 echo ok</code> produces:</p>

<pre><code>ok 1 2 
ok 3 
</code></pre>

<p>The following command gives the total lines of java code under current directory (and subdirectories):</p>

<pre><code>find . -name '*.java'|xargs wc -l
</code></pre>

<p>while</p>

<pre><code>find . -name '*.java'|wc -l
</code></pre>

<p>produces how many java files under current directory (and subdirectories).</p>

<p>Note: the quotes of &ldquo;*.java&rdquo; is necessary.</p>

<p>Ref: <a href="http://offbytwo.com/2011/06/26/things-you-didnt-know-about-xargs.html">http://offbytwo.com/2011/06/26/things-you-didnt-know-about-xargs.html</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/09/04/172538/">Fabric Notes</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-09-04T17:25:38+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>5:25 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Installation</h1>

<ul>
<li><p>sudo pip install fabric (verified on Mint 14, 2013-9-4)</p></li>
<li><p>sudo apt-get install fabric (verified on Ubuntu Server 12.04 with goagent, 2013-9-7)</p></li>
</ul>


<h1>Test &ldquo;With&rdquo; Statement of Fabric</h1>

<p>When running fabric command on remote host, if the current directory after &ldquo;with cd(&hellip;)&rdquo; will return to original one? Let&rsquo;s test it.</p>

<p>fabfile.py</p>

<pre><code>from __future__ import with_statement 
from fabric.api import local, settings, abort, run, cd 
def testcd(path): 
    run("pwd") 
    run("ls -l") 
    with cd(path): 
        run("pwd") 
        run("ls -l") 
    run("pwd") 
    run("ls -l") 
</code></pre>

<p>Now run <code>fab -H 10.0.7.142 -u gcp -p gcp@123 testcd:path="zdjk"</code>. The &ldquo;pwd&rdquo; and &ldquo;ls&rdquo; before and after &ldquo;with&rdquo; statement give the same result, which means &ldquo;cd&rdquo; in &ldquo;with&rdquo; statement only take effect in &ldquo;with&rdquo; block. It&rsquo;s cool.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
=======
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
      <h1 class="entry-title"><a href="/blog/2013/09/04/104222/">Continous Delivery Notes</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-09-04T10:42:22+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>10:42 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>From <a href="http://doc36.controltier.org/wiki/ControlTier">ControlTier</a>.</p>

<p>Tools comparison: <a href="https://en.wikipedia.org/wiki/Comparison_of_open-source_configuration_management_software">https://en.wikipedia.org/wiki/Comparison_of_open-source_configuration_management_software</a></p>

<p>Now ControlTier is replaced by rundeck.org.</p>

<p>Fabic is another good tool based on Python. It has a fexpect component to do expect-like automation tasks. Fabric is &ldquo;push&rdquo; model, see <a href="http://mattcallanan.blogspot.com/2013/03/puppet-vs-fabric-for-deploys.html">Puppet vs Fabric for deploys</a>;</p>

<p><a href="https://wiki.jenkins-ci.org/display/JENKINS/RunDeck+Plugin">RunDeck Plugin of Jenkins</a> give a good example of &ldquo;0-click&rdquo; deployment.</p>

<p><a href="http://www.debian-administration.org/articles/671">A simple introduction to fabric</a> give a good explanation of how to use fabric to do deploying jobs.</p>

<p><a href="https://fedorahosted.org/func/">Func</a> is &ldquo;Fedora Unified Network Controller&rdquo;, so it&rsquo;s suited on rpm-based Linux.</p>

<p><a href="http://www.smartfrog.org/">SmartFrog</a> is a Java-based tool, we can use it with Fabric.</p>

<p><a href="http://saltstack.com/">Salt Stack</a> is also a candidate, support push and pull models(<a href="http://serverfault.com/questions/415713/what-advantages-features-does-puppet-or-chef-offer-over-salt-or-vice-versa">http://serverfault.com/questions/415713/what-advantages-features-does-puppet-or-chef-offer-over-salt-or-vice-versa</a>). It has nice Chinese support, see <a href="http://wiki.saltstack.cn/">Salt介绍</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/09/04/101920/">Manage Python Packages With Pip</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-09-04T10:19:20+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>10:19 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Install pip</h1>

<pre><code>sudo apt-get python-pip
</code></pre>

<h1>Install package with pip</h1>

<pre><code>sudo pip install fabric
</code></pre>

<h1>List all installed packages</h1>

<pre><code>pip freeze
</code></pre>

<h2>List some packages</h2>

<pre><code>pip freeze | grep "[F|f]abric"
</code></pre>

<p>Note: Double quotes after grep is necessary;</p>

<h1>Uninstall packages with pip</h1>

<pre><code>sudo pip uninstall Fabric
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/09/02/161537/">Get Coverage Data for Standalone Server With Cobertura</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-09-02T16:15:37+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2013</span></span> <span class='time'>4:15 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Prerequisites</h1>

<p>Copy cobertura.jar (1.9.1), asm-3.0.jar, asm-tree-3.0.jar, jakarta-oro-2.0.8.jar, log4j-1.2.15.jar totally 5 jars to a folder (in this case it is: &ldquo;/home/lichao/apps/coberturaLib&rdquo;).</p>

<p>If using cobertura-2.0.3, copy cobertura.jar and all jars in folder &ldquo;lib&rdquo; to &ldquo;coberturaLib&rdquo;.</p>

<p>The current working directory is project home folder, under which there are 3 folders: cmd, conf, lib.</p>

<h1>Instrument</h1>

<p>Now we need instrument class files under &ldquo;class&rdquo; folder to &ldquo;instru&rdquo; folder:</p>

<pre><code>java -cp "/home/lichao/apps/coberturaLib/*" net.sourceforge.cobertura.instrument.Main --destination instru class
</code></pre>

<p>Note the double quotes of &ldquo;/home&hellip;/coberturaLib/*&rdquo; is necessary.</p>

<p>If you use cobertura-2.0.3, add project dependencies ($PROJ_HOME/lib), too:</p>

<pre><code>java -cp "/home/lichao/apps/coberturaLib/*:../lib/*" net.sourceforge.cobertura.instrument.Main --destination CalcServer --datafile CalcServer/cobertura.ser CalcServer.jar 
</code></pre>

<p>Synopsis:</p>

<pre><code>java -cp &lt;Cobertura_lib&gt; net.sourceforge.cobertura.instrument.Main --destination &lt;dest_folder&gt; --datafile &lt;datafile_path&gt; &lt;target&gt;
</code></pre>

<p>If <target> is a folder containing class files, instrumented class files will be created under <dest_folder>.
If <target> is a jar file, instrumented jar file will be created under <dest_folder>.
If &ldquo;&ndash;destination <dest_folder> is not specified, the instrumented one will overwrite the origin.</p>

<h1>Start Server</h1>

<p>This step equals to &ldquo;unit test&rdquo; in junit-cobertura scenario. The start.sh is:</p>

<pre><code>#!/bin/sh 
CoberturaJar="/home/lichao/apps/coberturaLib/cobertura-2.0.3.jar" 
JARS="$CoberturaJar:conf:./*:lib/*" 
java -cp $JARS -Dnet.sourceforge.cobertura.datafile=cobertura.ser com.boco.deploy.Main 
</code></pre>

<p>Note: The instrumented jar must be add <strong>before</strong> uninstrumented jar in classpath.</p>

<p>Synopsis:</p>

<pre><code>java -cp &lt;cobertura.jar_path&gt;:&lt;other_dependencies&gt; -Dnet.sourceforge.cobertura.datafile=&lt;datafile_path&gt; Server.Main.Class.Name
</code></pre>

<h1>Merge Datafile</h1>

<pre><code>java -cp "coberturaLib-2.0.3/*" net.sourceforge.cobertura.merge.Main --datafile GcpCollector/cmd/cobertura.ser GcpServerCore/cmd/cobertura.ser cobertura.ser
</code></pre>

<h1>Get Report</h1>

<pre><code>java -cp "/home/lichao/apps/coberturaLib/*" net.sourceforge.cobertura.reporting.Main --datafile cobertura.ser --destination ../report ../../src
</code></pre>

<p>The report data will not be written to report files until the server process is down.</p>

<p>Synopsis:</p>

<pre><code>java -cp &lt;cobertura_lib&gt; net.sourceforge.cobertura.reporting.Main --datafile &lt;datafile_path&gt; --destination &lt;report_path&gt; &lt;source_folder&gt;
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/31/223240/">Network Promgramming in Clojure</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-31T22:32:40+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2013</span></span> <span class='time'>10:32 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li><p>TCP echo server: <a href="http://stackoverflow.com/questions/1223352/writing-a-multiplexing-server-in-clojure">http://stackoverflow.com/questions/1223352/writing-a-multiplexing-server-in-clojure</a></p></li>
<li><p>Asynchronous communication framework based on Netty: <a href="https://github.com/ztellman/aleph/wiki">aleph</a></p></li>
<li><p>System admin and deployment tool: <a href="https://github.com/killme2008/clojure-control">clojure-control</a></p></li>
<li><p>Cloud Automation Tool (build Hadoop cluster on Amazon EC2): <a href="http://palletops.com/">Pallet</a></p></li>
<li><p>SSH client based on jsch: <a href="https://github.com/hugoduncan/clj-ssh">clj-ssh</a></p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/30/180938/">Copy, Tag and Branch of Subversion</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-30T18:09:38+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>6:09 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Tag and branch are the same from the point of view of svn server. They are both the &ldquo;copy&rdquo; operation (this is why they use the same menu item in TortoiseSVN, they are actually the &ldquo;svn copy&rdquo; command). Copy operation of svn server will create a link to original revision. So create tag or branch will not double the disk space usage. The disk space usage is actually related with how many files are modified based on a specific revision.</p>

<p>What is the difference of tag and branch? When you create a &ldquo;tag&rdquo;, you mean you will save this link at a &ldquo;baseline area&rdquo; where it&rsquo;s prohibited to do checkout-modify-checkin operation. On the contrary, if you create a &ldquo;branch&rdquo;, you will do checkout-modify-checkin operation in the future for new feature development or bug fix.</p>

<p>Use &ldquo;svn help copy&rdquo; for explanations.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/29/210003/">Auto Deploy Notes</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-29T21:00:03+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>9:00 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
<li>Write a property file: /home/bvt/docs/jenkinsEnv.properties:</li>
</ol>


<p> gcp.job.type=deliver
 gcp.deliver.ip=10.0.7.142
 gcp.deliver.user=gcp
 gcp.deliver.home=/home/gcp
 gcp.deliver.deployFolder=deploy
 gcp.deliver.prompt=gcp@cloud142</p>

<p>Note: Do <strong>not</strong> leave blanks between &ldquo;=&rdquo; and values in property file.</p>

<p> gcp.deliver.home = /home/gcp</p>

<p>will produce wrong value when gotten by expect script.</p>

<ol>
<li><p>Add this file to &ldquo;Build Environment -> Inject environment variables to the build process&rdquo; in Jenkins Job Configure panel with Environment Injector plugin.</p></li>
<li><p>Create a deploy script (deploy.exp) in project base folder:</p></li>
</ol>


<p> #!/usr/bin/expect
 set artifact [lindex $argv 0]
 spawn scp $artifact $env(gcp.deliver.user)@$env(gcp.deliver.ip):$env(gcp.del
 expect eof</p>

<ol>
<li>Create a &ldquo;Conditional step(single)&rdquo; with conditional-buildstep plugin.</li>
</ol>


<p> Run? Strings match</p>

<p>  String 1: ${ENV,var=&ldquo;gcp.job.type&rdquo;}</p>

<p>  String 2: deliver</p>

<p> Builder: Execute Shell</p>

<p>  Command: ./deploy.exp build/*.zip</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/28/181723/">Create Shortcut for SSH Hosts</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-28T18:17:23+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>6:17 pm</span></time>
        
      </p>
    
  </header>


<<<<<<< HEAD
  <div class="entry-content"><p>You frequently visit host 10.0.7.141 for example. It&rsquo;s a waste to type &ldquo;ssh <a href="&#x6d;&#x61;&#x69;&#x6c;&#x74;&#x6f;&#x3a;&#103;&#x63;&#x70;&#x40;&#x31;&#x30;&#x2e;&#48;&#46;&#x37;&#x2e;&#x31;&#52;&#49;">&#103;&#x63;&#x70;&#64;&#49;&#48;&#x2e;&#x30;&#46;&#55;&#46;&#x31;&#x34;&#x31;</a>&rdquo; every time you connect it. So you can create a file ~/.ssh/config, and add follow lines to it:</p>
=======
  <div class="entry-content"><p>You frequently visit host 10.0.7.141 for example. It&rsquo;s a waste to type &ldquo;ssh <a href="&#x6d;&#x61;&#105;&#x6c;&#x74;&#111;&#x3a;&#x67;&#x63;&#112;&#x40;&#x31;&#48;&#x2e;&#x30;&#46;&#55;&#46;&#49;&#x34;&#x31;">&#103;&#99;&#112;&#x40;&#x31;&#48;&#46;&#48;&#46;&#55;&#46;&#x31;&#52;&#x31;</a>&rdquo; every time you connect it. So you can create a file ~/.ssh/config, and add follow lines to it:</p>
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c

<pre><code>Host 141 
Hostname 10.0.7.141 
User gcp 
[Port 22]
[IdentityFile ~/.ssh/id_rsa.pub]
</code></pre>

<p>Now you can use &ldquo;ssh 141&rdquo; to connect to this host.
Or use &ldquo;scp user@141:/home/user/&rdquo; to copy files.</p>

<p>With key authorization (see note &ldquo;Login SSH Server without Password&rdquo;), you can connect to this host without inputing password. You can copy local file to remote host with &ldquo;scp myfile 141:/target/path&rdquo;, and copy file on remote host to local folder with &ldquo;scp 141:/source/path/to/file /target/folder&rdquo;.</p>

<p>Note: IdentifyFile is the shortcut of &ldquo;-i /path/to/public-key&rdquo; option of &ldquo;ssh&rdquo; command;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/28/180743/">Create Shortcut to Get Jar File Meta Information</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-28T18:07:43+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>6:07 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>You have to get meta information of cobertura.jar with command &ldquo;unzip -q -c cobertura.jar META-INF/MANIFEST.MF&rdquo;. It&rsquo;s too long to write so we gonna create a shortcut &ldquo;getmeta&rdquo; for this command. Then we can use &ldquo;getmeta cobertura&rdquo; to get the same information.</p>

<p>In zsh, you can add following snippet into .zshrc:</p>

<p> getmeta() { unzip -q -c &ldquo;$*&rdquo;.jar META-INF/MANIFEST.MF }</p>

<p>You can also use command &ldquo;alias&rdquo; to define this. But it&rsquo;s not general like above.</p>

<p>In bash, add the following snippet to .bashrc or .bash_profile:</p>

<p> getmeta() { unzip -q -c &ldquo;$@&rdquo;.jar META-INF/MANIFEST.MF }</p>

<p>Ref:</p>

<p><a href="http://stackoverflow.com/questions/2904677/alias-with-parameters">http://stackoverflow.com/questions/2904677/alias-with-parameters</a></p>

<p><a href="http://stackoverflow.com/questions/4060880/shell-bash-passing-argument-to-alias">http://stackoverflow.com/questions/4060880/shell-bash-passing-argument-to-alias</a></p>
</div>
  
  


    </article>
  
<<<<<<< HEAD
=======
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/28/111229/">Show Output and Internal Diagnostics of Expect Script in Different Terminals</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-28T11:12:29+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>11:12 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
<li><p>Start a terminal, run <code>tty</code> to get its device file name, &ldquo;/dev/pts/0&rdquo; in this case.</p></li>
<li><p>Start another terminal. Create a expect script &ldquo;testDebug.exp&rdquo;:</p>

<pre><code> #!/usr/bin/expect 
 set prompt "\\\[hadoop@49server\\s.*\\\]\\\$\\s" 
 spawn telnet 10.0.2.49 
 exp_internal 1 
 expect "login:" 
 send "hadoop\r" 
 expect "Password:" 
 send "h\r" 
 expect -re $prompt 
 send "df -h\r" 
 expect -re $prompt 
 send "exit\r" 
 expect eof
</code></pre></li>
<li><p>Give execution priority to testDebug.exp (using chmod) and run it: <code>./testDebug.exp 2&gt; /dev/pts/0</code>. You can see all diagnostics information are printed in the terminal &ldquo;/dev/pts/0&rdquo; while all &ldquo;normal&rdquo; informal are printed in the second terminal window.</p></li>
</ol>


<p>Explanation: the command &ldquo;exp_internal 1&rdquo; send all pattern diagnostics to standard error, which is specified as &ldquo;2> &hellip;&rdquo; in the command line. Meanwhile, a terminal&rsquo;s id can be get from &ldquo;tty&rdquo; command.</p>

<p>You can use &ldquo;exp_internal -f <log_file_name> 0&rdquo; instead of &ldquo;exp_internal 1&rdquo; to save all standard output and diagnostics information into file <log_file_name>. while only standard output can be seen on the terminal.</p>

<p>Reference: Section &ldquo;Enabling Internal Diagnostics&rdquo; and &ldquo;Logging Internal Diagnostics&rdquo; in chapter 7:&ldquo;Debugging Patterns And Controlling Output&rdquo; of &ldquo;Exploring Expect&rdquo; by Don Libes.</p>

<p>Notes: If you run command &ldquo;ls -l /dev/pts/*&rdquo;, you can get the following outputs:</p>

<pre><code>crw--w---- 1 lichao tty 136, 0 Aug 28 11:56 0
...
</code></pre>

<p>Notice that the file type are &ldquo;c&rdquo; (the first character of the line), which stands for &ldquo;character device&rdquo; (standard input/output, like keyboard and screen, relative to &ldquo;block device&rdquo;, like hard drives). See &ldquo;<a href="http://en.wikipedia.org/wiki/Unix_file_types#Device_file">http://en.wikipedia.org/wiki/Unix_file_types#Device_file</a>&rdquo; for details.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/27/111531/">Check Directory Existence in Shell</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-27T11:15:31+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>11:15 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The following command in one line can check if a directory exists. You can check the return value (&ldquo;yes or &#8220;no) then decide what to do.</p>

<p> $ if [ -d /home/gcp/deploy ] ; then echo &ldquo;yes&rdquo; ; else echo &ldquo;no&rdquo; ; fi</p>
</div>
  
  


    </article>
  
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
  <div class="pagination">
    
      <a class="prev" href="/posts/45">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/43">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
<<<<<<< HEAD
        <a href="/blog/2015/05/28/102822/">Penetrate GFW With Sshuttle</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/27/180718/">Store Small Images in MongoDB via Base64</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/26/174257/">Meteor基础知识之系统篇</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/15/142023/">Run MongoDB Server on Docker in VPS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/10/091733/">Git初体验</a>
=======
        <a href="/blog/2015/05/26/174257/">Meteor基础知识之系统篇</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/15/142023/">Run MongoDB Server on Docker in VPS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/10/091733/">Git初体验</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/08/155132/">Run Mongo Scripts in Shell</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/07/151147/">Find Verified User in MongoDB</a>
>>>>>>> 07ed3639e773b839d5491a4f5cd36dc20296d73c
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
