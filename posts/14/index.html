
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
  <meta name="description" content="LinuxMint sudo aptitude install empathy telepathy-gabble telepathy-salut telepathy-rakia
">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leetschau.github.io/posts/14/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
    <h2>A notes repository for Meteor.js, data mining, Linux, etc.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="leetschau.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/20/100341/">Using Empathy as Local Network Instant Messaging Tool</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-20T10:03:41+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:03 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>LinuxMint</h1>

<p>sudo aptitude install empathy telepathy-gabble telepathy-salut telepathy-rakia</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/19/153734/">Add Customized Files and Folders Into Deployed Zip File Created by Gradle</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-19T15:37:34+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>3:37 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Creating deployed zip file with gradle is very convenient. But what if I want to add some customized files and folders into this file?</p>

<p>According to <a href="http://stackoverflow.com/questions/5743036/deploy-additional-files-in-gradle-application-plugin">Deploy additional files in Gradle Application Plugin</a>,
creat a &ldquo;dist&rdquo; folder under &ldquo;src&rdquo; in the root of project. Then everything under &ldquo;dist&rdquo; will be copied to zip file created by <code>gradle distZip</code> or <code>gradle installApp</code>.</p>

<pre><code>$ pwd
/home/chad/docs/GDEP-0811
$ mkdir -p src/dist/plugins
$ echo "pwd" &gt; src/dist/plugins/autocmd.sh
$ echo "config1: value1" &gt; src/dist/dep.conf
$ tree src/dist
src/dist
├── dep.conf
└── plugins
    └── autocmd.sh
$ gradle clean installApp
$ tree build/install/gdep
build/install/gdep
├── bin
│   ├── gdep
│   └── gdep.bat
├── dep.conf
├── lib
│   ├── commons-configuration-1.10.jar
│   └── ...
└── plugins
    └── autocmd.sh
$ gradle clean distZip
$ unzip -l build/distributions/gdep-0.4.zip
Archive:  build/distributions/gdep-0.4.zip
  Length      Date    Time    Name
---------  ---------- -----   ----
        0  2014-11-19 15:35   gdep-0.4/
      132  2014-09-29 17:01   gdep-0.4/dep.conf
        0  2014-11-19 15:20   gdep-0.4/plugins/
        6  2014-11-19 15:13   gdep-0.4/plugins/autocmd.sh
        0  2014-11-19 15:35   gdep-0.4/lib/
     7255  2014-11-19 15:35   gdep-0.4/lib/gdep-0.4.jar
    76643  2014-08-14 08:40   gdep-0.4/lib/...
        0  2014-11-19 15:35   gdep-0.4/bin/
     5369  2014-11-19 15:35   gdep-0.4/bin/gdep
     2727  2014-11-19 15:35   gdep-0.4/bin/gdep.bat
---------                     -------
  2180116                     20 files
</code></pre>

<p>Here the file &ldquo;dep.conf&rdquo; and folder &ldquo;plugins&rdquo; is copied directly from $PROJ_ROOT/src/dist.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/13/114946/">Using Pub of Dart With Jayproxy</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-13T11:49:46+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:49 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Dart&rsquo;s pub tool is blocked by GFW. So we have to use it with the help of a proxy.</p>

<p>Modify pubspec.yaml at the root of a Dart project. Then run the following commands at this position:</p>

<pre><code>export http_proxy=http://&lt;username&gt;:&lt;password&gt;@us.jayproxy.net:6000
export https_proxy=http://&lt;username&gt;:&lt;password&gt;@us.jayproxy.net:6000
pub get
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/07/111321/">Virtualizations Based on XenServer</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-07T11:13:21+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:13 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Today I tried to build a vm groups on my PC with XenServer.</p>

<h1>Server</h1>

<p>Download XenServer 6.2.0 installation iso (XenServer-6.2.0-install-cd.iso) from <a href="http://xenserver.org/">XenServer.org</a>.
Use this iso to install on the bare metal OS of VM host.
Setup network with dhcp.</p>

<p>After installation and reboot, the Configuration window of XenServer 6.2 appears.
Under &ldquo;Network and Management Interface&rdquo;, I got the IP of the host is 10.31.4.89.</p>

<h1>Client</h1>

<p>So far the linux client is much poor than its Windows couterpart.
For example, the &ldquo;console&rdquo; tab and context menu (right click menu) can&rsquo;t work properly on OpenXenManager.
It&rsquo;s recommended to use XenCenter on Windows as GUI tool,
and <code>xe</code> command on host as CLI tool to perform VM management,
Use <code>xe help --all</code> to list all available subcommands.
<code>xl</code> is also a good tool.</p>

<h2>Linux Client</h2>

<p>On LinuxMint 17, install <a href="http://sourceforge.net/projects/openxenmanager/">OpenXenManager</a> with <code>sudo aptitude install openxenmanager</code>;</p>

<p>Start it with <code>openxenmanager</code>, create a new server with &ldquo;Hostname&rdquo; 10.31.4.89, &ldquo;User name&rdquo; root, and &ldquo;Password&rdquo; the one set previously.
Connect to this server.</p>

<p>On my laptop, run following commands to add a new SR (storage repository) to provide guest installation ISO files.</p>

<pre><code>$ ssh root@10.31.4.89
# mkdir /vms
# xe sr-create name-label=Local type=iso device-config:legacy_mode=true content-type=iso device-config:location=/vms
# exit
$ scp ~/warez/OS/CentOS-6.5-x86_64-minimal.iso root@10.31.4.89:~/vms/
$ ssh root@10.31.4.89
# openxenmanager
</code></pre>

<p>You can use <code>xe sr-detach</code>, then <code>xe sr-forget</code> to remove SR.
Use <code>lvs</code> to list LVM information about vm&rsquo;s disks.</p>

<h2>Windows Client</h2>

<p>Download XenCenter Windows Management Console (XenServer-6.2.0-XenCenter.msi) from Download page of <a href="http://xenserver.org/">XenServer.org</a>.
Install and start it.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/04/145629/">JavaScript Development Environment Setup</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-04T14:56:29+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>2:56 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>vim</h1>

<p>Update at 2015-9-12:</p>

<p>(Optional) Install node.js and jshint (with <code>npm install -g jshint</code>).
Now you can check syntax with <code>jshint myfile.js</code>.</p>

<p>Then install lint plugin <a href="https://github.com/scrooloose/syntastic">scrooloose/syntastic</a> for vim:</p>

<ol>
<li><p>add <code>Plugin 'scrooloose/syntastic'</code> into ~/.vimrc;</p></li>
<li><p>Run <code>vim +PluginInstall</code>, there are totally 6.0MB for its repo,
so you have to wait quite a while;</p></li>
</ol>


<p>Now open a js file, and do some editing.
When file saved, syntastic will mark the lines with errors.
Otherwise, check &ldquo;2.1. Requirements&rdquo; in syntastic page above.</p>

<hr />

<p>Update at 2015-5-11:</p>

<p>See <a href="http://oli.me.uk/2013/06/29/equipping-vim-for-javascript/">Equipping Vim for JavaScript</a>.</p>

<p>The plugin <a href="https://github.com/Valloric/YouCompleteMe#ubuntu-linux-x64-super-quick-installation">YouCompleteMe</a> is very big
(about 200MB for now).
You have to wait quite a while when install this plugin using Vundle.</p>

<p>When install plugin with Vundle, you have to save .vimrc and <strong>quit</strong>,
then run <code>PluginInstall</code> or <code>PluginClean</code> in a new vim window.</p>

<p>Note: To remove a plugin managed by Vundle in vim, remove declaration in .vimrc, then run <code>PluginClean</code> in vim.</p>

<p>&mdash; Old Post &mdash;</p>

<ol>
<li><p>Install nvm;</p></li>
<li><p>Install node with nvm;</p></li>
<li><p>Install jshint with npm, which is a tool in node: <code>npm install -g jshint</code>;</p></li>
<li><p>Check syntax with <code>jshint myfile.js</code>;</p></li>
<li><p>Check html syntax with Tidy, which is installed on Ubuntu with <code>apt-get install tidy</code>;</p></li>
</ol>


<p>Ref: <a href="http://stackoverflow.com/questions/473478/vim-jslint">VIM + JSLint?</a></p>

<h1>Eclipse</h1>

<p>Eclipse&rsquo;s javascript development tools JSDT is part of WTP (web tools platform),
which is a built-in plugin of &ldquo;Eclipse JEE&rdquo; (Eclipse for Java EE Developers).</p>

<p>Its editor has auto syntax checker. Config it in [Window -> Preferences -> JavaScript -> Editor].
Config its code style (tab size, for example) at [Window -> Preferences -> JavaScript -> Code Style -> Formatter].</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/03/171108/">Spark任务自动执行脚本</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-03T17:11:08+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>5:11 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>当前目录下创建两个脚本，运行脚本runJobs.sh和WFP任务脚本模板wfp-origin：</p>

<p>runJobs:</p>

<pre><code>#!/bin/bash

BMIN_CNT_WEI_LIST='0.5 0.3'
MIN_SUP_LIST='0.004 0.0002'

rm -rf {result,script}
mkdir {result,script}
origin_job=wfp-origin
for bmin_cnt_wei in $BMIN_CNT_WEI_LIST; do
    for min_sup in $MIN_SUP_LIST; do
        echo MIN_SUP is: $min_sup , Bmin count weight is: $bmin_cnt_wei
        new_script_name=wfp-bmin-${bmin_cnt_wei}-sup-${min_sup}
        sed "4s/xxx/$min_sup/" $origin_job &gt; script/tmp
        sed "11s/xxx/$bmin_cnt_wei/" script/tmp &gt; script/$new_script_name
        rm script/tmp
        echo Run shell script/$new_script_name
        spark-shell -i script/$new_script_name
        echo ------Calc is over------
    done
done
</code></pre>

<p>wfp-origin:</p>

<pre><code>import Math.ceil
import scala.io

val MIN_SUP = xxx
val MIN_CONF = 0.1
val MAX_RELATION_ORDER = 3
val DATA_FILE = "input"
val SEP = "\001"
val WEI_IDX = 5
val MIN_INT_ID_LEN = 5
val BMIN_CNT_WEI = xxx

val RES_FILE = "result/wfp-result-bmin-" + BMIN_CNT_WEI.toString + "-sup-" + MIN_SUP.toString

val rawData = sc.textFile(DATA_FILE).distinct
val data = rawData.filter(x =&gt; x.split(SEP)(1).split("_")(0).size &gt; MIN_INT_ID_LEN)   
val item_count = data.map(_.split(SEP)(1)).map(w =&gt; (w,1)).reduceByKey(_+_)
val wids = data.map(_.split(SEP)(0))
val MAX_ITEM = wids.map(w =&gt; (w,1)).reduceByKey(_+_).map(_._2).max
val T = wids.distinct.count

val weight = data.map(x =&gt; (x.split(SEP)(1), x.split(SEP)(WEI_IDX).toFloat)).distinct
val rule_sets = weight.top(2000)
scala.tools.nsc.io.File(RES_FILE).writeAll(rule_sets.map(_.toString).reduce(_ + "\n" + _))
exit
</code></pre>

<p>这里的wfp-orgin只是一个示例，根据自己的脚本调整具体内容，但最后一行"exit"必须有，否则不能退出spark shell执行后面的任务。</p>

<p>需要修改的参数用空格分开定义在一个字符串里，例如上面的BMIN_CNT_WEI_LIST和MIN_SUP_LIST，
脚本创建script目录，保存新生成的脚本，以及result目录，保存计算结果。</p>

<p>配合tmux，可以在tmux上运行runJobs.sh，下班时从tmux上detach出来，第二天上班时在attach上去看结果。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/03/134818/">SparkR in Action</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-03T13:48:18+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>1:48 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Getting online manual: > help(map)</p>

<blockquote><p>sc &lt;- sparkR.init(&ldquo;local&rdquo;)
lines &lt;- textFile(sc, &ldquo;/home/boco/datamine/alarm_bd_05.txt&rdquo;)
count(lines)
14/11/03 09:45:43 INFO FileInputFormat: Total input paths to process : 1
[1] 7963078</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/31/092340/">Customize Login Screen of LinuxMint 17</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-31T09:23:40+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2014</span></span> <span class='time'>9:23 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I think the default LinuxMint login screen is not cool, need a new backgroud picture.
How to change this backgroud picture? In LinuxMint 17 this is done by creating a new login &ldquo;Theme&rdquo; and use it.
According to <a href="http://www.windows-to-linux.com/2014/07/custom-login-screen-background-linux-mint-17/">Custom Login Screen Background On Linux Mint 17</a>
there is 3 steps to achieve this:</p>

<ol>
<li><p>Create a new theme based on the default theme;</p></li>
<li><p>Pack this theme;</p></li>
<li><p>Set it as the login theme.</p></li>
</ol>


<p>Firstly I choose a picture from Variety&rsquo;s Favorites folder as the new backgroud.
Then run following commands:</p>

<pre><code>sudo cp -r /usr/share/mdm/html-themes/Mint-X ~/StarWorld
cp ~/.config/variety/Favorites/fbdgbcb_-_imgur.jpg ~/StartWorld/bg.jpg
cp ~/.config/variety/Favorites/fbdgbcb_-_imgur.jpg ~/StartWorld/screenshot.jpg
# modify name &amp; description in ~/StarWorld/theme.info
tar czf star-world.tar.gz ~/StarWorld
</code></pre>

<p>Next login to Xfce desktop, startup &ldquo;Login Manager&rdquo;, add a new theme, choose star-world.tar.gz.</p>

<p>Now logout and see the effect.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/29/094400/">Xen on LinuxMint</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-29T09:44:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:44 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This morning I tried to install Debian 7.6 64bit on the DELL PC, but it failed due to some hardware problems.
Then I installed LinuxMint 17 Xfce 64bit on this machine, and partition disk following <a href="http://wiki.xenproject.org/wiki/Xen_Project_Beginners_Guide">Xen Project Beginners Guide</a>:</p>

<blockquote><p>chad@chadpc ~ $ df -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/sda1       276M   45M  218M  17% /boot
/dev/sda2        15G  4.1G  9.8G  30% /
&hellip;</p></blockquote>

<p>where /dev/sda1 is formated as ext2, and /dev/sda2 is formated as ext3, and leave /dev/sda4 unused.</p>

<p>After reboot and login LinuxMint,
modify apt mirror list according to <a href="https://launchpad.net/ubuntu/+archivemirrors">Official Archive Mirrors for Ubuntu</a>,
adding the following lines into /etc/apt/sources.list:</p>

<pre><code>deb http://mirrors.zju.edu.cn/ubuntu/ trusty main
deb-src http://mirrors.zju.edu.cn/ubuntu/ trusty main
deb http://ubuntu.cnssuestc.org/ubuntu/ trusty main
deb-src http://ubuntu.cnssuestc.org/ubuntu/ trusty main
</code></pre>

<p>Then run commands as root:</p>

<pre><code>apt-get update
apt-get install openssh-server
apt-get install lvm2
pvcreate /dev/sda4
vgcreate vg0 /dev/sda4
apt-get install bridge-utils

brctl addbr xenbr0
brctl addif xenbr0 eth0
dhclient xenbr0

aptitude -P install xen-system  # not xen-linux-system
dpkg-divert --divert /etc/grub.d/08_linux_xen --rename /etc/grub.d/20_linux_xen
update-grub
reboot
# you can find now "Ubuntu GNU/Linux, with Xen hypervisor" is the default startup item in grub boot menu
</code></pre>

<h1>Build DomU</h1>

<pre><code>apt-get install xen-tools
</code></pre>

<h2>Using xen-create-image</h2>

<pre><code>xen-create-image --hostname=ch1 --memory=1024gb --vcpus=2 --lvm=vg0 --dhcp --pygrub --dist=wheezy
</code></pre>

<h2>Using xl</h2>

<p>Follow <a href="http://wiki.xen.org/wiki/Debian_Guest_Installation_Using_Debian_Installer">Debian Guest Installation Using Debian Installer</a>.</p>

<p>Here we download 2 net-install disk (which is very small) and install the guest system via Internet.
So the host machine need to connected with Internet, or can connect to another machine which can access Internet,
and defining a proxy when installing.</p>

<p>Select a mirror <a href="http://ftp.cn.debian.org/debian/">ftp.cn.debian.org/debian/</a> in <a href="http://www.debian.org/mirror/list">Debian worldwide mirror sites</a>.
And download vmlinuz and initrd.gz (from <a href="http://ftp.cn.debian.org/debian/dists/stable/main/installer-amd64/current/images/netboot/xen/">http://ftp.cn.debian.org/debian/dists/stable/main/installer-amd64/current/images/netboot/xen/</a>)
to local folder /home/chad/warez/xen-images-debian.</p>

<p>Create a config file /root/deb.cfg:</p>

<pre><code>name = "debian-installer"
memory = 1024
disk = ['phy:/dev/vg0/debian-installer,xvda,w']
vif = [' ']

kernel = "/home/chad/warez/xen-images-debian/vmlinuz"
ramdisk = "/home/chad/warez/xen-images-debian/initrd.gz"
extra = "debian-installer/exit/always_halt=true -- console=hvc0"
</code></pre>

<p>Then run following commands as root:</p>

<pre><code>lvcreate -L 4G -n debian-installer /dev/vg0
xl create -c /root/deb.cfg
</code></pre>

<p>Once installation has completed the guest will shutdown and exit.
Remove the kernel, initrd and extra lines from the guest configuration, here remove the last 3 lines in deb.conf
and replace them with simply:</p>

<pre><code>bootloader = "pygrub"
</code></pre>

<p>Now the deb.conf became:</p>

<pre><code>name = "debian-installer"
memory = 1024
disk = ['phy:/dev/vg0/debian-installer,xvda,w']
vif = [' ']
bootloader = "pygrub"
</code></pre>

<p>Startup the guest system with <code>xl create -c deb.cfg</code>.
List all running vms with <code>xl list</code> in dom0.
Connect this vm with <code>xl console debian-installer</code>.
List all available subcommands of xl with <code>xl help</code>.
Shutdown this vm with <code>xl shutdown debian-installer</code></p>

<h1>Post installation</h1>

<p>The &ldquo;brctl&rdquo; and &ldquo;dhclient&rdquo; commands above only build the network interface during system session.
After system reboot, the bridge interface disappears, thus startup vm will failed.
So we need define the bridge in /etc/network/interfaces, add the following lines into this file:</p>

<pre><code>auto eth0
iface eth0 inet dhcp

auto xenbr0
iface xenbr0 inet dhcp
    bridge_ports eth0
</code></pre>

<p>If after reboot, the eth0 can&rsquo;t get IP address, use <code>ifdown eth0</code> and <code>ifup eth0</code> to refresh eth0.</p>

<p>Update 2014.10.31: these settings cause network connection failed. After removing &ldquo;auto xenbr0&hellip;&rdquo; section, everything goes fine.
So use <code>brctl</code> and <code>dhclient</code> to setup bridge after system startup.</p>

<p>Notes:</p>

<ol>
<li><p>Use <code>lsblk -f</code> to see the volume group and logical volumes.</p></li>
<li><p>pvcreate means &ldquo;create physical volume&rdquo;, vgcreate means &ldquo;create volume group&rdquo;, lvcreate means &ldquo;create logical volume&rdquo;.</p></li>
<li><p>Use <code>lvremove /dev/vg0/debian-installer</code> to remove the logical volume created before.</p></li>
<li><p>Use <code>dpkg-divert --list</code> to list all diversions, and <code>dpkg-divert --remove /etc/grub.d/20_linux_xen</code> to remove a diversion.</p></li>
</ol>


<p>Ref:</p>

<p><a href="http://wiki.xenproject.org/wiki/Xen_Project_Beginners_Guide">Xen Project Beginners Guide</a></p>

<p><a href="https://wiki.debian.org/Xen">Xen on Debian Wiki</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/10/28/182614/">DMShell Up and Running</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-28T18:26:14+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>6:26 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The dmshell is a web server accepting a shell command string, and run it on web server host.</p>

<h1>Setup DataBase</h1>

<h2>Fix Derby Server Startup Failed</h2>

<p>When start Derby server with <code>/home/chad/apps/jdk1.6.0_45/db/bin/startNetworkServer</code>, the following error raised:</p>

<blockquote><p>access denied (&ldquo;java.net.SocketPermission&rdquo; &ldquo;localhost:1527&rdquo; &ldquo;listen,resolve&rdquo;)</p></blockquote>

<p>Solution:</p>

<p>Find out system&rsquo;s JRE. On my laptop, it&rsquo;s /usr/lib/jvm/java-7-openjdk-amd64/jre
Add the following codes into file lib/security/java.policy in this folder:</p>

<pre><code>grant {
    permission java.net.SocketPermission "localhost:1527", "listen";
};
</code></pre>

<p>Ref: <a href="http://stackoverflow.com/questions/21154400/unable-to-start-derby-database-from-netbeans-7-4">http://stackoverflow.com/questions/21154400/unable-to-start-derby-database-from-netbeans-7-4</a></p>

<h2>Create Database and Table</h2>

<p>Run ~/apps/jdk1.6.0_45/db/bin/ij and run following commands:</p>

<pre><code>connect 'jdbc:derby://localhost:1527/dmdb;create=true';
create table shellstatus (id int not null generated by default as identity (start with 1, increment by 1), shellname varchar(40), starttime timestamp, endtime timestamp,status int);
</code></pre>

<p>Then you can use <code>select * from shellstatus;</code> to list all data in this table.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/15">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/13">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/10/05/131004/">Meteor Development Environment on Windows</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/05/110947/">Use Git in Vim With Fugitive</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/03/095227/">A Meteor Package Test Demo</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/01/202107/">Notes of Learn You a Haskell for Great Good</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/29/121847/">Meteor Test With Velocity and Jasmine</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
