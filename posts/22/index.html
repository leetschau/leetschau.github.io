
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
  <meta name="description" content="Website: xhh/vimim Install $ cd ~/docs/tmp
$ git clone https://github.com/xhh/vimim.git
$ mkdir -p /home/chad/.vim/bundle/vimim/plugin
$ cp vimim/ &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leetschau.github.io/posts/22/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
    <h2>A notes repository for Meteor.js, data mining, Linux, etc.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="leetschau.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/06/100153/">Use VimIM as Chinese Input Method</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-06T10:01:53+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:01 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Website: <a href="https://github.com/xhh/vimim">xhh/vimim</a></p>

<h1>Install</h1>

<pre><code>$ cd ~/docs/tmp
$ git clone https://github.com/xhh/vimim.git
$ mkdir -p /home/chad/.vim/bundle/vimim/plugin
$ cp vimim/trunk/plugin/vimim.vim /home/chad/.vim/bundle/vimim/plugin
$ cp vimim/vim/vimfiles/plugin/vimim.txt /home/chad/.vim/bundle/vimim/plugin
</code></pre>

<h1>Config</h1>

<h2>OneKey Mode</h2>

<p>Add &ldquo;let g:vimim_tab_as_onekey=1&rdquo; into ~/.vimrc;</p>

<h1>Usage</h1>

<p>See manual vimim/vimim.html</p>

<h1>Add custom datafile</h1>

<p>VimIM only accept one dictionary file: vimim.txt above. So you can only add items into it, while can&rsquo;t build a new dictionary file.</p>

<h1>Add new item into dictionary</h1>

<p>Add &ldquo;jiqun 集群&rdquo; directly into /home/chad/.vim/bundle/vimim/plugin/vimim.txt.
The vimim.txt must be sorted, so you have to add your items in order.
You can keep the edit window of vimim.txt open. While the file saved, the item will take effect at once without re-open the vim instance using VimIM.</p>

<h1>Query current status of VimIM</h1>

<p>Under insert mode of vim, input &ldquo;vimim&rdquo;, then press <Ctrl-6> or tab.</p>

<h1>Problems</h1>

<ol>
<li><p>分词功能有问题，比如要输入“和部署”，在hebushu后按tab键时，给出的选项是“何不”和“何”，要打出“和”，必须先删除bushu，在he后面按tab键，这种操作太复杂了；</p></li>
<li><p>不能实时显示结果，当写比较长的一段话时，要把整句话打完按tab才能开始转换中文，一旦中间有拼写错误，就得重写；</p></li>
<li><p>词库太小，不仅无法跟搜狗拼音比，也无法跟ibus-pinyin比；</p></li>
<li><p>联系困难，google code被屏蔽的厉害，文档里也没有作者联系方式；</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/04/104147/">Check Battery Status From Terminal in Linux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-04T10:41:47+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:41 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
<li><p>List device name of the battery: <code>upower -e</code>, I got the name is &ldquo;/org/freedesktop/UPower/devices/battery_BAT0&rdquo;;</p></li>
<li><p>Print the status of the battery: <code>upower -i /org/freedesktop/UPower/devices/battery_BAT0</code>;</p></li>
<li><p>Only print the charge persent of the battery: <code>upower -i /org/freedesktop/UPower/devices/battery_BAT0|awk '/^\s*percentage:/ {print $2}'</code></p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/29/144719/">Use X-tile Manage Windows on Linux Desktop Environment</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-29T14:47:19+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>2:47 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Install</h1>

<ol>
<li><p>Download deb package &ldquo;x-tile_2.5-1_all.deb&rdquo; from <a href="http://www.giuspen.com/x-tile/">x-tile website</a>;</p></li>
<li><p><code>sudo dpkg -i x-tile_2.5-1_all.deb</code>;</p></li>
</ol>


<p>Verify: <code>x-tile -h</code> with user who has loged into the desktop environment. User root has no desktop environment, so if you run x-tile as root, you get a &ldquo;Client failed to connect to the D-BUS daemon&rdquo; error.</p>

<h1>Usage</h1>

<p>Use the following command in terminal or input box of the collapsed xfce4-appfinder(Alt-F2):</p>

<p><code>x-tile g 2 3</code>: tile all opened window with 2 rows and 3 columns;</p>

<p><code>x-tile g</code> == <code>x-tile g 0 0</code>: tile all opened window with automatic rows and columns;</p>

<p><code>x-tile y</code>: cycle the order of last tiling operation;</p>

<p><code>x-tile m</code>: maximize all opened window;</p>

<p><code>x-tile M</code>: unmaximize all opened window;</p>

<p><code>x-tile h</code>: tile all opened window horizontally;</p>

<p><code>x-tile v</code>: tile all opened window vertically;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/29/115513/">A Good Tutorial About C++ Syntax and Points</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-29T11:55:13+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:55 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The whole tutorial <a href="http://www.cplusplus.com/doc/tutorial/">C++ Language</a> is concise and helpful. The section <a href="http://www.cplusplus.com/doc/tutorial/pointers/">Pointers</a> is a good introduction of pointers. It distinguishes many myth of pointers, for example:</p>

<ul>
<li><p>It distinguishes &ldquo;pointer declaration&rdquo; of &ldquo;dereference operation&rdquo;. They use both the same operator &ldquo;*&rdquo;, but are different things.</p></li>
<li><p>Pointer and array are largely the same, but an import difference: pointer can be reassigned, while array variable can&rsquo;t.</p></li>
<li><p>Incrementation of a pointer produce different result regarding to the data type it referenced. Say a pointer p has the address 1000, according to its referenced type, the incrementation results are:</p>

<p>  char * p; p = 1000; p++ is 1001;
  short * p; p = 1000; p++ is 1002;
  long * p; p = 1000; p++ is 1004;</p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/28/162120/">Mechanical Keyboard</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-28T16:21:20+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>4:21 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Compared with regular membrane keyboard, mechanical keyboard are more suitable for power PC users, like coders and game players.</p>

<p>Brand:</p>

<ul>
<li><p>Cherry</p></li>
<li><p>Keycool</p></li>
<li><p>Filco</p></li>
</ul>


<p>Ref:</p>

<ul>
<li><p><a href="http://www.pcworld.com/article/240939/mechanical_keyboards_should_you_switch_.html">Mechanical Keyboards: Should You Switch?</a></p></li>
<li><p><a href="http://www.pcworld.com/article/242037/mechanical_keyboard_faq_pick_the_right_switch.html">Mechanical Keyboard FAQ: Pick the Right Switch</a></p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/28/105855/">Python Console Debugger</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-28T10:58:55+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:58 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Create a python file and debug it in gdb style with pdb:</p>

<pre><code>$ pdb testpdb.py
&gt; /home/chad/docs/tmp/testpdb.py(1)&lt;module&gt;()
-&gt; aa = 3
(Pdb) help
...
(Pdb) help l
...
(Pdb) l
  1  -&gt; aa = 3
  2     bb = 4
  3     cc = aa + bb
  4     print(cc)
[EOF]
(Pdb) w
  /usr/lib/python2.7/bdb.py(400)run()
-&gt; exec cmd in globals, locals
  &lt;string&gt;(1)&lt;module&gt;()
&gt; /home/chad/docs/tmp/testpdb.py(1)&lt;module&gt;()
-&gt; aa = 3
(Pdb) n
&gt; /home/chad/docs/tmp/testpdb.py(2)&lt;module&gt;()
-&gt; bb = 4
(Pdb) b 4
Breakpoint 1 at /home/chad/docs/tmp/testpdb.py:4
(Pdb) c
&gt; /home/chad/docs/tmp/testpdb.py(4)&lt;module&gt;()
-&gt; print(cc)
(Pdb) w
  /usr/lib/python2.7/bdb.py(400)run()
-&gt; exec cmd in globals, locals
  &lt;string&gt;(1)&lt;module&gt;()
&gt; /home/chad/docs/tmp/testpdb.py(4)&lt;module&gt;()
-&gt; print(cc)
(Pdb) p bb
4
(Pdb) c
7
The program finished and will be restarted
&gt; /home/chad/docs/tmp/testpdb.py(1)&lt;module&gt;()
-&gt; aa = 3
(Pdb) q
</code></pre>

<p>The command is exactly the same with gdb.</p>

<p>On some OS like ArchLinux, there isn&rsquo;t &ldquo;pdb&rdquo; command, so you have to find the location of &ldquo;pdb.py&rdquo;, then define an alias in ~/.zshrc:</p>

<pre><code>$ locate pdb.py
...
/usr/lib/python3.4/pdb.py
...
$ echo 'alias pdb="/usr/lib/python3.4/pdb.py"' &gt;&gt; ~/.zshrc
</code></pre>

<p>Now you can use &ldquo;pdb <script_file_name>&rdquo; as in Mint.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/28/084746/">Modify SSH Welcome Message of Linux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-28T08:47:46+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:47 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The ssh welcome message of a Linux OS is stored in file /etc/motd. So modify it for customization.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/28/082704/">Reminder Application on Linux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-28T08:27:04+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:27 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Alarm Clock</h1>

<ol>
<li><p>sudo apt-get install alarm-clock</p></li>
<li><p>Alt-F2: alarmclock, or <code>alarmclock &amp;</code> from command line;</p></li>
</ol>


<p>Of course Thunderbird is a solution, but is a heavy one.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/27/193340/">Install Raspberry Pi</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-27T19:33:40+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>7:33 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
<li><p>Format the SD card with &ldquo;FAT' format;</p></li>
<li><p>Download Noob.zip from raspi&rsquo;s website, unzip all files to the SD card, no need to &ldquo;dd&rdquo; or something else;</p></li>
<li><p>Insert SD card, power line, keyboard, mouse and HDMI cable to TV;</p></li>
<li><p>Open TV, switch to &ldquo;AIR-LINE&rdquo; mode, then it will be the Screen;</p></li>
<li><p>Check the OS you want to install, Respbian in my case, and it will install it on the SD card;</p></li>
<li><p>After the installation, the raspi-config interface appears, it&rsquo;s a TUI, use keyboard finish some settings, such as modify user password;</p></li>
<li><p>After reboot, login with username &ldquo;pi&rdquo; and password &ldquo;raspberry&rdquo; if you didn&rsquo;t modify it at the previous step;</p></li>
<li><p>Now you can start GUI with &ldquo;startx&rdquo;, the default desktop environment is LXDE; The ssh server is installed by default;</p></li>
</ol>


<p>That&rsquo;s it.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/23/171938/">Debug Binary File Reading C++ Codes With Gdb</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-23T17:19:38+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>5:19 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We need debug a C++ file, which read and analyze a binary file. We use gdb and xxd in this case. In tmux, split a window horizontally, run gdb in the upper bigger pane, and list file content in lower smaller pane.</p>

<pre><code>$ tmux new -s basic
A-f,-   // split window, I define &lt;prefix&gt; of tmux as A-f in ~/.tmux.conf: set -g prefix M-f
A-f,JJ  // make upper pane larger
$ xxd -l 33 &lt;input-binary-file&gt;.dat   // print first 32 bytes of this file
0000000: 202a 463b 862e d108 2100 ab55 8006 f407   *F;....!..U....
0000010: 0000 0000 0a0e 0401 0102 1800 5201 0501  ............R...
0000020: 15
A-f,k   // jump to upper window
$ cat readfile.cc
#include &lt;fstream&gt;
#include &lt;iterator&gt;
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
using namespace std;

typedef unsigned char BYTE;

BYTE *read_section(FILE *istream, int *length);

int main() {
    string filename = "/home/chad/docs/eclipsews/MrParser/doc/ns-output/1296_2014_04_25_10_00_MR.dat";
    char *fn = const_cast&lt;char*&gt;(filename.c_str());
    FILE *rstream = fopen(fn, "rb"); // 打开.dat文件
    BYTE *buffer = NULL;
    int length = 0;
    buffer = read_section(rstream, &amp;length);
    fclose(rstream);
    printf("Read file length: %d\n", length);
    return 0;
}

BYTE *read_section(FILE *istream, int *length) {
    int count = 0;
    size_t ret = 0;
    BYTE buf[128];
    BYTE *buffer = NULL;

    ret = fread(buf, sizeof(char), 8, istream); if (8 != ret) return NULL;
    ret = fread(buf, sizeof(char), 2, istream); if (2 != ret) return NULL;
    *length = buf[1] * 256 + buf[0];
    if ( 0 == *length) return NULL;
    buffer = new BYTE[*length];
    fseek(istream, -10, SEEK_CUR);
    ret = fread(buffer, sizeof(char), *length, istream);
    if (*length != ret) {
        delete [] buffer;
        return NULL;
    }
    return buffer;
}
$ g++ -g readfile.cc -o rr
$ gdb rr
l
// list source code, we want to probe the content of variable "buffer" after the "fread" operation. So we add a breakpoint after that line
b 37
r
(gdb) p/x *buffer@33
$1 = {0x20, 0x2a, 0x46, 0x3b, 0x86, 0x2e, 0xd1, 0x8, 0x21, 0x0, 0xab, 0x55, 0x80, 0x6, 0xf4, 0x7, 0x0, 0x0, 0x0, 0x0, 0xa, 0xe, 0x4, 0x1, 0x1,
  0x2, 0x18, 0x0, 0x52, 0x1, 0x5, 0x1, 0x15}
p/x buffer[0]
$2 = 0x20
c
q
</code></pre>

<p>where l=list, r=run, p/x means &ldquo;print value in hex format&rdquo;, c=continue, q=quit.
You can see the bytes of &ldquo;buffer&rdquo; is exactly the same with the output of xxd command: 0x20, 0x2a, &hellip;, 0x15.</p>

<p>The format of gdb&rsquo;s print see <a href="http://www.delorie.com/gnu/docs/gdb/gdb_55.html">8.4 Output formats</a> for details.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/23">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/21">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/08/05/125922/">Meteor实施案例</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/02/113417/">Meteor Development Collaboration</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/31/160627/">Chinese Characters Can't Be Displayed Correctly in Git Log</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/23/121622/">Development Collaboration With Pull Request</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/22/082040/">Running Meteor and Node App on Ubuntu 14.04 VPS</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
