
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
  <meta name="description" content="Install Evernote Install Evernote in Wine: wine Evernote_xxx.exe; Backup Evernote Database File Locally Database file location is: ~/.wine/drive_c/ &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leetschau.github.io/posts/50">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
    <h2>A note repository aims at Data Mining, Spark, Linux, Python.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:leetschau.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/21/092827/">Using Evernote With Wine on Mint</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-21T09:28:27+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2013</span></span> <span class='time'>9:28 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Install Evernote</h1>

<p>Install Evernote in Wine: <code>wine Evernote_xxx.exe</code>;</p>

<h1>Backup Evernote Database File Locally</h1>

<p>Database file location is: ~/.wine/drive_c/users/chad/Local Settings/Application Data/Evernote/Evernote/Databases/leechau.exb</p>

<h1>Query in Evernote</h1>

<p>Add the following command in Custom Actions of AppFinder:</p>

<pre><code>Type: Prefix
Pattern: q. 
Command: env WINEPREFIX="/home/chad/.wine" wine C:\\Program\ Files\\Evernote\\Evernote\\ENScript.exe shownotes /q "%s"
</code></pre>

<p>Now you can <Alt + F2>, input &ldquo;q.ahk&rdquo; to search all notes contains &ldquo;ahk&rdquo; evernote database.</p>

<h1>Create New Note</h1>

<p><code>env WINEPREFIX="/home/chad/.wine" wine C:\\Program\ Files\\Evernote\\Evernote\\ENScript.exe createNote</code> hangs both on Windows7 and linux Wine, likes a Evernote bug. Here is a workaround:</p>

<ol>
<li><p>Use Application shortcuts defined in Keyboard &ldquo;env WINEPREFIX=&rdquo;/home/chad/.wine&#8221; wine C:\Program\ Files\Evernote\Evernote\Evernote.exe&#8221; to activate Evernote window;</p></li>
<li><p>press ctrl+n to create a new note.</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/20/164230/">Manage Vim Plugins With Pathogen</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-20T16:42:30+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>4:42 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Install Pathogen</h1>

<ol>
<li><p>Download pathogen.vim to ~/.vim/autoload;</p></li>
<li><p>Add following lines to ~/.vimrc:</p></li>
</ol>


<p> syntax on</p>

<p> set et</p>

<p> execute pathogen#infect()</p>

<p> call pathogen#helptags()</p>

<p> filetype on</p>

<ol>
<li>mkdir ~/.vim/bundle</li>
</ol>


<h1>Install Plugin</h1>

<p>Unzip the archive file of the plugin under ~/.vim/bundle like this (NerdTree Plugin in this case):</p>

<p>bundle
<code>-- nerdtree
 |-- doc
 | |-- NERD_tree.txt
 |</code>&ndash; tags
 |&ndash; nerdtree_plugin
 | |&ndash; exec_menuitem.vim
 | <code>-- fs_menu.vim
 |-- plugin
 |</code>&ndash; NERD_tree.vim
 <code>-- syntax
 </code>&ndash; nerdtree.vim</p>

<p>Now you can use :NERDTree in vi (you can use :N<tab> to trigger this command).</p>

<h1>Uninstall Plugin</h1>

<p>Just remove plugin directory under ~/.vim/bundle.</p>

<h1>Disable a plugin temporarily</h1>

<p>Add a tilde (&ldquo;~&rdquo;) at the end of the directory name of the bundle. For example: &ldquo;vimerl-1.4.1&rdquo; to &ldquo;vimerl-1.4.1~&rdquo;.</p>

<p>Ref: Line 129 in ~/.vim/autoload/pathogen.vim (or <a href="https://github.com/tpope/vim-pathogen/blob/master/autoload/pathogen.vim">https://github.com/tpope/vim-pathogen/blob/master/autoload/pathogen.vim</a>).</p>

<h1>List all loaded scripts</h1>

<p>:scriptnames (:scrip for short).</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/19/161632/">Analyse Trade_fsm</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-19T16:16:32+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>4:16 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>{ok, Bob}=trade_fsm:start(&ldquo;Bob&rdquo;).
{ok, Tom}=trade_fsm:start(&ldquo;Tom&rdquo;).
trade_fsm:trade(Bob,Tom).
trade_fsm:accept_trade(Tom).</p>

<p>{
 {
  function_clause,
  [
   {
    gen,
    call,
    [
     {ok,&lt;0.34.0>},
     &lsquo;$gen_sync_event&rsquo;,
     {negotiate,{ok,&lt;0.37.0>}},
     30000
    ],
    [{file,&ldquo;gen.erl&rdquo;},{line,146}]
   },
   {
    gen_fsm,
    sync_send_event,
    3,
    [{file,&ldquo;gen_fsm.erl&rdquo;},{line,210}]
   },
   {
    erl_eval,
    do_apply,
    6,
    [{file,&ldquo;erl_eval.erl&rdquo;},{line,568}]
   },
   {
    shell,exprs,
    7,
    [{file,&ldquo;shell.erl&rdquo;},{line,667}]
   },
   {
    shell,
    eval_exprs,
    7,
    [{file,&ldquo;shell.erl&rdquo;},{line,622}]
   },
   {
    shell,
    eval_loop,
    3,
    [{file,&ldquo;shell.erl&rdquo;},{line,607}]
   }
   ]
 },
 {
  gen_fsm,
  sync_send_event,
  [{ok,&lt;0.34.0>},{negotiate,{ok,&lt;0.37.0>}},30000]
 }
}</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/18/114619/">Notes About Krusader</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-18T11:46:19+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>11:46 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Integreted with CLI</h1>

<p>Settings -> Show Terminal Emulator (toggle CLI with Ctrl+Alt+T);</p>

<h2>File Browse and Edit within Krusader</h2>

<p>File Manager (Krusader) + CLI (Konsole) + Text Editor (vi or kate)</p>

<ol>
<li><p>Set &ldquo;Send to Embedded Terminal Emulator&rdquo; at right side of command-line;</p></li>
<li><p>When you locate a file with Krusader then Ctrl+Down (focus on command-line);</p></li>
<li><p>Enter &ldquo;vi&rdquo; or &ldquo;kate&rdquo;, then Ctrl+Enter (add selected file name), then press enter;</p></li>
<li><p>Press Ctrl+Alt+T (show Embedded Terminal Emulator), then you can see vi window;</p></li>
<li><p>When finish editing the file, use &ldquo;:x&rdquo; back to krusader;</p></li>
</ol>


<p>Note: Kate has a build-in terminal and vi-mode.</p>

<h1>Frequently used shortcuts</h1>

<p>Ctrl+.: show/hide hidden files;</p>

<p>ctrl + shift + enter: copy full path to commandline;</p>

<p>ctrl + up/down: focus on panel/command-line (on KDE only left Ctrl is valid for this function);</p>

<h1>Get full path of current file</h1>

<p>Settings -> Configure Krusader -> User Actions -> Start ActionMan -> click button &ldquo;Create new useraction&rdquo; (upper-left corner of the panel):</p>

<p>Identifer: Copy full path;</p>

<p>Category: System;</p>

<p>Title: &amp;Copy full path;</p>

<p>Command: %_Clipboard(&ldquo;%aCurrent%&rdquo;)% (or you can use the green plus botton at right side to build command);</p>

<p>Note: get file full path in shell: <code>realpath target</code>;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/18/100705/">Login SSH Server Without Password</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-18T10:07:05+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>10:07 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
<li><p>create public and private keys on client host: <code>ssh-keygen</code>, when asking for passphrase, press enter directly. This will create public key file(~/.ssh/id_rsa.pub) and private key file(~/.ssh/id_rsa);</p></li>
<li><p>copy public key to remote ssh server:</p>

<p> $ ssh-copy-id user@remote_server</p></li>
</ol>


<p>This will append texts (a line ended with user@client_host) in id_rsa.pub at the end of user@remote_server:/home/user/.ssh/authorized_keys. If ssh-copy-id complains &ldquo;No identities found&rdquo;, you have to specify the identity file (your public key) manually:</p>

<pre><code>$ ssh-copy-id -i ~/.ssh/id_rsa.pub user@remote_server;
</code></pre>

<p>Now you can login remote server with <code>ssh user@remote_server</code> without entering password.</p>

<p>If you want auto-login another remote server, only ssh-copy-id is needed.</p>

<p>If later the remote_server won&rsquo;t trust client_host anymore, needing password to login, just delete the pub key line in /home/user/.ssh/authorized_keys at remote_server.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/13/093824/">Notes About BSD</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-13T09:38:24+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>9:38 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>FreeBSD: mainly for web server;</p>

<p>OpenBSD: mainly for security concerned server;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/08/171405/">Use Gant as a Concise Enhancer of Ant</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-08T17:14:05+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>5:14 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Installation</h1>

<ol>
<li><p>apt-get install groovy;</p></li>
<li><p>apt-get install gant;</p></li>
</ol>


<p>or install gant manually:</p>

<ol>
<li><p>download gant-standalone_1.9.9-1_all.deb from <a href="http://gant.codehaus.org/Prepackaged+Distributions;">http://gant.codehaus.org/Prepackaged+Distributions;</a></p></li>
<li><p>dpkg -i gant-standalone_1.9.9-1_all.deb;</p></li>
</ol>


<h1>Translate ant to gant</h1>

<ol>
<li>write a ant script:</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;project name="MyHadoopRunner" basedir="./" default="run"&gt; 
</span><span class='line'>    &lt;path id="lib.path"&gt; 
</span><span class='line'>        &lt;fileset dir="/home/lichao/apps/hadoop-1.1.2"&gt;
</span><span class='line'>            &lt;include name="**/*.jar" /&gt;
</span><span class='line'>        &lt;/fileset&gt; 
</span><span class='line'>    &lt;/path&gt;
</span><span class='line'>    &lt;target name="compile"&gt;
</span><span class='line'>        &lt;javac srcdir="src" destdir="bin" classpathref="lib.path" /&gt;
</span><span class='line'>    &lt;/target&gt;
</span><span class='line'>    &lt;target name="run" depends="compile"&gt;
</span><span class='line'>        &lt;java classname="chapter1.WordCount" classpathref="lib.path" classpath="bin"&gt;
</span><span class='line'>            &lt;arg value="src"/&gt;
</span><span class='line'>            &lt;arg value="out"/&gt;
</span><span class='line'>        &lt;/java&gt;
</span><span class='line'>    &lt;/target&gt;
</span><span class='line'>&lt;/project&gt; </span></code></pre></td></tr></table></div></figure>


<ol>
<li><p>download ant2gant.groovy from gant website;</p></li>
<li><p><code>groovy ant2gant.groovy build.xml &gt; build.gant</code>;</p></li>
<li><p><code>gant</code>.</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/08/141508/">Install Packages on a Internet-blocked Server</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-08T14:15:08+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>2:15 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Using Proxy</h1>

<p>Verified on Ubuntu Server 12.04, 2013-6-8.</p>

<ol>
<li><p>start a goagent server at 10.21.3.31;</p></li>
<li><p>login in as root, modify any cn.archive&hellip; to us.archive&hellip; in /etc/apt/sources.list;</p></li>
<li><p>use proxy temporarily: <code>export http_proxy=http://10.21.3.31:8087</code>;</p>

<p>use it permament: add the following line to your /etc/apt/apt.conf(substitute your details for address and port):</p>

<p> Acquire::<a href="http::Proxy">http::Proxy</a> &ldquo;<a href="http://10.21.3.31:8087">http://10.21.3.31:8087</a>&rdquo;;</p></li>
</ol>


<p>now you can use apt-get or wget to install something.</p>

<h1>Download &amp; Install</h1>

<h2>RPM-based</h2>

<h3>Download from a internet-connected host</h3>

<p>Get rpm files from cache /var/cache/yum, or use 3rd-party tool yumdownloader:</p>

<pre><code># yum install yum-utils
# yumdownloader --resolve subversion
</code></pre>

<p>Note you can add &ldquo;&ndash;urls&rdquo; to only list download urls instead of downloading RPMs, it can be used as &ldquo;dry-run&rdquo; mode;
If yumdownloader can&rsquo;t resolve dependencies properly, see <a href="http://errors.bz/Questions/yumdownloader-downloads-only-i686-resolved-rpms-153416.html">yumdownloader downloads only i686 resolved rpms</a> for solutions.</p>

<h3>Instll on a isolated host</h3>

<pre><code># rpm -ivh &lt;package-name&gt;.rpm
</code></pre>

<h2>Debian-based</h2>

<h3>aptitude</h3>

<p>Notice that 32bit and 64bit of some packages are uncompatible. So you want to download 64bit packages on a 32bit machine, you have to &ldquo;vagrant up&rdquo; a 64bit VM, download deb files and save them in shared folder.</p>

<h4>Download</h4>

<p>Download package and all its dependencies with aptitude:</p>

<pre><code>`sudo aptitude --download-only install &lt;package-name&gt;`
</code></pre>

<p>This will download deb files to /var/cache/apt/archives. Copy the package and all its dependencies to a folder then run <code>sudo dpkg -i *.deb</code>.
If you are not sure about which is the related packages, use <code>sudo aptitude clean</code> to remove all existing .deb files before download.</p>

<p>Verified by <code>sudo aptitude --download-only install subversion</code> on vagrant box precise64.</p>

<p><code>sudo apt-get download &lt;package-name&gt;</code> will download deb files to current directory, since it does not resolve dependencies. So it&rsquo;s not very useful.</p>

<h4>Install</h4>

<pre><code>`sudo dpkg -i *.deb`
</code></pre>

<p>Ref:
<a href="http://stackoverflow.com/questions/13756800/how-to-download-all-dependencies-and-packages-to-directory">http://stackoverflow.com/questions/13756800/how-to-download-all-dependencies-and-packages-to-directory</a>
<a href="http://stackoverflow.com/questions/4419268/how-do-i-download-a-package-from-apt-get-without-installing-it">http://stackoverflow.com/questions/4419268/how-do-i-download-a-package-from-apt-get-without-installing-it</a></p>

<h3>apt-offline</h3>

<h4>Installation</h4>

<pre><code>`sudo aptitude install apt-offline`
</code></pre>

<h4>Usage</h4>

<ol>
<li><p>Specify what to install on the offline-machine: <code>sudo apt-offline set --update --upgrade --install-packages subversion openjdk-6-jre ant -- apt-offline.sig</code>;</p></li>
<li><p>Downlaod data on a internet-connected machine: <code>apt-offline get --bundle mypack.zip -t 5 apt-offline.sig</code>, where mypack is the downloaded archive and &ldquo;-t  5&rdquo; means &ldquo;download with 5 threads&rdquo;;</p></li>
<li><p>Copy mypack.zip to the offline-machine and extract it: <code>sudo apt-offline install mypack.zip</code>;</p></li>
<li><p>Install it with <code>sudo dpkg -i &lt;packages&gt;.deb</code>.</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/07/101540/">Package Repository for Ubuntu Offline Installation</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-07T10:15:40+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>10:15 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For example, we need install &ldquo;unzip&rdquo; command on a Ubuntu machine without Internet.</p>

<ol>
<li><p>On a online computer, google: unzip site:packages.debian.org, download unzip_6.0-8_i386.deb;</p></li>
<li><p><code>scp unzip_6.0-8_i386 user@remoteServer:/home/user</code>;</p></li>
<li><p>on remoteServer: <code>dpkg -i unzip_6.0-8_i386</code>;</p></li>
</ol>


<p>bingo.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/07/082016/">Install Postgresql Database for Sonar</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-07T08:20:16+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>8:20 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Setup Postgresql Server</h1>

<p>Use &ldquo;cross distribution packages&rdquo; postgres_9.2.4-1.i386.openscg.deb and install it on Mint 14. This kind of installer can be installed without GUI environment, suitable for Ubuntu Server. Installer of Postgresql is much smaller than its mysql counterpart.</p>

<p>You can follow <a href="http://wiki.openscg.com/index.php/Postgres_9.1_DEB">the instructions at OpenSCG</a> to setup server and manipulate data.</p>

<ol>
<li><p>Download &ldquo;cross distribution packages&rdquo; postgres_9.2.4-1.i386.openscg.deb;</p></li>
<li><p>install it with <code>dpkg -i</code>;</p></li>
<li><p>start service: <code>/etc/init.d/postgres-9.2-openscg start</code>;</p></li>
<li><p>verify service: <code>invoke-rc.d postgres-9.2-openscg status</code>, and <code>su postgres</code> to verify if user postgres has been created;</p></li>
<li><p><code>. /opt/postgres/9.2/pg92-openscg.env</code></p></li>
<li><p>verify connection: <code>psql</code>, then you can see the postgresql prompt &ldquo;postgres=#&rdquo;, use &ldquo;\l&rdquo; to list all databases;</p></li>
</ol>


<h1>Setup Connection between Sonar and Postgresql database</h1>

<ol>
<li><p>build sonar database in Postgresql</p>

<ol type="a">
<li>create user sonar: <code>postgres=# create user sonar with password 'sonar';</code>, notice you must &ldquo;;&rdquo; at end of command,</li>
<li>verify: <code>postgres=# \du</code>;</li>
<li>create database: <code>postgres-# create database sonar with owner sonar encoding 'UTF8';</code></li>
<li>verify: <code>postgres=# \l</code>;</li>
</ol>
</li>
<li><p>modify sonar jdbc url: modify &ldquo;sonar.jdbc.url&rdquo; as &ldquo;jdbc:postgresql://localhost/sonar&rdquo; in file $SONAR_HOME/conf/sonar.properties (remember comment out default h2 jdbc url);</p></li>
<li><p>start sonar server: <code>$SONAR_HOME/bin/sonar.sh console</code>;</p></li>
<li><p>verify: <code>psql -h localhost -d sonar -U sonar</code>, then <code>sonar=&gt; select table_name from information_schema.tables where table_schema='public';</code>, you can see &ldquo;49 rows&rdquo; at the bottom of the output;</p></li>
</ol>


<p>Note 2: When upgrade or reinstall SonarQube, and after modifying configuration file, you have to goto <a href="http://10.0.2.74:9000/setup">http://10.0.2.74:9000/setup</a> to upgrade database manually, or you will see &ldquo;sonar is under maintenance. please check back later&rdquo;.</p>

<h1>Enable Remote Access to Postgresql Server(unnecessary for Sonar)</h1>

<p>(updated at 2013.12.23: The following operation is very <strong>dangerous</strong> and not preferred.</p>

<p>Ref: <a href="http://serverfault.com/questions/110154/whats-the-default-superuser-username-password-for-postgres-after-a-new-install/325596#325596">http://serverfault.com/questions/110154/whats-the-default-superuser-username-password-for-postgres-after-a-new-install/325596#325596</a></p>

<ol>
<li><p>setup password for user postgres: <code>sudo passwd postgres</code>;</p></li>
<li><p>login as postgres: <code>su postgres</code> (the $HOME on Ubuntu should be /etc/postgres/9.2);</p></li>
<li><p>add a line in data/pg_hba.conf: &ldquo;host all all 0.0.0.0/0 md5&rdquo;;</p></li>
<li><p>modify listen_addresses=&ldquo;127.0.0.1&rdquo; to &ldquo;*&rdquo; in data/postgresql.conf;</p></li>
<li><p>verify(on client machine): <code>psql -h 10.21.3.31 -U postgres -d postgres</code> (-U means username, -d means database);</p></li>
</ol>


<p>or use squirrel-sql client: download driver jar postgresql-9.2-1002.jdbc4.jar at jdbc.postgresql.org and copy to $SQUIRREL_HOME/lib, start squirrel-sql, create a connection with url=&ldquo;jdbc:postgresql://10.21.3.31/postgres&rdquo;, username=&ldquo;postgres&rdquo; and password=&ldquo;&hellip;&rdquo;;</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/51">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/49">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/04/18/140631/">4月17日讲座文字稿</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/17/151844/">Linux Mint System Provision</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/16/172913/">Fzf让命令行更方便</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/15/105035/">How to Sync a Fork on Github</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/08/161006/">Python的Generator和yield</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
