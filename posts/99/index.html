
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
  <meta name="description" content="我们需要将文字保存在磁盘上，但磁盘上只能存储0和1（实际上是存储介质的两种状态），不能存储文字，这就出现了一个问题，如何将文字转换为二进制数字串？ 文件的编码/解码就是解决文字&lt;=>二进制串这一环节如何相互转换的问题。 简单地说，GBK和Unicode分别是一种码表， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leetschau.github.io/posts/99">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
    <h2>A note repository aims at Data Mining, Spark, Linux, Python.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:leetschau.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/12/135950/">文字的编码问题</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-12T13:59:50+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>1:59 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>我们需要将文字保存在磁盘上，但磁盘上只能存储0和1（实际上是存储介质的两种状态），不能存储文字，这就出现了一个问题，如何将文字转换为二进制数字串？</p>

<p>文件的编码/解码就是解决文字&lt;=>二进制串这一环节如何相互转换的问题。</p>

<p> 简单地说，GBK和Unicode分别是一种码表，也就是为每一个字符指定一个两个字节组成的代码，例如 “汉”字的Unicode编码为0x6C49，GBK编码为0xBABA（0x是一个字头，表示后面的是16进制字串）。</p>

<p> Unicode编码 Unicode由ISO（国际标谁化组织）制定，它虽然解决了各种语言之间转换的难题，但也有问题，首先是不论什么字符都2个字节表示，网络上英文信息占大部分，由此造成的空间浪费很可观，其次是 Unicode不兼容ASCII编码方案，为了解决这些问题，出现了 UTF-8方案。</p>

<p> Unicode到UTF-8的转换方法详见 字符编解码的故事 。</p>

<p> GBK编码 GBK编码规则：《汉字内码扩展规范(GBK)》（ 全国信息技术标准化技术委员会 ）：
 01-09区为特殊符号；16-55区为一级汉字，按拼音排序；56-87区为二级汉字，按部首/笔画排序。
每个汉字及符号以两个字节来表示。第一个字节称为“高位字节”，第二个字节称为“低位字节”，用这个字的区、位号加上0xA0就得到了对应的字节码。例如“啊”字是 第16区第1个字，所以 区位码是 1601 ， 编码方法：0xA0+ 16 = 0x B0 ， 0xA0+ 1 = 0x A1 ，所以得到“啊”的 字节码  B0A1 ，可以用UltraEdit查看字符的字节码验证。</p>

<p> GB2312是GBK的早期版本，能表示6000个汉字，由于容量较小，现已被GBK取代。</p>

<p> 解码过程</p>

<p> 在Windows系统中打开文件时，使用猜的方式选择解码方案。如果文件开头使用了FEFF或FFFE，就认为是Unicode/UTF-8编码，否则为ANSI编码，在中文系统下，就是用GBK解码。GBK解码时，如果一个字节大于 0x7F（ 127），就证明这个字节与后面的字节组成了一个汉字，由于汉字的字节码总大于0xA0，英文字节码总小于 0x7F ，因此二者泾渭分明，不会混淆。</p>

<p> 用猜的方式确定文件的编码方案绝大多数情况下没有问题，但凡事总有特例，详见 字符编解码的故事 对“联通”编码/解码过程的说明。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/11/173852/">用Python做不同进制间的数字转换</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-11T17:38:52+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>5:38 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>将其他进制数字转换为10进制数字</p>

<p> 调用Python内置int()函数把该字串转为数字。以下为在Python解释器编程环境下的操作示范：
把十六进制的字串转为十进制数字：</p>

<blockquote><blockquote><blockquote><p>int(&lsquo;ff&rsquo;, 16)
255
 把十进制数字转换为以十六进制表示之字串</p></blockquote></blockquote></blockquote>

<p>调用内置的hex()函数：</p>

<blockquote><blockquote><blockquote><p>hex(255)</p></blockquote></blockquote></blockquote>

<p>&lsquo;0xff &rsquo;</p>

<p> 文字和十六进制数字的互相转换</p>

<p>调用BinAscii模块其中的b2a_hex()函数，可把以ASCII编码的文字以十六进制表示：</p>

<blockquote><blockquote><blockquote><p>import binascii</p>

<p>print binascii.b2a_hex(&lsquo;联通&rsquo;)
c1aacda8</p></blockquote></blockquote></blockquote>

<p>反之也可把以十六进制表示的文字，换成以ASCII编码的文字：</p>

<blockquote><blockquote><blockquote><p>print binascii.a2b_hex(&lsquo;baba&rsquo;)
汉</p></blockquote></blockquote></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/11/165327/">UNIX文件的编码问题</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-11T16:53:27+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>4:53 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>根据目前的实验结果，在Windows下生成的ANSI编码文件转为Unix格式后，Unix脚本（例如用awk命令取该文件某一行的某一段数据）可以正确读取； Windows下生成的UTF-8编码文件转为Unix格式后， Unix脚本不能正确读取，因此日志文件在Notepad++中打开后，应为Unix, ANSI格式，在Ultraedit中应为Unix格式，而不是U8-UNIX格式。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/11/083523/">技术类书籍读书笔记撰写内容</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-11T08:35:23+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>8:35 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>1 这本书的主要内容是什么？
1.1 概括这本书主要内容的关键字；
1.2 用尽量简短的句子说明这本书在说什么；
1.3 列出这本书的大纲，以及各部分之间的关系；
1.4 确定作者想要解决的问题；</p>

<p>2 我从这本书中得到了什么？
2.1 我希望通过这本书解决什么（哪些）问题？
2.2 针对这个（这些）问题此书是怎么论述的？（读书笔记的主体部分）
2.3 此书的论述与我的问题相关度如何？还有哪些地方本书没有涉及？</p>

<p>2.4 简要叙述此书还有哪些有价值的信息？</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/09/170608/">网络通信框架选型</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-09T17:06:08+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>5:06 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>事件驱动的异步IO通信框架
 Apache Mina , JBoss Netty , Grizzly (Java), Twisted , gevent (python), eventmachine (Ruby), POE (Perl), Node.js (JavaScript), libevent &copy;</p>

<p>各框架实现的Echo Server</p>

<p> Twisted , libevent (不是echo server，但讲了很多基础知识), gevent , eventmachine , Node.js , Netty , Grizzly , POE ，按先后顺序进行学习。</p>

<p>选型的依据：</p>

<p> 功能： 截取模式：
 Mina: Filter-Handler;
Netty/Grizzly: Handler only</p>

<p> 支持的Filter/Handler：</p>

<p>Mina: blacklist filters, compression filters, connection throttling filters, SSL filters, logging filters, protocol codecs such as delimiter based, and HTTP. Grizzly provides support for SSL, custom protocol codecs, logging, and HTTP;</p>

<p>Netty: Base64 encoding/decoding, delimiter based codecs, fixed length codecs, HTTP handlers, logging handlers, Java object serialization/deserialization codecs, Google Protocol Buffer codecs, SSL handlers, simple string codecs, and handlers used to control bandwidth, traffic shaping, etc. There are also several utility handlers that may be used to build custom handlers such as a replay handler, timeout handler , frame decoder, etc;（Netty在支持基于已有的Handler构建用户Handler方面更灵活）</p>

<p> 高级缓存</p>

<p>Netty: ChannelBuffer中封装了多个ByteBuffer实例的引用（而非拷贝），支持zero copy，支持标记与重设“读指针”(Reader)索引，支持搜索、切片、读写不同类型数据；</p>

<p>Mina: 与Netty基本类似，但不支持zero copy（在Mina 3中实现）；</p>

<p> Socket and Protocol Independence</p>

<p>三者均支持，使通信框架底层技术变化（例如从NIO向AIO过渡）时，无需更新业务逻辑代码；</p>

<p> 可定制的协议与POJO</p>

<p>三者均支持，POJO在网络传输中的作用是什么？</p>

<p> 线程模型</p>

<p>三者均使用线程池模型，应付高并发能力良好；</p>

<p> 性能：</p>

<p>速度：MINA能够满足要求（并发800+），Netty=Grizzly>MINA；</p>

<p>内存占用量：Netty=Mina&lt;Grizzly
 扩展性：采用此框架的项目代码是否易于修改，易于在已有功能基础上拓展新功能； 易用性：框架的简洁程度，API Docs是否完善，Tutorials是否丰富，论坛是否活跃； 与GODU的整合能力/迁移成本；</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/09/100259/">用WinHTTrack下载博客</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-09T10:02:59+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>10:02 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>创建一个存放博客的总目录，例如： “E:\MyDoc\WinHTTrackFiles\Blogs”；
 启动WinHTTrack；
 【下一步】之后在【工程名】里写“李四”，【总保存路径】里写“E:\MyDoc\WinHTTrackFiles\Blogs”，这样所有网站内容就会被下一步；
 【操作】选【下载网站】（如果是更新，则双击李四.whtt文件即可）；
 【Web地址】填博客地址；
 【选项->限制->最大深度】设为2，【最大外部链接深度】设为0。 勾选【 选项->链接->首先保存html文件 】；
 开始下载进程后，【已扫描链接】后面的数据由三部分组成，例如：248/251(+5)，其中251表示需要下载的所有链接数量，248表示已下载的链接数量，+5含义尚不清楚。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/08/175808/">Log4j日志输出格式参数定义</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-08T17:58:08+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>5:58 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>PatternLayout (Apache Log4j 1.2.16 API)</p>

<p> Conversion Character
 Effect
 c
 Used to output the category of the logging event. The category conversion specifier can be optionally followed by precision specifier , that is a decimal constant in brackets.
 If a precision specifier is given, then only the corresponding number of right most components of the category name will be printed. By default the category name is printed in full.
 For example, for the category name &ldquo;a.b.c&rdquo; the pattern %c{2} will output &ldquo;b.c&rdquo;.
  C
 Used to output the fully qualified class name of the caller issuing the logging request. This conversion specifier can be optionally followed by precision specifier , that is a decimal constant in brackets.
 If a precision specifier is given, then only the corresponding number of right most components of the class name will be printed. By default the class name is output in fully qualified form.
 For example, for the class name &ldquo;org.apache.xyz.SomeClass&rdquo;, the pattern %C{1} will output &ldquo;SomeClass&rdquo;.
 WARNING Generating the caller class information is slow. Thus, use should be avoided unless execution speed is not an issue.
  d
 Used to output the date of the logging event. The date conversion specifier may be followed by a date format specifier enclosed between braces. For example, %d{HH:mm:ss,SSS} or %d{dd MMM yyyy HH:mm:ss,SSS} . If no date format specifier is given then ISO8601 format is assumed.
 The date format specifier admits the same syntax as the time pattern string of the  SimpleDateFormat . Although part of the standard JDK, the performance of SimpleDateFormat is quite poor.
 For better results it is recommended to use the log4j date formatters. These can be specified using one of the strings &ldquo;ABSOLUTE&rdquo;, &ldquo;DATE&rdquo; and &ldquo;ISO8601&rdquo; for specifying  AbsoluteTimeDateFormat ,  DateTimeDateFormat  and respectively  ISO8601DateFormat . For example, %d{ISO8601} or %d{ABSOLUTE} .
 These dedicated date formatters perform significantly better than  SimpleDateFormat .
  F
 Used to output the file name where the logging request was issued.
 WARNING Generating caller location information is extremely slow and should be avoided unless execution speed is not an issue.
  l
 Used to output location information of the caller which generated the logging event.
 The location information depends on the JVM implementation but usually consists of the fully qualified name of the calling method followed by the callers source the file name and line number between parentheses.
 The location information can be very useful. However, its generation is extremely slow and should be avoided unless execution speed is not an issue.
  L
 Used to output the line number from where the logging request was issued.
 WARNING Generating caller location information is extremely slow and should be avoided unless execution speed is not an issue.
  m
 Used to output the application supplied message associated with the logging event.
 M
 Used to output the method name where the logging request was issued.
 WARNING Generating caller location information is extremely slow and should be avoided unless execution speed is not an issue.
  n
 Outputs the platform dependent line separator character or characters.
 This conversion character offers practically the same performance as using non-portable line separator strings such as &ldquo;\n&rdquo;, or &ldquo;\r\n&rdquo;. Thus, it is the preferred way of specifying a line separator.
  p
 Used to output the priority of the logging event.
 r
 Used to output the number of milliseconds elapsed from the construction of the layout until the creation of the logging event.
 t
 Used to output the name of the thread that generated the logging event.
 x
 Used to output the NDC (nested diagnostic context) associated with the thread that generated the logging event.
 X
 Used to output the MDC (mapped diagnostic context) associated with the thread that generated the logging event. The X conversion character must be followed by the key for the map placed between braces, as in %X{clientNumber} where clientNumber is the key. The value in the MDC corresponding to the key will be output.
 See  MDC  class for more details.
  %
 The sequence %% outputs a single percent sign.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/09/30/164309/">通信框架学习笔记</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-09-30T16:43:09+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>4:43 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Netty是如何处理信息的？例如Netty中有Handler，是否有filter？是否也使用链式结构？IoSession对应的类是什么？</p>

<p>Netty如何处理session与properties在时间上的矛盾？</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/09/29/162410/">软件开发类书籍</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-09-29T16:24:10+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>4:24 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>我也能做CTO之程序员职业规划 [专著] / 高阳著，北京 : 电子工业出版社, 2009， 国图基藏库
 卓有成效的程序员，Neal Ford，机械工业出版社,2009-03 ， 国图基藏库
 走出软件作坊，阿朱，电子工业出版社，2009-01
 高效程序员的45个习惯 [专著] = Practices of an agile developer : 敏捷开发修炼之道 / (美)Venkat Subramaniam，(美)Andy Hunt著 ; 钱安川，郑柯译， 国图中文外借室
 Expert one-on-one J2EE Development without EJB中文版 [专著] / (美)Rod Johnson，(美)Juergen Hoeller著 ; JavaEye译，北京 : 电子工业出版社, 2005， 国图基藏库 ， 国图中文外借室
 C++网络编程. 卷1, 运用ACE和模式消除复杂性 [专著] = C++ network programming. Volume 1, Mastering complexity with ACE and patterns / (美)Douglas C. Schmidt，(美)Stephen D. Huston著 ; 於春景译，电子工业出版社, 2007， 国图 基藏库，北区中文图书区
 C++网络编程. 卷2, 基于ACE和框架的系统化复用 [专著] / Douglas C.Schmidt，Stephen D.Huston著 ; 马维达译，电子工业出版社, 2004
 ACE程序员指南 [专著] : 网络与系统编程的实用设计模式 / (美)Stephen D.Huston等著 ; 马维达译，北京 : 中国电力出版社, 2004 ， 国图  基藏库，北区中文图书区</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/09/29/155812/">关于软件开发的一篇很好的文章</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-09-29T15:58:12+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>3:58 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近听到过多起软件行业“项目经理”的故事了，其实就是能堆砌几个技术框架用用；或者动辄就说自己写什么框架，然后谈论说struts2等框架如何如何慢云云来忽悠菜鸟，于是写出此文，谈谈想法。</p>

<p>淘宝用开源，微软用自己的东西，金山什么都用，Google、IBM和ORACLE以及JBOSS则全力支持OpenSource，诸多公司，我也不细评了，从最终产品运行效率看，微软最差，Windows Live系列的产品慢的不成样（最近几个月才略有改观），反倒是用开源的一个比一个快；看看google和淘宝。所以说，没有什么快慢，只是用的人如何。
管理也好，技术也好，都是渗透着一种文化，而这种文化以及文化背后的可操作性的东西，不亲身体验，是永远无法学会和想明白的。</p>

<p>说说我们公司的软件开发文化吧。</p>

<p>首先是最为本质的东西，作为软件企业，我们追求什么？答案很简单：第一是生产力，第二是可维护性（所谓的可维护性里面包括了可扩展性），第三是精英团队。
这里解释一下，为什么1，2，3是这样的顺序而不是其他。
首先我们是一家公司，正如杰克韦尔奇所说，任何一家公司和企业，第一目标是利润，永远不能偏离这个目标；而这也是一切其他文化的基础。一个简单的例子，20万的项目，20个人月和5个人月的成本差异显然是巨大的，而我们的目标则要努力压缩这个人月的数字以期最大化利润；而最大化的利润也意味着员工的薪水空间和企业的高速成长。而可维护性意味着在团队人员流动以及新人加入时，可以有无缝接替；或者客户需求变更或者架构提升时，可以几乎无痛的切换。第三点精英团队，并非是找一堆清华的高材生，而是一个成长型的，真诚团结并且务实的团队。我们要做的是让一群聪明年轻人成长为精英，让他们拥有切实的能力和自信，从而立足于一个行业并受到同行和客户的尊敬。可能有人会问，为什么不提用户？我想说的是：任何一家企业，都必须尊重用户，而也只有精英团队，才能真正的为客户提供高质量产品和服务，而不是每天生活在抱怨和混乱的项目开发中。</p>

<p>那么我们如何实现这些文化呢？</p>

<p>首先我们讲生产力的话题。作为我本人来说，我对各种新技术都喜欢研究一下，但是极少高度深入；作为“架构师”的角色，我喜欢把这种研究的氛围推广。不过研究归研究，如果要应用到项目中那还是有原则的，比如：A.不能简化代码量的，不用；B.难以上手的，不用；C.不稳定的，不用；D.自己造轮子的（缺乏可持续维护），不用。</p>

<p>基于这几个原则，目前热门技术中，我们不用EXT或者Flex，因为它违反了A和B；不用ibatis，因为违反了A；不用GWT，因为违反了B；基本不用微软的方案，因为很多MS的方案都违反C；而不自己造轮子，尽量基于标准的Spring/Struts2/Hibernate框架，则是处于人员更迭和维护的考虑，具体可参考J2EE design and development without EJB；我也后悔用Mina，因为缺乏持续性的维护，这方面显然不如netty和grizzly。</p>

<p>那么我们使用什么呢？为了简化代码量，我们使用了Springside的方案，提供了最简单实用的CRUD和Web分页以及复杂查询方案；并更进一步的使用了Sitemesh，从而最大成度的屏蔽了绝大多数开发人员和HTML/CSS打交道的机会；这样也不用在EXT和FLEX间折腾了；Struts2的Convention插件提供了足够简单（我认为不是最）的Web映射机制，可以大量减少配置；Spring则提供了声明性事物（基于Aspectj或者元数据声明），对象依赖的自动装配，以及未来可扩充（暴露服务）框架；而对Hibernate的深入理解，可以解决绝大多数情况下的存储问题；当然我们从来不搞绝对化，特殊情况特殊处理，该JDBC直接操作的时候我也绝不会滥用Hibernate。另外，对多线程编程、锁机制、网络以及底层IO的精通，这些都成为团队可以在项目中快速前进的优势。</p>

<p>当然如何来衡量呢？
比如Hibernate，如下几个问题：1，什么是ThreadLocal，Hibernate如何结合ThreadLocal？2，你能马上说出来inverse和cascade关系，cascade种类以及差异吗？3，Hibernate什么情况下，会产生inner join，什么情况下会产生outer join？可以强制吗？什么架构的情况下应该避免一对多和表连接？
如果你能快速的不查资料的回答上来这几个问题，那么我相信你绝对不会讨厌Hibernate，也绝对不会有常见的使用上的困惑。比如Hibernate结合Hibenrate search和solr，可以用最少量的代码为我们带来高效的企业级海量数据检索。</p>

<p>另外，为了提升生产力我们还采取了Scrum的开发模式，并结合XP，推崇TDD，从UnitTest到selenium都是团队工作必不可少的亲密伙伴（这么多年来实在厌烦了V字形的传统模式，以及一堆堆的文档），我们鼓励写清洗的代码，代码就是文档，注释就是需求。我们使用了CI工具，比如hudson或者bamboo；使用jira或者trac来让每个成员明确项目每个迭代中的目标，考虑到我们是年轻的团队，发布周期一般是2周而不是更长；使用maven（部分结合ant）来做项目生命周期管理，使用firebug来进行各种web相关内容的调试和测试，虽然很少提及但是我们熟悉Linux以及各种分布式解决方案……</p>

<p>诚然，工具和框架的堆砌并非可以达到目标，必须让这些实践和其中蕴含的价值观深入人心，才可能让这一切产生威力。我们从很早就开始推行的代码价值观，比如优先处理错误，变量命名规则，代码书写的规则和技巧，和最近我看到的thoughtworks文集中提到的几乎完全一样；这些“最佳实践”构成了团队务实的开发理念。
总结性的说，上面提到的一切，新技术，敏捷，过程改进，其实都是为了能够产生生产力的“最佳实践”。</p>

<p>当然，空谈永远难以解决问题，技术上的务实和有效评估并提出方案才是王道。比如文章开始提到的struts2性能问题，作为我们的解决方案，会是：首先评估项目规模，评估每秒的并发request数，用ab等工具来评估时间最长的几个action，使用jprofiler等工具来查找本地瓶颈并解决（比如sql缺乏优化，多表连接等带来的性能问题），使用ehcache并做gzip压缩来处理网络传输上的问题。</p>

<p>那么有了这些，团队就有战斗力了吗？答案并非“不”，而是“不确定”。一个稳定而高效的团队，团结，有责任心，正直而勤奋，彼此信任但不依赖，各种优秀品质必须存在于每个人身上。术业有专攻，但是品行不可能有差异，一个新人，要么同化，要么离开，没有第三种选择，这也是我们为什么更喜欢可塑性更强的年轻人的原因。这一切如何产生呢？我们的原则是在中国，我们相信企业文化来自于老板，来自于“带头大哥”，言传身教决定了这一切；所以对中层人员的提拔是必须绝对谨慎的，这会影响整个公司的价值观和未来方向。</p>

<p>最后，推荐几本书，我相信思想的变化比学几样技术更能提升一个人的价值，而这些提升，大多来自于书籍。
A.J2EE design and development without EJB
B.《走出软件作坊》
C.杰克韦尔奇《赢》
感谢这些书籍的作者。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/100">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/98">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/04/18/140631/">4月17日讲座文字稿</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/17/151844/">Linux Mint System Provision</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/16/172913/">Fzf让命令行更方便</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/15/105035/">How to Sync a Fork on Github</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/08/161006/">Python的Generator和yield</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
