
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
  <meta name="description" content="&lt;ivy:publish artifactspattern= &ldquo;${build.dist.dir}/[artifact]-[revision]-[type].[ext]&rdquo; resolver= &ldquo;${publish.resolver}&rdquo; &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leetschau.github.io/posts/84">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
    <h2>A note repository aims at Data Mining, Spark, Linux, Python.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:leetschau.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/31/092310/">同时发布两种产品的ant脚本</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-12-31T09:23:10+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2010</span></span> <span class='time'>9:23 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><target  name= "create_jar"  depends=  "compile" >
     <jar  destfile= "${build.dist.dir}/${product.name}-${ivy.revision}-jar.jar"  basedir=  "${build.class.dir}" >
      <manifest>
       <attribute  name= "Vendor"  value= "${vendor.name}"  />
       <attribute  name= "Product-Name"  value= "${product.name}"  />
       <attribute  name= "Version"  value= "${ivy.revision}"  />
       <attribute  name= "Build-Date"  value= "${build.date}"  />
       <attribute  name= "Build-Time"  value= "${build.time}"  />
      </manifest>
     </jar>
     <jar  destfile= "${build.dist.dir}/${product.name}-${ivy.revision}-source.jar"  basedir=  "${src.dir}" >
      <manifest>
       <attribute  name= "Vendor"  value= "${vendor.name}"  />
       <attribute  name= "Product-Name"  value= "${product.name}"  />
       <attribute  name= "Version"  value= "${ivy.revision}"  />
       <attribute  name= "Build-Date"  value= "${build.date}"  />
       <attribute  name= "Build-Time"  value= "${build.time}"  />
      </manifest>
     </jar>
   </target></p>

<p>   <target  name= "publish_jar"  depends=  "create_jar" >
     &lt;ivy:publish  artifactspattern= &ldquo;${build.dist.dir}/[artifact]-[revision]-[type].[ext]&rdquo;
      resolver= &ldquo;${publish.resolver}&rdquo;  overwrite= &ldquo;true&rdquo;
      organisation= &ldquo;com.boco.ty&rdquo;  module= &ldquo;gapi&rdquo;  revision= &ldquo;alpha&rdquo; />
   </target></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/30/150304/">Python的目录遍历方法说明</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-12-30T15:03:04+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>3:03 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>python的os.walk()方法十分强大，它对目录的遍历不能指定深度，也就是一直遍历到最深处为止，且采用深度优先的遍历方法，第一个参数是要遍历的文件夹路径，第二个参数topdown如果为真，则从根向下遍历，若为假，则从最深处向根遍历，示例如下：</p>

<p> import os</p>

<p> for root, dirs, files in os.walk(&lsquo;f:\aa&rsquo;, topdown=False):</p>

<p>  print(&lsquo;root=&rsquo;,root)</p>

<p>  print(&lsquo;dirs=&rsquo;,dirs)</p>

<p>  print(&lsquo;files=&rsquo;,files)</p>

<p>输出如下：</p>

<p> root= f:\aa\22\33</p>

<p> dirs= []</p>

<p> files= [&lsquo;f44&rsquo;]</p>

<p> root= f:\aa\22</p>

<p> dirs= [&lsquo;33&rsquo;]</p>

<p> files= [&lsquo;f33&rsquo;]</p>

<p> root= f:\aa\222\333</p>

<p> dirs= []</p>

<p> files= []</p>

<p> root= f:\aa\222</p>

<p> dirs= [&lsquo;333&rsquo;]</p>

<p> files= []</p>

<p> root= f:\aa</p>

<p> dirs= [&lsquo;22&rsquo;, &lsquo;222&rsquo;]</p>

<p> files= [&lsquo;f22&rsquo;]</p>

<p>如果去掉第二行中的“topdown=False”，输出如下：</p>

<p> root= f:\aa</p>

<p> dirs= [&lsquo;22&rsquo;, &lsquo;222&rsquo;]</p>

<p> files= [&lsquo;f22&rsquo;]</p>

<p> root= f:\aa\22</p>

<p> dirs= [&lsquo;33&rsquo;]</p>

<p> files= [&lsquo;f33&rsquo;]</p>

<p> root= f:\aa\22\33</p>

<p> dirs= []</p>

<p> files= [&lsquo;f44&rsquo;]</p>

<p> root= f:\aa\222</p>

<p> dirs= [&lsquo;333&rsquo;]</p>

<p> files= []</p>

<p> root= f:\aa\222\333</p>

<p> dirs= []</p>

<p> files= []</p>

<p>如果仅仅是列出第一层目录名，则用listdir()：</p>

<p> print(os.listdir(&lsquo;f:\aa&rsquo;))</p>

<p>的输出是：</p>

<p> [&lsquo;22&rsquo;, &lsquo;222&rsquo;, &lsquo;f22&rsquo;]</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/30/110743/">Python添加新包的方法</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-12-30T11:07:43+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>11:07 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>python查找包实际上是在sys.path中找，利用这一点可以方便的在运行时添加新包。例如现在要添加一个名为pysvn的包，原始安装包是一个zip包，其中只有一个名为pysvn的目录，所有文件都在这个目录下（例如<strong>init</strong>.py以及一堆dll文件），将这个包解压至E:\BVT\GODU-BVT\pyTest下，也就是E:\BVT\GODU-BVT\pyTest\pysvn下有 <strong>init</strong>.py以及一堆dll文件，然后运行如下脚本：
 import sys</p>

<p> sys.path.append(&lsquo;E:\BVT\GODU-BVT\pyTest&rsquo;)</p>

<p> import pysvn</p>

<p> &hellip;</p>

<p> 就可以使用pysvn模块了。另外，用</p>

<p> import sys</p>

<p> sys.path</p>

<p> 可以看到，${PYTHON_HOME}\lib\site-packages已经被预先加入到sys.path中了，所以更简单的方法是直接把pysvn解压到${PYTHON_HOME}\lib\site-package目录下，这样导入包时就可以省略前面的sys.path.append动作，但由于权限问题操作系统不允许解压到site-packages下时，这一招就没用了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/29/171709/">Ant流程控制之for语句</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-12-29T17:17:09+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>5:17 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在ant脚本中实现for循环需要使用ant-contrib.jar（<a href="http://ant-contrib.sourceforge.net/%EF%BC%89%EF%BC%8C%E5%9C%A8%E4%BD%BF%E7%94%A8%E5%89%8D%E9%9C%80%E8%A6%81%E5%B0%86%E8%AF%A5jar%E5%8C%85%E6%94%BE%E5%9C%A8ant%E7%9A%84classpath%E4%B8%AD%EF%BC%8C%E5%B9%B6%E5%9C%A8build%E8%84%9A%E6%9C%AC%E4%B8%AD%E5%AE%9A%E4%B9%89%EF%BC%9A">http://ant-contrib.sourceforge.net/%EF%BC%89%EF%BC%8C%E5%9C%A8%E4%BD%BF%E7%94%A8%E5%89%8D%E9%9C%80%E8%A6%81%E5%B0%86%E8%AF%A5jar%E5%8C%85%E6%94%BE%E5%9C%A8ant%E7%9A%84classpath%E4%B8%AD%EF%BC%8C%E5%B9%B6%E5%9C%A8build%E8%84%9A%E6%9C%AC%E4%B8%AD%E5%AE%9A%E4%B9%89%EF%BC%9A</a></p>

<p> <taskdef classpath="ant-contrib.jar" resource="net/sf/antcontrib/antlib.xml"/></p>

<p>然后就可以在脚本中使用了：</p>

<p> <target name="ex"></p>

<p> <echo message="The first five letters of the alphabet are:"/></p>

<p> <for list="a,b,c,d,e" param="letter"></p>

<p> <sequential></p>

<p> <echo>Letter @{letter}</echo></p>

<p> </sequential></p>

<p> </for></p>

<p> </target></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/29/103501/">Run JUnit Test in Command Line</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-12-29T10:35:01+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>10:35 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在F盘下生成JunitCLEx.java文件：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>import org.junit.Test; 
</span><span class='line'>import static org.junit.Assert.assertEquals;
</span><span class='line'>public class JunitCLEx{ 
</span><span class='line'>    @Test
</span><span class='line'>    public void hello() {
</span><span class='line'>        assertEquals(24+5,26);
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>再生成一个run.bat文件：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>set CLASSPATH=d:\workspace\GAPI_TEST\build\lib\junit-4.8.2.jar;f:\
</span><span class='line'>javac JunitCLEx.java
</span><span class='line'>java org.junit.runner.JUnitCore JunitCLEx</span></code></pre></td></tr></table></div></figure>


<p>运行这个批处理，看看结果，再把JunitCLEx.java中<code>assertEquals(24+5,26);</code>中的26改为29，重新运行一遍看看结果。</p>

<p>命令行运行JUnit的基本过程分三步：</p>

<ol>
<li><p>设置classpath（注意测试代码自己的路径也要加进去）；</p></li>
<li><p>编译测试代码；</p></li>
<li><p>运行JUnit：java org.junit.runner.JUnitCore &lt;测试类名>；</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/28/155925/">在ant脚本中调用另外的ant脚本</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-12-28T15:59:25+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>3:59 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>例如在build.xml中要运行 ${tested.dir}下的build.xml：
 <ant antfile="${tested.dir}/build.xml" InheritAll="false"></ant>
注意其中的InheritAll=&ldquo;false&#8221;，是避免主脚本中的变量定义<property name="..." value="..."/>进入被调脚本中；</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/23/162834/">Ant的copy标签使用方法</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-12-23T16:28:34+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2010</span></span> <span class='time'>4:28 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>对于ant里拷贝用的<copy>标签的用法，此文（来自 <a href="http://electiger.blog.51cto.com/112940/39575">http://electiger.blog.51cto.com/112940/39575</a> ）讲得很好，注意其中黑体字部分，今天被这个问题耽误了20分钟。</p>

<p>Ant真是太方便了，以前都没注意到它。功能很强大，能创建数据库，配置服务器，部署发布应用……只需要写好build.xml文件，剩下的就交给ant来“安装”你的WEB应用了。</p>

<p>Appfuse的第一个ant命令是ant new，其任务是建立一个新命名的project，少不了会复制很多文件。build.xml中也有很多copy操作，为了搞清楚ant new到底干了些什么事，还是先把copy操作了解一下。看了会ant的DOCS，网上也找了些文章，发现copy这部分都是一带而过，讲得很浅，于是我就只有自己实验下，发现还有点收获。 ant版本为1.6.5。</p>

<ol>
<li>拷贝单个文件到指定目录下。</li>
</ol>


<p>例：<copy todir="${basedir}/new" file="${basedir}/old/old1.txt1"></p>

<p>将${basedir}/old/old.txt文件拷贝到${basedir}/new下</p>

<ol>
<li>拷贝一批文件到指定目录下</li>
</ol>


<p>例：<copy todir="${basedir}/new"></p>

<p>   <fileset dir="${basedir}/old"></p>

<pre><code>&lt;include name="old1.txt" /&gt;

&lt;include name="old2.txt" /&gt;

&lt;exclude name="old8.txt" /&gt;
</code></pre>

<p>   </fileset></p>

<p>  </copy></p>

<p>  这里fileset定义的是原文件的组成形式，<include/>子属性表示包括，<exclude/>子属性表示排除，很简单，通过他们组合实现多文件的筛选，当然我这个例子用得很傻。比如</p>

<pre><code>&lt;include name="appgen/**"/&gt;

&lt;include name="ibatis/**"/&gt;

&lt;exclude name="**/*.log"/&gt;
</code></pre>

<p>  拷贝appget目录和ibatis目录下除了.log文件以外的其它所有文件和子目录。</p>

<p>  可以把<fileset/>简写成<fileset dir="${basedir}/old" includes="old1.txt,old2.txt" />，includes可以理解成include的复数形式，包含多个文件时用逗号隔开，excludes也一样。</p>

<ol>
<li>拷贝一个目录到指定目录下</li>
</ol>


<p>例：<copy todir="${basedir}/new"></p>

<p>   <fileset dir="${basedir}/old"></p>

<pre><code>&lt;include name="appgen" /&gt;

&lt;include name="appgen/" /&gt;

&lt;include name=appgen/**" /&gt;

&lt;include name="appgen/***" /&gt;
</code></pre>

<p>   </fileset></p>

<p>  </copy></p>

<p>  同样使用<fileset/>属性，name指定目录名，不过这里要分两种情况，用<include/>子属性和不用<include/>子属性.</p>

<p>  若使用<include/>， 又要分三种情况</p>

<p>   若是“appgen”，则只会拷贝名为appgen的空目录过去，它里面的文件和子目录则不会拷贝。</p>

<p>   若是“appgen/”，或“appgen/**”，则会把整个appgen目录拷贝过去，包括里面的文件和子目录。</p>

<p>   若是“appgen/<em>”，则只会把该目录和该目录下第一级子目录的所有东西拷贝过去，而不会拷贝第二级和第二级以下的。注：“appgen/</em>”这儿是一个<em>号，</em>号若大于两个，也跟一个<em>号是同样效果。比如“appgen/</em>”和“appgen/****”都只拷贝appgen目录下第一级子目录。</p>

<p>注：若appeng这个目录本身就是个空目录，无论怎么写，这个空目录都不会被拷贝。也就是说，copy操作不会产生创建空目录的作用，要想创建空目录，只有用mkdir。</p>

<p>  若不使用任何<include>属性，如</p>

<p>   <fileset dir="${basedir}/old"></p>

<p>   </fileset></p>

<p>  则会拷贝${basedir}/old下的所有文件和子目录。</p>

<p>注： 使用<exclude/>排除目录时，目录名必须写成“dirName/”或“dirName/**”形式，否则不会生效。</p>

<p>  以上是三种拷贝到目录的种类，注意如果计算机中没有todir指定的路径，ant将会自动创建这个路径。</p>

<ol>
<li>拷贝单个的文件：</li>
</ol>


<p>〈copy tofile=&ldquo;old.txt&rdquo; file=&ldquo;new.txt&rdquo; /〉就这么简单就行了。</p>

<p>当然也可以写成</p>

<p> <copy tofile="${basedir}/new/new.txt"></p>

<p>  <fileset dir="${basedir}/old" includes="old.txt" /></p>

<p> </copy></p>

<p>  这里includes就只能写一个文件，不能写上多个文件，因为不能将多个文件复制到一个文件中去，所以这样麻烦的写法是没有意义的。</p>

<p>  复制肯定还要涉及到同名覆盖的问题，ant在copy类的API中说明：Files are only copied if the source file is newer than the destination file，这里的newer是指文件的修改时间，即使你在修改时文件内容没有任何变化，只是导致修改时间变了，ant同样会覆盖同名文件，也就是说，ant不会检查文件内容。</p>

<p>  对于是复制目录的情况，由于目录没有修改时间，ant还是通过检查目录内文件的修改时间来决定是否覆盖的，若目录内某文件修改时间有变化，则会覆盖这个文件，而不是整个目录。</p>

<p>如果要强行覆盖，<copy/>有个overwrite属性，默认为false，改成true就行了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/23/111308/">依赖管理常用vim脚本</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-12-23T11:13:08+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2010</span></span> <span class='time'>11:13 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>为依赖条目加上配置说明 效果示例 ：</p>

<p>转换前：
 <dependency org="saxpath" name="saxpath" rev="1.0-FCS"/></p>

<p> <dependency org="aopalliance" name="aopalliance" rev="1.0"/></p>

<p> <dependency org="org.hibernate" name="hibernate-core" rev="3.3.2.GA"/></p>

<p>转换后：</p>

<p> <dependency org="saxpath" name="saxpath" rev="1.0-FCS" conf="compile->master&#8221;/></p>

<p> <dependency org="aopalliance" name="aopalliance" rev="1.0" conf="compile->master&#8221;/></p>

<p> <dependency org="org.hibernate" name="hibernate-core" rev="3.3.2.GA" conf="compile->master&#8221;/></p>

<p> 方法 ：在_vimrc文件里加上如下代码：
 function Add_Conf()</p>

<p>  &ldquo;为ivy的dependency条目加上conf=&rdquo;&hellip;&#8221;</p>

<p>  %s/\/>/ conf=&ldquo;compile->master&rdquo;\/></p>

<p> endfunction</p>

<p> command AddConf call Add_Conf()</p>

<p> map <F8> <ESC>:AddConf<CR></p>

<p> 将依赖条目变为下载条目</p>

<p> 效果示例 ：</p>

<p>转换前：</p>

<p> <dependency org="saxpath" name="saxpath" rev="1.0-FCS" conf="compile->master&#8221;/></p>

<p> <dependency org="aopalliance" name="aopalliance" rev="1.0" conf="compile->master&#8221;/></p>

<p> <dependency org="org.hibernate" name="hibernate-core" rev="3.3.2.GA" conf="compile->master&#8221;/></p>

<p>转换后：</p>

<p> &lt;ivy:install organisation=&ldquo;saxpath&rdquo; module=&ldquo;saxpath&rdquo; revision=&ldquo;1.0-FCS&rdquo; from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo;/></p>

<p> &lt;ivy:install organisation=&ldquo;aopalliance&rdquo; module=&ldquo;aopalliance&rdquo; revision=&ldquo;1.0&rdquo; from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo;/></p>

<p> &lt;ivy:install organisation=&ldquo;org.hibernate&rdquo; module=&ldquo;hibernate-core&rdquo; revision=&ldquo;3.3.2.GA&rdquo; from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo;/></p>

<p> 方法 ：在_vimrc文件里加上如下代码：</p>

<p> function Dep_to_Install()</p>

<p>  &ldquo; 将ivy的dependency条目转换为脚本安装条目</p>

<p>  %s/dependency/ivy:install/g</p>

<p>  %s/org=/organisation=/g</p>

<p>  %s/name=/module=/g</p>

<p>  %s/rev=/revision=/g</p>

<p>  %s/conf=&ldquo;compile->master&rdquo;/from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo;/g</p>

<p> endfunction</p>

<p> command Dep2Inst call Dep_to_Install()</p>

<p> map <F9> <ESC>:Dep2Inst<CR></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/22/164556/">依赖项目文本排序（python实现）</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-12-22T16:45:56+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2010</span></span> <span class='time'>4:45 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>ivy的依赖文件如果条目很多，不排序的话会很乱，例如：</p>

<p> &lt;ivy:install organisation=&ldquo;javax.servlet&rdquo; module=&ldquo;servlet-api&rdquo; revision=&ldquo;2.5&rdquo; from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo; /></p>

<p> &lt;ivy:install organisation=&ldquo;junit&rdquo; module=&ldquo;junit&rdquo; revision=&ldquo;4.8.2&rdquo; from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo; /></p>

<p> &lt;ivy:install organisation=&ldquo;org.powermock&rdquo; module=&ldquo;powermock-module-junit4&rdquo; revision=&ldquo;1.4.6&rdquo; from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo; /></p>

<p> &lt;ivy:install organisation=&ldquo;org.snmp4j&rdquo; module=&ldquo;snmp4j&rdquo; revision=&ldquo;1.10.1&rdquo; from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo; /></p>

<p> &lt;ivy:install organisation=&ldquo;org.apache.oro&rdquo; module=&ldquo;jakarta-oro&rdquo; revision=&ldquo;2.0.8&rdquo; from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo; /></p>

<p> &lt;ivy:install organisation=&ldquo;org.easymock&rdquo; module=&ldquo;easymockclassextension&rdquo; revision=&ldquo;2.5.1&rdquo; from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo; /></p>

<p> （ori.txt中这里是空行）</p>

<p>排成这样就比较好看了：</p>

<p> &lt;ivy:install organisation=&ldquo;javax.servlet&rdquo; module=&ldquo;servlet-api&rdquo; revision=&ldquo;2.5&rdquo; from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo; /></p>

<p> &lt;ivy:install organisation=&ldquo;junit&rdquo; module=&ldquo;junit&rdquo; revision=&ldquo;4.8.2&rdquo; from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo; /></p>

<p> &lt;ivy:install organisation=&ldquo;org.apache.oro&rdquo; module=&ldquo;jakarta-oro&rdquo; revision=&ldquo;2.0.8&rdquo; from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo; /></p>

<p> &lt;ivy:install organisation=&ldquo;org.easymock&rdquo; module=&ldquo;easymockclassextension&rdquo; revision=&ldquo;2.5.1&rdquo; from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo; /></p>

<p> &lt;ivy:install organisation=&ldquo;org.powermock&rdquo; module=&ldquo;powermock-module-junit4&rdquo; revision=&ldquo;1.4.6&rdquo; from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo; /></p>

<p> &lt;ivy:install organisation=&ldquo;org.snmp4j&rdquo; module=&ldquo;snmp4j&rdquo; revision=&ldquo;1.10.1&rdquo; from=&ldquo;${from.resolver}&rdquo; to=&ldquo;${to.resolver}&rdquo; /></p>

<p>实际上就是每行按字母顺序排序，手工排费时费力，下面的脚本就是实现这个功能的，将最上面的文本保存为e:/MyDoc/Project/IvyInstallScripts下的build_old_backup.txt（注意最后一行文字后面要有一个空行）中，运行此脚本，排好的文本保存在build_old_backup.txt中，未排序的原始文本保存在build_old_backup.bak中，如果文件夹下已经有build_old_backup.bak，则会首先删除此bak文件，再执行上面的操作：</p>

<p> import os</p>

<p> if <strong>name</strong> == &lsquo;<strong>main</strong>&rsquo;:</p>

<p>  #name of the source file</p>

<p>  srcFileName = &lsquo;e:/MyDoc/Project/IvyInstallScripts/build_old_backup&rsquo;</p>

<p>  haveXML = os.path.exists(srcFileName+&lsquo;.txt&rsquo;)</p>

<p>  haveBAK = os.path.exists(srcFileName+&lsquo;.bak&rsquo;)</p>

<p>  if haveXML and haveBAK:</p>

<p>   os.remove(srcFileName+&lsquo;.bak&rsquo;)</p>

<p>  if haveXML:</p>

<p>   os.rename(srcFileName+&lsquo;.txt&rsquo;, srcFileName+&lsquo;.bak&rsquo;)</p>

<p>   haveBAK = True</p>

<p>  if not haveBAK:</p>

<p>   print(&ldquo;no source file, quit now!&rdquo;)</p>

<p>   exit()</p>

<p>  # open the src file</p>

<p>  oriScript = open(srcFileName+&lsquo;.bak&rsquo;,&lsquo;rt&rsquo;)</p>

<p>  #the destination file</p>

<p>  destScript = open(srcFileName+&lsquo;.txt&rsquo;,&lsquo;wt&rsquo;)</p>

<p>  try:</p>

<p>   wholeTxt = []</p>

<p>   for curLine in oriScript:</p>

<pre><code>#print(len(curLine)) 

wholeTxt.append(curLine) 
</code></pre>

<p>   wholeTxt.sort()</p>

<p>   for curLine in wholeTxt:</p>

<pre><code>destScript.write(curLine) 
</code></pre>

<p>  finally:</p>

<p>   oriScript.close()</p>

<p>   destScript.close()</p>

<p>下面是简单版：更为易用，保存为一个.py文件即可。</p>

<p> &ldquo;&rdquo;&#8221;</p>

<p>  将文本中的各行按字母顺序排序。使用方法：</p>

<p>  将待排序的文本保存在脚本所在目录下，运行脚本，结果保存在dst.txt文件中。</p>

<p> &ldquo;&rdquo;&#8221;</p>

<p> import os</p>

<p> oriScript = open(&lsquo;./ori.txt&rsquo;,&lsquo;rt&rsquo;)</p>

<p> dstScript = open(&lsquo;./dst.txt&rsquo;,&lsquo;wt&rsquo;)</p>

<p> try:</p>

<p>  wholeTxt = []
 for curLine in oriScript:
  wholeTxt.append(curLine)
 noDupList = list(set(wholeTxt)) # delete potential duplicated lines in wholeTxt
 noDupList.sort()
 for curLine in noDupList:
  dstScript.write(curLine)</p>

<p> finally:</p>

<p>  oriScript.close()</p>

<p>  dstScript.close()</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/22/155454/">解决SecureCRT中删除会话后无法重建问题</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-12-22T15:54:54+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2010</span></span> <span class='time'>3:54 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>SecureCRT和SecureFX中创建一个会话（例如名为“10.0.2.47”）后，如果删除这个会话，然后再创建一个同样名字的会话，就会报错，原因是SecureCRT在C盘上创建了一个配置文件，用户删除会话时，这个配置文件没有更新（ “10.0.2.47” 这一条目在配置文件中仍然存在），导致用户创建同名会话时SecureCRT认为已存在了，解决方法是：删除C:\Documents and Settings\a\Application Data\VanDyke\Config文件夹（配置文件是这个文件夹下的“Recent File List SecureCRT.ini”文件）。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/85">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/83">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/08/30/104928/">Docker Notes</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/27/180124/">Spark Notes</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/26/100107/">Build Redis on CentOS 6</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/24/110909/">Build Working Environment With I3 and Mint</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/24/103023/">Install New Locale on Linux Mint</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
