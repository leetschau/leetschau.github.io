
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
  <meta name="description" content="Git submodule as Meteor package We have a parent (container) Meteor application &ldquo;niufour&rdquo;,
now we want to add a new package &ldquo;nf- &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leetschau.github.io/posts/2/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
    <h2>A notes repository for Meteor.js, data mining, Linux, etc.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="leetschau.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/25/212008/">Git Submodule</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-25T21:20:08+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:20 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Git submodule as Meteor package</h1>

<p>We have a parent (container) Meteor application &ldquo;niufour&rdquo;,
now we want to add a new package &ldquo;nf-search&rdquo; to niufour.</p>

<p>Make sure if <code>packages/</code> has been added into .gitignore.</p>

<p>Push the nf-search (outside of niufour folder) to remote repo,
here we use a Phabricator server, with address <remote-repo-url>.</p>

<p>Under the root of niufour, run:</p>

<pre><code>git submodule add &lt;remote-repo-url&gt; packages/nf-search
</code></pre>

<p>The common form is: <code>git submodule add &lt;remote-repo-url&gt; &lt;local-path&gt;</code>,
where the <local-path> is where you want to put your submodule.</p>

<p>To add it into the niufour package list,
add <code>nfcommerce:nf-search</code> into file <niufour-project-root>/.meteor/packages.</p>

<p>After your partner push new codes into the repo,
run commands below to synchronize:</p>

<pre><code>git pull origin develop
git submodule init
git submodule update
</code></pre>

<h1>Keep demo state in parent project</h1>

<p>A demo need both codes and data at the exact state of the verified time.
So if your project has not submodules, use commit and tag to record the demo state.</p>

<p>Otherwise, you can use commits in parent project to record demo state.
In the example above, suppose niufour has another submodule &ldquo;nf-core&rdquo;.
In the development process, commit on &ldquo;develop&rdquo; branch in each submodule,
without commit on niufour.
Only when PM (project manager) verified the demo,
and all developers have committed and pushed in each submodule,
PM commits, tags and pushes <strong>in parent project</strong> by himself:</p>

<pre><code>cd /path/to/niufour
git add -A
git commit -m "this is for demo of 2015.11.04"
git tag "demo-2015.11.04"
git push origin develop
</code></pre>

<p>Then pm dump the database (<code>mongodump</code> for MongoDB) to a folder
with the same name of the tag name (here it&rsquo;s &ldquo;demo-2015.11.04&rdquo;).</p>

<p>At the demo day, the PM restore the data into a new database (<code>mongorestore</code> for example),
then run commands below to restore the codes for demo:</p>

<pre><code>git clone &lt;url-of-niufour&gt;
git checkout demo-2015.11.04
git submodule init
git submodule update
</code></pre>

<p>Note: To demonstrate the usage of git submodule,
use example in &ldquo;Git权威指南&rdquo;, 23.1 ~ 23.3, by 蒋鑫.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/24/115416/">Elasticsearch Notes</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-24T11:54:16+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:54 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Download tar package of <a href="https://www.elastic.co/products/elasticsearch">ealsticSearch</a>
and install:</p>

<pre><code>aptitude update
aptitude install openjdk-7-jdk
wget https://download.elasticsearch.org/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.0.0/elasticsearch-2.0.0.tar.gz
tar zxf elasticsearch-2.0.0.tar.gz
cd elasticsearch-2.0.0
bin/elasticsearch
</code></pre>

<p>Or you can install it as a service with deb package</p>

<pre><code>wget https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.7.3.deb
sudo dpkg -i elasticsearch-1.7.3.deb
sudo /etc/init.d/elasticsearch restart
</code></pre>

<p>Start in foreground:
<code>sudo /usr/share/elasticsearch/bin/elasticsearch --default.path.conf=/etc/elasticsearch/</code>.
If you omit the option &ldquo;&ndash;default.path.conf&rdquo;,
you&rsquo;ll get an error:
<code>org.elasticsearch.ElasticsearchException: Failed to load logging configuration</code>.</p>

<p>When you want start the 2nd node in the same machine,
always start it this way with the same command above.</p>

<p>Or run it in background:
<code>/usr/share/elasticsearch/bin/elasticsearch -d --default.path.conf=/etc/elasticsearch/</code>;</p>

<p>Put the result as well-formatted json:</p>

<pre><code>npm install -g json
curl 'localhost:9200/megacorp/employee/_search?pretty' | json
</code></pre>

<p>Create a new index:</p>

<pre><code>curl -XPUT 'localhost:9200/blogs' -d '
{
   "settings" : {
      "number_of_shards" : 3,
      "number_of_replicas" : 1
   }
}'
</code></pre>

<p>Format json in vim: <code>:%!json</code>.</p>

<p>Note:</p>

<p>You can use
<code>curl 'localhost:9200/megacorp/employee/_search?pretty' | python -m json.tool</code>
in command line or <code>:%!python -m json.tool</code> in vim to format json string.
But it will sort your keys, and maybe not friendly to Unicode characters.</p>

<p>Ref:</p>

<p><a href="http://stackoverflow.com/questions/352098/how-can-i-pretty-print-json">http://stackoverflow.com/questions/352098/how-can-i-pretty-print-json</a></p>

<p><a href="https://pascalprecht.github.io/2014/07/10/pretty-print-json-in-vim/">https://pascalprecht.github.io/2014/07/10/pretty-print-json-in-vim/</a></p>

<p><code>?petty</code> sometimes will be invalid url.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/21/133324/">Use Google Font Locally</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-21T13:33:24+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>1:33 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For example, we want use Open Sans locally.
On <a href="https://www.google.com/fonts">Google Fonts</a>,
in &ldquo;Open Sans&rdquo;, click &ldquo;Add to Collection&rdquo;.
and click &ldquo;use&rdquo;.</p>

<p>Under &ldquo;Choose the styles you want:&rdquo;, check all items,
under &ldquo;Choose the character sets you want:&rdquo;, check &ldquo;Latin&rdquo; and &ldquo;Latin Extended&rdquo;.</p>

<p>Open the url in the 3rd step, here it is:
<code>https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic</code>.</p>

<p>Now you get a css file, save it into $WEBSITE_HOME/client/stylesheets/font/opensans.less,
delete all sections other than &ldquo;latin&rdquo; and &ldquo;latin-ext&rdquo;,
download</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/19/090450/">JavaScript Code Folding</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-19T09:04:50+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:04 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Add codes below to ~/.vimrc
and run <code>vim +PluginClean +PluginInstall +qa</code>:</p>

<pre><code>" JavaScript code folding
set foldmethod=syntax
set foldlevelstart=3
let javaScript_fold=1

Plugin 'pangloss/vim-javascript'
</code></pre>

<p>Frequently used folding shortcuts:</p>

<p>zr/zm: decrease/increase the foldlevel by one;</p>

<p>zo/zc: open/close fold at cursor;</p>

<p>zO/zM: open/close all folds;</p>

<p>Ref:</p>

<p><a href="http://stackoverflow.com/questions/4789605/how-do-i-enable-automatic-folds-in-vim">http://stackoverflow.com/questions/4789605/how-do-i-enable-automatic-folds-in-vim</a>
<a href="https://www.linux.com/learn/tutorials/442438-vim-tips-folding-fun">https://www.linux.com/learn/tutorials/442438-vim-tips-folding-fun</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/17/220931/">Vim Snippet Plugins</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-17T22:09:31+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:09 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Add codes below into ~/.vimrc:</p>

<pre><code>let g:UltiSnipsEditSplit='vertical'

Plugin 'mattn/emmet-vim'
Plugin 'SirVer/ultisnips'
Plugin 'honza/vim-snippets'
</code></pre>

<p>Run <code>vim +PluginClean +PluginInstall +qa</code>.
The folder of UltiSnips is about 6.1MB, emmet-vim is about 1.6MB.</p>

<p>Here <a href="https://github.com/mattn/emmet-vim">emmet-vim</a> is a html editing tool.
For example open a new html file with <code>html:5</code>, and press <code>&lt;C-y&gt;,</code>,
you get a full html skeleton, which means emmet installed OK.</p>

<p><a href="https://github.com/sirver/ultisnips">UltiSnips</a> is a vim snippet engine,
while <a href="https://github.com/honza/vim-snippets">vim-snippets</a> is a bunch of
snippets definitions.</p>

<p>Use <code>UltiSnipsEdit</code> to add a new snippet.
Use <code>cl&lt;TAB&gt;</code> in a js file, to make it expand to <code>console.log(...);</code>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/15/112116/">Search String Pattern in Git History</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-15T11:21:16+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:21 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><code>git log -p --all -G 'pattern'</code>: search a string in git history.</p>

<p>-G search for all editing activity with &ldquo;pattern&rdquo;,
while -S only search for creation and removal of &ldquo;pattern&rdquo;,
the results of -S is the subset of results of -G.</p>

<p>When the &ldquo;pattern&rdquo; is in the current commit,
there will be only 1 result of -S,
where the pattern is added into the texts.</p>

<p>When the &ldquo;pattern&rdquo; is removed in current commit,
there will be 2 results of -S:
the first (which is newer) is where the pattern is removed,
the second is where the pattern is added.</p>

<p>-p denotes &ndash;patch, which will print the editing details.
If you only want to know the commit name which deal with the &ldquo;pattern&rdquo;,
omit this option.</p>

<p>&ndash;all search in all branches.</p>

<p>Ref:</p>

<p><a href="http://stackoverflow.com/questions/4468361/search-all-of-git-history-for-a-string">Search all of Git history for a string?</a></p>

<p><a href="http://stackoverflow.com/questions/2839253/git-history-find-lost-line-by-keyword">Git history - find lost line by keyword</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/14/192323/">Tab and Session Management in Vim</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-14T19:23:23+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>7:23 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Session management is provided by <a href="https://github.com/tpope/vim-obsession">tpope/vim-obsession</a>.
Tab rename function is provided by <a href="https://github.com/gcmt/taboo.vim">gcmt/taboo.vim</a>.</p>

<p>I also tried <a href="https://github.com/xolox/vim-session">xolox/vim-session</a>,
but it can&rsquo;t persist tab name created by Taboo.</p>

<p>For tab easy switch, I&rsquo;ve tried <code>noremap &lt;unique&gt; &lt;C-1&gt; 1gt</code> based on
<a href="http://stackoverflow.com/questions/2005214/switching-to-a-particular-tab-in-vim">Switching to a particular tab in VIM</a>,
where changes M-Num to C-Num, because M-Num is assigned to tmux window switch.
However C-Num can&rsquo;t work,
see <a href="http://stackoverflow.com/questions/15849537/vimrc-mapping-for-control-key-not-working">.vimrc mapping for control key not working</a>
for explanations.
So I adopted <code>noremap &lt;leader&gt;1 1gt</code> style based on
<a href="http://superuser.com/questions/410982/in-vim-how-can-i-quickly-switch-between-tabs">In vim, how can I quickly switch between tabs?</a>.</p>

<p>Map long Ex commands with <code>cabbrev</code> is a very useful for convenient.
Use <Space> instead of <Tab> to enable abbreviation in <code>cabbrev</code>.
See <code>:h :ca</code>, <a href="http://stackoverflow.com/questions/117150/can-i-re-map-commands-in-vim">Can I (re-) map commands in vim?</a>
and <a href="http://stackoverflow.com/questions/3878692/aliasing-a-command-in-vim">Aliasing a command in vim</a>
for details.</p>

<p>With <code>cabbrev tr TabooRename</code>, you can use <code>:tr&lt;Space&gt;1:tests</code> to rename current tab into &ldquo;1:tests&rdquo;.
Here you have to add tab index manually to make <code>&lt;leader&gt;&lt;number&gt;</code> style switching more convenient.</p>

<p>To make tabline more readable,
I customized the color of it.
See <a href="http://stackoverflow.com/questions/4726882/how-do-you-change-the-background-color-of-the-empty-tab-space-in-vim">How do you change the background color of the empty tab space in vim?</a>
and <a href="http://stackoverflow.com/questions/7238113/customising-the-colours-of-vims-tab-bar">Customising the colours of vim&rsquo;s tab bar</a>
for details.</p>

<p>Wrap them up in ~/.vimrc:</p>

<pre><code>" Customize tabline
hi TabLineFill term=bold cterm=bold ctermbg=0
hi TabLine ctermfg=Yellow

" Taboo
set sessionoptions+=tabpages,globals
cabbrev tr TabooRename

" tab switching shortcuts
noremap &lt;leader&gt;1 1gt
noremap &lt;leader&gt;2 2gt
noremap &lt;leader&gt;3 3gt
noremap &lt;leader&gt;4 4gt
noremap &lt;leader&gt;5 5gt
noremap &lt;leader&gt;6 6gt
noremap &lt;leader&gt;7 7gt
noremap &lt;leader&gt;8 8gt
noremap &lt;leader&gt;9 9gt
noremap &lt;leader&gt;0 :tablast&lt;cr&gt;

" Add these into Vundle section
Plugin 'gcmt/taboo.vim'
Plugin 'tpope/vim-obsession'
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/06/122243/">Reaction Notes</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-06T12:22:43+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>12:22 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Accounts</h1>

<p>reaction-core的用户存在users表和Accounts表，下面是初始化Reaction后得到的Owner用户表结构。
用户与业务有关的信息存在Accounts表中，其余的放在了users表中，
server/methods/accounts.js:Accounts.onCreateUser()可以看到
Accounts中的用户是首先clone Meteor user，然后在上面添加新属性后insert到Accounts表中。
这里users中的用户作用有两个：</p>

<ul>
<li><p>基于Meteor accounts包管理用户的注册、验证、登录等动作；</p></li>
<li><p>基于alanning/meteor-roles定义用户角色；</p></li>
</ul>


<p>下面是从数据库中得到的一组实例：</p>

<pre><code>&gt; db.users.find().pretty()
{
  "_id" : "Jyt46yndz8e5tCWgN",
  "createdAt" : ISODate("2015-10-06T03:43:17.711Z"),
  "services" : {
    "password" : {
      "bcrypt" : "$2a$10$Oj.qa9YmYdQazg3WkvqlbOf2FM2.SI5V0a6Ar8kW8qGEc.dRhzHXe"
    }
  },
  "username" : "Owner",
  "emails" : [
    {
      "address" : "asy6nklv@localhost",
      "verified" : false,
      "provides" : "default"
    }
  ],
  "roles" : {
    "8jbLoDao7BaLhmCog" : [
      "guest",
      "account/profile",
      "owner",
      "admin",
      "dashboard",
      "dashboard/settings/shop",
      "dashboard/orders",
      "createProduct",
      "dashboard/accounts",
      "core",
      "shipping",
      "reaction-shipping",
      "paypal",
      "reaction-paypal",
      "braintree",
      "reaction-braintree",
      "stripe",
      "reaction-stripe",
      "authnet",
      "reaction-auth-net",
      "social",
      "reaction-social",
      "reactionAnalytics",
      "reaction-analytics"
    ],
    "__global_roles__" : [
      "owner",
      "admin",
      "dashboard"
    ]
  }
}

&gt; db.Accounts.find().pretty()
{
  "_id" : "Jyt46yndz8e5tCWgN",
  "createdAt" : ISODate("2015-10-06T03:43:17.733Z"),
  "emails" : [
    {
      "address" : "asy6nklv@localhost",
      "verified" : false,
      "provides" : "default"
    }
  ],
  "userId" : "Jyt46yndz8e5tCWgN",
  "shopId" : "8jbLoDao7BaLhmCog",
  "acceptsMarketing" : false,
  "state" : "new"
}
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/05/131004/">Meteor Development Environment on Windows</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-05T13:10:04+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>1:10 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you want develop Meteor on Windows machine,
it&rsquo;s inconvenient to install meteor, mongodb, vim, etc. on Windows.
My choice is use VM as develop environment.</p>

<p>First install <a href="https://www.virtualbox.org/">VirtualBox</a>, <a href="https://www.vagrantup.com/">Vagrant</a>,
<a href="http://executor.dk/">Executor</a>.</p>

<p>Add the Meteor Dev vagrant box to system <code>vagrant box add meteorBox mybox.box</code>.
The box is based on Ubuntu 14.04 LTS (Trusty), with provisioned Meteor, MongoDB, git, tmux,
vim and its plugins.</p>

<p>Create the VM: <code>vagrant init meteorBox</code>;</p>

<p>There are different SSH clients:</p>

<h1>MobaXterm</h1>

<p>Download <a href="http://mobaxterm.mobatek.net/">MobaXterm</a> and extract it to app folder,
say d:\Apps\MobaXterm_v7.7.</p>

<p>Create a new session in MobaXterm named &ldquo;localvm&rdquo;, with username &ldquo;vagrant&rdquo; and port 2222;</p>

<p>In Executor, add the following keywords:</p>

<pre><code>keyword: vmStart
Command: vagrant
Parameters: up
Start in: e:\Docs\MeteorBox\sysClone\vm

keyword: vmSuspend
Command: vagrant
Parameters: suspend
Start in: e:\Docs\MeteorBox\sysClone\vm

Keyword: vmLogin
Command: MobaXterm_Personal_7.7.exe
Parameters: -bookmark localvm -exitwhendone
Start in: d:\Apps\MobaXterm_v7.7

Keyword: vmStart&amp;Login
Command: vmStart||vmLogin
</code></pre>

<p>Now you can use [win-z, vmStart&amp;Login] to start VM and login.
Before you shutdown Windows machine, remember use [win-z, vmSuspend] to suspend VM
(which is always impossible).</p>

<p>Below is the procedure of getting a project into the VM:</p>

<pre><code>win-z: vmstart
win-z: vmlogin
# in the VM
ssh-keygen
# copy $(cat .ssh/id_rsa.pub) to http://phab.yourdomain.com/settings/panel/ssh
mkdir docs;cd docs
git clone ssh://git@phab.yourdomain.com/diffusion/YOURREPO/yourRepo.git 
cd yourRepo
git submodule init
git submodule update
</code></pre>

<p>Note: to add or edit keywords in Executor, use shortcut [win-z, Ctrl-k],
see Executor documents for details.</p>

<h1>Kitty</h1>

<p>If you prefer Kitty (portable version of Putty) to MobaXterm,</p>

<p>Add a new Session &ldquo;localvm&rdquo; in Kitty:</p>

<pre><code>Host name: localhost
Port: 2222
Connection -&gt; Data -&gt; Auto-login username &amp; password: vagrant
Window -&gt; Behavior: check "Full screen on Alt-Enter"
</code></pre>

<p>The corresponding &ldquo;vmLogin&rdquo; will be:</p>

<pre><code>Keyword: vmLogin
Command: kitty.exe
Parameters: -load localvm
Start in: d:\Apps\Kitty
</code></pre>

<h1>ConEmu + Kitty</h1>

<p>You can even wrap Kitty into <a href="https://github.com/Maximus5/ConEmu">ConEmu</a>,
which is a good Windows console alternative.</p>

<p>In ConEmu, add a task in Settings -> Startup -> Tasks:</p>

<pre><code>Name: Kitty
Hotkey: Win + Alt + X
Task parameters: blank
Commands: d:\Apps\Kitty\kitty.exe -new_console -load "VagrantLinux"
</code></pre>

<p>And set Kitty as the auto startup task:
Set <code>Settings -&gt; Startup -&gt; Startup options -&gt; Specified named task</code> to &ldquo;Kitty&rdquo;.</p>

<p>Add a new Executor keyword for ConEmu:</p>

<pre><code>Keyword: vmLogin
Command: d:\Apps\ConEmu\ConEmu.exe
</code></pre>

<p>(or use [Win + Alt + X] to login to VM manually in ConEmu).</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/05/110947/">Use Git in Vim With Fugitive</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-05T11:09:47+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:09 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Install</h1>

<p>Add <code>Plugin 'tpope/vim-fugitive'</code> into ~/.vimrc
and run <code>vim +PluginClean +PluginInstall +qa</code>.</p>

<h1>Get Help</h1>

<p>:help fugitive</p>

<h1>Frequently Use Commands</h1>

<table>
<thead>
<tr>
<th>Action Name </th>
<th> Meaning                </th>
<th> Close Window with</th>
</tr>
</thead>
<tbody>
<tr>
<td>:Gblame     </td>
<td> show info of each line </td>
<td> q</td>
</tr>
<tr>
<td>:Gdiff      </td>
<td> show diff in vim       </td>
<td> :q</td>
</tr>
<tr>
<td>:Gstatus    </td>
<td> show git status        </td>
<td> q</td>
</tr>
</tbody>
</table>


<p>In &ldquo;:Gstatus&rdquo; window, you can use &ldquo;-&rdquo; to add a file in/out stage area,
use &ldquo;cc&rdquo; to commit, use &ldquo;g?&rdquo; to see all available actions.</p>

<p>To see the file changes history: <code>:Git log --stat</code>.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/3">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/index.html">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/11/02/093547/">Move Window Between Multiple Screens via Tmux</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/31/011200/">Synchronize Data From MongoDB to Elasticsearch</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/30/131706/">Elasticsearch River for MongoDB</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/29/204739/">Session Management in Web Browser</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/29/200553/">将Meteor应用完整从1.2版本降级到1.1版本</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
