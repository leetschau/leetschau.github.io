
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
  <meta name="description" content="Install: apt-get install xpra; I want to run Thunderbird on host 10.32.1.81: ssh chad@10.32.1.81 xpra start :100 --start-child=thunderbird
xpra &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leetschau.github.io/posts/13">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
    <h2>A note repository aims at Data Mining, Spark, Linux, Python.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:leetschau.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/25/114456/">Run GUI Application on Remote Host</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-25T11:44:56+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:44 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Install: <code>apt-get install xpra</code>;</p>

<p>I want to run Thunderbird on host 10.32.1.81:</p>

<pre><code>ssh chad@10.32.1.81 xpra start :100 --start-child=thunderbird
xpra attach ssh:10.32.1.81:100
</code></pre>

<p>Now Thunderbird window appears. You can use &ldquo;Attach&rdquo; to add attachment from the disk of remote server, which means all GUIs from the &ldquo;root&rdquo; GUI can be accessed remotely.</p>

<p>When it&rsquo;s done, press &ldquo;Ctrl-c&rdquo; in the terminal window to close Thunderbird window. Do not click &ldquo;close&rdquo; button, it will kill the Thunderbird window in DISPLAY 100, and you can&rsquo;t visit it any more.</p>

<p>If you want visit this window later:</p>

<pre><code>ssh chad@10.32.1.81 xpra list    // so you get the $DISPLAY number 100
xpra attach ssh:10.32.1.81:100   // run this command in AppFinder (Alt-F2) instead of terminal
xpra detach ssh:81:100           // run this command in AppFinder (Alt-F2) instead of terminal
</code></pre>

<p>If you want clear all:</p>

<pre><code>ssh chad@10.32.1.81 xpra stop :100        // run this command on remote server
</code></pre>

<p>If you want to attach to a xpra server on localhost, run <code>xpra attach :100</code>;</p>

<h1>Use ssh alias</h1>

<p>Add 81 as alias of &ldquo;<a href="&#109;&#x61;&#105;&#108;&#116;&#111;&#58;&#x63;&#104;&#x61;&#x64;&#64;&#49;&#x30;&#x2e;&#51;&#50;&#46;&#x31;&#46;&#x38;&#49;">&#99;&#104;&#97;&#100;&#x40;&#49;&#x30;&#x2e;&#x33;&#x32;&#46;&#49;&#x2e;&#56;&#49;</a>&rdquo; in ~/.ssh/config. Then you can use xpra in the following way:</p>

<pre><code>ssh 81 xpra start :111 --start-child=gedit
xpra attach ssh:81:111
ssh 81 xpra list
ssh 81 xpra stop :111
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/24/120847/">Dual Monitors on Linux</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-24T12:08:47+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:08 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li><p>Connect VGA cable to laptop;</p></li>
<li><p>List all monitors&#8217; name: <code>xrandr -q</code>, or <code>ls /sys/class/drm/</code> if &ldquo;-q&rdquo; doesn&rsquo;t work.</p></li>
<li><p>Open this monitor: <code>xrandr --output VGA1 --auto</code>, now there should be same output on VGA1 and laptop screen;</p></li>
<li><p>Put scrren of laptop (LVDS1) under the screen of 19 inches monitor (VGA1) : <code>xrandr --output LVDS1 --below VGA1 --auto</code>;</p></li>
<li><p>Move an <a href="http://i3wm.org/">i3</a> workspace to monitor VGA1: <code>i3-msg move workspace to output VGA1</code>,
  of course you can use any monitor name instead of &ldquo;VGA1&rdquo;.
  Use a i3 shortcut instead of command to move workspace between monitors: add the following codes into ~/.i3/config
      # move workspace to left/right screen
      bindsym $mod+Shift+Left move workspace to output left
      bindsym $mod+Shift+Right move workspace to output right</p></li>
<li><p>Close a monitor: <code>xrandr --output VGA1 --off</code>;</p></li>
</ul>


<p>These settings worked both on Xfce and <a href="http://i3wm.org/">i3 wm</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/23/135000/">Virtual BVT System</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-23T13:50:00+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>1:50 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Prerequisites</h1>

<ol>
<li><p>The host server of the environment is 10.0.2.47;</p></li>
<li><p>Install <a href="http://www.vagrantup.com/">vagrant</a> on server 47;</p></li>
<li><p>Add vagrant box of precise x86_64: <code>vagrant box add ...</code>;</p></li>
<li><p>Create a directory named &ldquo;bvt-package&rdquo; under ~/warez, which contains:
 apache-ant-1.9.3-bin.tar.bz2
 cobertura.jar
 hamcrest-core-1.3.jar
 jdk-6u45-linux-x64.bin
 jenkins-1.544.war
 junit-4.8.1.jar
 sonar-3.6.1.zip
 svn_amd64_ubuntu12.04
     libapr1_1.4.6-1_amd64.deb
     libaprutil1_1.3.12+dfsg-3_amd64.deb
     libdb4.8_4.8.30-11ubuntu1_amd64.deb
     libneon27-gnutls_0.29.6-1_amd64.deb
     libsvn1_1.6.17dfsg-3ubuntu3_amd64.deb
     subversion_1.6.17dfsg-3ubuntu3_amd64.deb
 unzip_6.0-4ubuntu1_amd64.deb
 zip_3.0-4_amd64.deb</p></li>
<li><p>The demo product codes in subversion repository is <a href="http://10.0.2.59:8118/svn/gcp/Development-Area/GNDP">GNDP</a>;</p></li>
</ol>


<h1>Build BVT Environment</h1>

<pre><code>$ cd /home/bvt/docs
$ take mybvt
$ vagrant box list
$ vagrant init precise64
// Add the following texts into Vagrantfile after the line 'config.vm.box = "precise64":'
  config.vm.define "bs" do |bvtserver|
    bvtserver.vm.hostname = "bvt-server"
    bvtserver.vm.network "private_network", ip: "192.168.50.3",
        virtualbox__intnet: "testnet"
    bvtserver.vm.provider :virtualbox do |vbox|
      vbox.customize ["modifyvm", :id, "--natnet1", "10.3/16"]
      vbox.customize ["modifyvm", :id, "--memory", 1000]
    end
    bvtserver.vm.provision :shell, path: "provision.sh", privileged: false
    bvtserver.vm.network "forwarded_port", guest: 9000, host: 9000
    bvtserver.vm.network "forwarded_port", guest: 8088, host: 8088
  end
$ scp -r bvt@10.0.2.47:/home/bvt/warez/bvt-package packages
$ vagrant up bs
</code></pre>

<h1>Use This Environment</h1>

<ol>
<li><p>Open <a href="http://10.0.2.47:9000">Sonarqube website</a>, login with &ldquo;admin/admin&rdquo;, in Settings -> Qualify Profiles, add rules &ldquo;TongYong&rdquo; with import &ldquo;tyrules.xml&rdquo; on local disk (the next section its content);;</p></li>
<li><p>Open <a href="http://10.0.2.47:8088/">Jenkins website</a>;</p></li>
<li><p>Create Jenkins project: create a project named &ldquo;GNDP&rdquo; and add a &ldquo;shell&rdquo; build step: &ldquo;/vagrant/bvt-gndp.sh&rdquo;;</p></li>
<li><p>Build this project;</p></li>
<li><p>You get the build log on jenkins website and code analysis results on sonarqube website;</p></li>
</ol>


<h1>Needed Scripts</h1>

<h2>Vagrant provision script</h2>

<p>This is the environment building script executed during the vagrant provision period, so it&rsquo;s cited in Vagrantfile.</p>

<pre><code>$ cat /home/bvt/docs/mybvt/provision.sh
#!/bin/sh

sudo ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime

sudo dpkg -i /vagrant/packages/svn_amd64_ubuntu12.04/*.deb
sudo dpkg -i /vagrant/packages/zip_3.0-4_amd64.deb
sudo dpkg -i /vagrant/packages/unzip_6.0-4ubuntu1_amd64.deb
APP_HOME=/home/vagrant/apps
mkdir $APP_HOME
cd $APP_HOME
chmod 755 /vagrant/packages/jdk-6u45-linux-x64.bin
sh /vagrant/packages/jdk-6u45-linux-x64.bin
tar jxf /vagrant/packages/apache-ant-1.9.3-bin.tar.bz2
unzip /vagrant/packages/sonar-3.6.1.zip

export PATH=$PATH:/home/vagrant/apps/jdk1.6.0_45/bin:/home/vagrant/apps/apache-ant-1.9.3/bin
export LC_ALL=en_US.UTF-8
export JENKINS_HOME=/home/vagrant/jenkinshome
mkdir $JENKINS_HOME

sonar-3.6.1/bin/linux-x86-64/sonar.sh start
nohup java -jar /vagrant/packages/jenkins-1.544.war --httpPort=8088 1&gt;jenkins.log 2&gt;jenkins-err.log &amp;
</code></pre>

<h2>BVT shell script</h2>

<p>This script checkout the source code to be built, then invoke the Ant script. It&rsquo;s cited in Jenkins project definition.</p>

<pre><code>$ cat /home/bvt/docs/mybvt/bvt-gndp.sh
#!/bin/sh

export PATH=$PATH:/home/vagrant/apps/jdk1.6.0_45/bin:/home/vagrant/apps/apache-ant-1.9.3/bin
export LC_ALL=en_US.UTF-8

svnprefix='svn co --non-interactive --no-auth-cache --username bvt_common --password password'
svnroot='http://10.0.2.59:8118/svn/gcp/Development-Area'
prod=GNDP
$svnprefix ${svnroot}/3-SCL/Trunk/$prod /vagrant/codes/$prod

rm -rf /vagrant/codes/*.zip
cd /vagrant/codes/$prod;  ant
</code></pre>

<h2>Ant build script</h2>

<p>This script resides in the root folder of the source project GNDP in subversion repository.</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project name="MyJavaProj" basedir="./" default="coverage_report"&gt;
&lt;property name="build.dir" value="${basedir}/build" /&gt;
&lt;target name="init"&gt;
    &lt;delete dir="${build.dir}"/&gt;
    &lt;mkdir dir="${build.dir}"/&gt;
&lt;/target&gt;

&lt;property name="src.dir" value="${basedir}/src" /&gt;
&lt;property name="src.class.dir" value="${build.dir}/class" /&gt;
&lt;target name="compile-src" depends="init"&gt;
    &lt;mkdir dir="${src.class.dir}"/&gt;
    &lt;javac srcdir="${src.dir}" destdir="${src.class.dir}" encoding="UTF-8" debug="true"/&gt;
&lt;/target&gt;
&lt;taskdef classpath="cobertura.jar" resource="tasks.properties" /&gt;
&lt;property name="instrumented.class.dir" value="${build.dir}/instrumented-class" /&gt;
&lt;property name="cobertura.data.file" value="${instrumented.class.dir}/cobertura.ser" /&gt;

&lt;target name="instrument" depends="compile-src"&gt;
    &lt;cobertura-instrument datafile="${cobertura.data.file}" todir="${instrumented.class.dir}"&gt;
    &lt;fileset dir="${src.class.dir}"&gt;
        &lt;include name="**/*.class" /&gt;
    &lt;/fileset&gt;
    &lt;/cobertura-instrument&gt;
&lt;/target&gt;

&lt;property name="test.dir" value="${basedir}/test" /&gt;
&lt;property name="test.class.dir" value="${build.dir}/test" /&gt;
&lt;target name="compile-test" depends="instrument"&gt;
    &lt;mkdir dir="${test.class.dir}"/&gt;
    &lt;javac srcdir="${test.dir}" destdir="${test.class.dir}"&gt;
        &lt;classpath&gt;
            &lt;pathelement location="${instrumented.class.dir}"/&gt;
            &lt;pathelement location="${src.class.dir}"/&gt;
        &lt;/classpath&gt;
    &lt;/javac&gt;
&lt;/target&gt;

&lt;property name="unittest.report.dir" value="${build.dir}/unittest_report" /&gt;
&lt;property name="lib.dir" value="${basedir}/lib" /&gt;
&lt;target name="unittest" depends="compile-test"&gt;
    &lt;mkdir dir="${unittest.report.dir}"/&gt;
    &lt;junit printsummary="yes" fork="yes"&gt;
        &lt;sysproperty key="net.sourceforge.cobertura.datafile" file="${cobertura.data.file}" /&gt;
        &lt;classpath&gt;
            &lt;pathelement location="${instrumented.class.dir}"/&gt;
            &lt;pathelement location="${src.class.dir}"/&gt;
            &lt;pathelement location="${test.class.dir}"/&gt;
            &lt;pathelement location="${src.dir}"/&gt;
            &lt;path refid="lib.path"/&gt;
        &lt;/classpath&gt;
        &lt;formatter type="xml"/&gt;
        &lt;batchtest todir="${unittest.report.dir}" haltonerror="no"&gt;
            &lt;fileset dir="${test.dir}"&gt;
                &lt;include name="**/*.java" /&gt;
            &lt;/fileset&gt;
        &lt;/batchtest&gt;
    &lt;/junit&gt;
&lt;/target&gt;

&lt;property name="coverage.report.dir" value="${build.dir}/coverage_report" /&gt;
&lt;target name="coverage-report" depends="unittest"&gt;
    &lt;cobertura-report datafile="${cobertura.data.file}" srcdir="${src.dir}" destdir="${coverage.report.dir}" format="xml" /&gt;
&lt;/target&gt;

&lt;property name="sonar.jdbc.url" value="jdbc:h2:tcp://localhost:9092/sonar" /&gt;
&lt;property name="sonar.jdbc.username" value="sonar" /&gt;
&lt;property name="sonar.jdbc.password" value="sonar" /&gt;
&lt;property name="sonar.projectKey" value="com.doco.gif.MyModule" /&gt;
&lt;property name="sonar.projectName" value="My Unit Test Project Demo" /&gt;
&lt;property name="sonar.projectVersion" value="2.1" /&gt;
&lt;property name="sonar.language" value="java" /&gt;
&lt;property name="sonar.sources" value="src" /&gt;
&lt;property name="sonar.tests" value="test" /&gt;
&lt;property name="sonar.binaries" value="${src.class.dir},${test.class.dir},${build.instrument.dir}" /&gt;
&lt;property name="sonar.dynamicAnalysis" value="reuseReports" /&gt;
&lt;property name="sonar.surefire.reportsPath" value="${unittest.report.dir}" /&gt;
&lt;property name="sonar.core.codeCoveragePlugin" value="cobertura" /&gt;
&lt;property name="sonar.cobertura.reportPath" value="${coverage.report.dir}/coverage.xml" /&gt;
&lt;target name="sonar" depends="coverage-report"&gt;
    &lt;taskdef classpath="sonar-ant-task-2.1.jar" uri="antlib:org.sonar.ant" resource="org/sonar/ant/antlib.xml"/&gt;
    &lt;sonar:sonar xmlns:sonar="antlib:org.sonar.ant" /&gt;
&lt;/target&gt;
&lt;/project&gt;
</code></pre>

<h2>Code Static check rules</h2>

<p>This file defines the static check rules used by Sonarqube. It&rsquo;s imported manually from file &ldquo;tyrules.xml&rdquo; on local hard disk.</p>

<pre><code>$ cat ~/docs/tyrules.xml

&lt;?xml version="1.0" encoding="UTF-8"?&gt; 
&lt;!DOCTYPE module PUBLIC "-//Puppy Crawl//DTD Check Configuration 1.3//EN" "http://www.puppycrawl.com/dtds/configuration_1_3.dtd"&gt; 
&lt;module name="Checker"&gt; 
    &lt;property name="severity" value="warning"/&gt; 
    &lt;module name="TreeWalker"&gt; 
        &lt;metadata name="net.sf.eclipsecs.core.lastEnabledSeverity" value="inherit"/&gt; 
        &lt;property name="fileExtensions" value="java"/&gt; 
        &lt;module name="MethodLength"&gt; 
            &lt;property name="max" value="200"/&gt; 
        &lt;/module&gt; 
        &lt;module name="NestedIfDepth"&gt; 
            &lt;property name="max" value="5"/&gt; 
        &lt;/module&gt; 
        &lt;module name="CyclomaticComplexity"/&gt; 
            &lt;module name="ParameterNumber"&gt; 
            &lt;property name="max" value="6"/&gt; 
        &lt;/module&gt; 
    &lt;/module&gt; 
    &lt;module name="StrictDuplicateCode"&gt; 
        &lt;property name="fileExtensions" value="java"/&gt; 
        &lt;property name="min" value="75"/&gt; 
    &lt;/module&gt; 
    &lt;module name="FileLength"&gt; 
        &lt;property name="fileExtensions" value="java"/&gt; 
        &lt;property name="max" value="1000"/&gt; 
    &lt;/module&gt; 
&lt;/module&gt; 
</code></pre>

<h1>For Unit Test</h1>

<ol>
<li>copy junit-4.*.jar, cobertura.jar and hamcrest-core-1.3.jar to $ANT_HOME/lib;</li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/20/121235/">Replay Recent Executed Commands</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-20T12:12:35+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:12 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li><p>Replay recent executed 15 commands: <code>fc -l -15</code>;</p></li>
<li><p>Replay recent executed 15 commands in reverse order: <code>fc -lr -15</code>;</p></li>
<li><p>Replay recent executed 15 commands without list number: <code>fc -ln -15</code>;</p></li>
<li><p>Replay recent executed commands from &ldquo;man &hellip;&rdquo;: <code>fc -ln man</code>;</p></li>
<li><p>Edit some last commands (from No.14 to No.24) and execute them: <code>fc -e vi 14 24</code>;</p></li>
</ul>


<p>You can also use &ldquo;-s&rdquo; options to modify commands ant execute, see <code>man fc</code> for details.</p>

<ul>
<li>Clear history: <code>history -c</code>.</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/18/111355/">Import Subversion Repository From Subversion Dump File</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-18T11:13:55+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:13 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Overall steps</h1>

<ol>
<li><p>Get dump file from <a href="FTP:">FTP:</a></p></li>
<li><p>Build repository based on the dump file;</p></li>
<li><p>Authorize user of this repository.</p></li>
</ol>


<h1>Operation details</h1>

<h2>On Windows</h2>

<pre><code># get dump file with TotalCmd;
cd K:\svn
svnadmin create ALARM
svnadmin load ALARM &lt; f:\tmp\ALARM-dumpfile
# add the following text into file "c:\Program Files\Apache Group\Apache2\svnaccessfile"
    ALARM-dev=user1,user2,user3
    ####
    [ALARM:/Development-Area]
    @ALARM-dev = rw
    @QA = rw
    @Manager = r
    bvt_common = r
    * = 
    [ALARM:/Management-Area]
    @ALARM-dev = rw
    @QA = rw
    @Manager = r
    * = 
    [ALARM:/Release-Area]
    @ALARM-dev = rw
    @Manager = r
    @QA = rw
    test = r
    * = 
    [ALARM:/Test-Area]
    @ALARM-dev = r
    @QA = rw
    @Manager = r
    * = 
# add following text into file "c:\Program Files\Apache Group\Apache2\passwd"
    user1:pwd1
    user2:pwd2
    user3:pwd3
</code></pre>

<h2>On Linux</h2>

<pre><code>ftp 123.xxx.xxx.xxx
&gt; get ALARM-dumpfile
&gt; bye
cd $SVN_REPO_HOME
svnadmin create ALARM
svnadmin load ALARM &lt; ~\ALARM-dumpfile
# edit file svnaccessfile &amp; passwd the same way with in Windows
</code></pre>

<p>Note:</p>

<p>The default auth rule is &ldquo;everyone can access everything&rdquo; like the following text in svnaccessfile:</p>

<pre><code>[/] 
* = r
@Manager = rw
@QA = rw
@Dev = rw
@TEST-all = rw
</code></pre>

<p>then define more detailed rules to override the default one, notice the last line:</p>

<pre><code>[ALARM:/Development-Area]
@ALARM-dev = rw
...
* = 
</code></pre>

<p>But we can define auth rules in another way:</p>

<pre><code>[/]
* =
[ALARM:/Development-Area]
@ALARM-dev = rw
...
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/13/155048/">Group Substitution in Vim</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-13T15:50:48+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>3:50 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The origin text is:</p>

<p>sqoop export &ndash;columns int_id,date_time,mr_count,ecno_pollution,rscp_0,rscp_1,rscp_2,rscp_3,rscp_4,rscp_5,load_time &ndash;input-field</p>

<p>The target text is:</p>

<p>sqoop export &ndash;columns int_id,date_time,mr_count,ecno_pollution,rscp0,rscp1,rscp2,rscp3,rscp4,rscp5,load_time &ndash;input-field</p>

<p>We want remove all underscore in &ldquo;rscp_3&rdquo;, which means converting it to &ldquo;rscp3&rdquo;. The real text has ninety more items, so we can&rsquo;t do substitutions manually. And other items also use underscore, so you can&rsquo;t only remove all underscores.</p>

<p>Solution: <code>:s/rscp_\(\d\+\)/rscp\1/gc</code>.</p>

<p>We use &ldquo;(&rdquo; and &ldquo;)&rdquo; to mark a group, use &ldquo;\1&rdquo; to represent it in the new strings.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/12/114812/">Join Ragged Columns Im Vim</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-12T11:48:12+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:48 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I need to format some texts copied from a PDF file:</p>

<p>a
ab
abc
cd
e</p>

<p>=>
=>
=>
=>
=></p>

<p>x
xy
xyz
pq
p</p>

<p>The target form is:</p>

<p>a   => x
ab  => xy
abc => xyz
cd  => pq
e   => p</p>

<p>I want to select the whole last section (x&hellip;p) in visual block mode, and paste them after the 2nd section (=>). But in visual block mode (triggered by Ctrl-v), I can&rsquo;t select all of last section. Because there&rsquo;s only one character &ldquo;p&rdquo; in the last line, so only &ldquo;x&rdquo; in the 3rd line (xyz) will be selected. The solution is set &ldquo;virtualedit&rdquo; mode to &ldquo;all&rdquo; with &ldquo;:set ve=all&rdquo;. Now the cursor is free to anywhere no matter if there&rsquo;s a character. After the joining, we have to remove all trailing spaces. So the overall process is:</p>

<p>:set ve=all
&lt;C-v, select and paste, ESC to normal mode>
<select all line joined together in visual line mode>
:&lsquo;&lt;,&rsquo;>s/\s*//g
:set ve=</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/11/150101/">Ragged Array in Java</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-11T15:01:01+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>3:01 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Ragged array is a multi-dimensional array, whose elements has different length:</p>

<pre><code>$ cat Test.java
public class Test {
    public static void main(String[] args) {
        int[][] aa;
        aa = new int[3][];  // notice the unique way of it's initialization
        aa[0] = new int[2];
        aa[1] = new int[4];
        aa[2] = new int[5];
        aa[1][3] = 34;
        for (int i = 0; i &lt; aa.length; i++) {
            for (int j = 0; j &lt; aa[i].length; j++) {
                System.out.println("element aa[" + i + "][" + j + "] is: "
                        + aa[i][j]);
            }
        }
    }
}
$ javac Test.java
$ java Test
element aa[0][0] is: 0
element aa[0][1] is: 0
element aa[1][0] is: 0
element aa[1][1] is: 0
element aa[1][2] is: 0
element aa[1][3] is: 34
element aa[2][0] is: 0
element aa[2][1] is: 0
element aa[2][2] is: 0
element aa[2][3] is: 0
element aa[2][4] is: 0
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/11/143709/">Convert an Integer to a Long Value in Java</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-11T14:37:09+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>2:37 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>When you convert an integer to a long, you must convert the integer to a long before any calculations, or it will give the wrong result.</p>

<pre><code>$ cat Test.java
public class Test {
    public static void main(String[] args) {
        int io = Integer.MAX_VALUE;
        int ir = io + 1;
        long la = io + 1;
        long lb = ((long)io) + 1;
        System.out.println("Value of int variable io is: " + io);
        System.out.println("Value of int variable ir is: " + ir);
        System.out.println("Value of long variable la is: " + la);
        System.out.println("Value of long variable lb is: " + lb);
    }
}
$ javac Test.java
$ java Test
Value of int variable io is: 2147483647
Value of int variable ir is: -2147483648
Value of long variable la is: -2147483648
Value of long variable lb is: 2147483648
</code></pre>

<p>So only the 3rd form (lb) gives the right result.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/06/100153/">Use VimIM as Chinese Input Method</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-06T10:01:53+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:01 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Website: <a href="https://github.com/xhh/vimim">xhh/vimim</a></p>

<h1>Install</h1>

<pre><code>$ cd ~/docs/tmp
$ git clone https://github.com/xhh/vimim.git
$ mkdir -p /home/chad/.vim/bundle/vimim/plugin
$ cp vimim/trunk/plugin/vimim.vim /home/chad/.vim/bundle/vimim/plugin
$ cp vimim/vim/vimfiles/plugin/vimim.txt /home/chad/.vim/bundle/vimim/plugin
</code></pre>

<h1>Config</h1>

<h2>OneKey Mode</h2>

<p>Add &ldquo;let g:vimim_tab_as_onekey=1&rdquo; into ~/.vimrc;</p>

<h1>Usage</h1>

<p>See manual vimim/vimim.html</p>

<h1>Add custom datafile</h1>

<p>VimIM only accept one dictionary file: vimim.txt above. So you can only add items into it, while can&rsquo;t build a new dictionary file.</p>

<h1>Add new item into dictionary</h1>

<p>Add &ldquo;jiqun 集群&rdquo; directly into /home/chad/.vim/bundle/vimim/plugin/vimim.txt.
The vimim.txt must be sorted, so you have to add your items in order.
You can keep the edit window of vimim.txt open. While the file saved, the item will take effect at once without re-open the vim instance using VimIM.</p>

<h1>Query current status of VimIM</h1>

<p>Under insert mode of vim, input &ldquo;vimim&rdquo;, then press <Ctrl-6> or tab.</p>

<h1>Problems</h1>

<ol>
<li><p>分词功能有问题，比如要输入“和部署”，在hebushu后按tab键时，给出的选项是“何不”和“何”，要打出“和”，必须先删除bushu，在he后面按tab键，这种操作太复杂了；</p></li>
<li><p>不能实时显示结果，当写比较长的一段话时，要把整句话打完按tab才能开始转换中文，一旦中间有拼写错误，就得重写；</p></li>
<li><p>词库太小，不仅无法跟搜狗拼音比，也无法跟ibus-pinyin比；</p></li>
<li><p>联系困难，google code被屏蔽的厉害，文档里也没有作者联系方式；</p></li>
</ol>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/14">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/12">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/12/31/101055/">将中文字符串转换为拼音首字母串</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/29/193156/">Frequent Used Commands in Mongodb Shell</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/29/151419/">遍历Javascript对象属性的方法</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/29/112803/">清理/usr/local/bin目录</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/27/103944/">Run Java Program in Java Program</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
