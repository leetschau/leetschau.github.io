
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dark Matter in Cyberspace</title>
  <meta name="author" content="Li Chao">

  
  <meta name="description" content="apt-get install/remove 安装/卸载软件；* cat 显示文本文件；
aspell 交互式拼写检查命令；
basename 两种用法：1. 去掉路径，返回文件名：basename /foo/bar -> bar；2. 去掉后缀，返回文件名：basename foo.bar . &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://leetschau.github.io/posts/95">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dark Matter in Cyberspace" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dark Matter in Cyberspace</a></h1>
  
    <h2>A note repository aims at Data Mining, Spark, Linux, Python.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:leetschau.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/05/05/102159/">Linux常用命令笔记</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-05-05T10:21:59+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>10:21 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li><p>apt-get install/remove 安装/卸载软件；* cat 显示文本文件；</p></li>
<li><p>aspell 交互式拼写检查命令；</p></li>
<li><p>basename 两种用法：1. 去掉路径，返回文件名：basename /foo/bar -> bar；2. 去掉后缀，返回文件名：basename foo.bar .bar -> foo</p></li>
<li><p>cat 显示文件内容，例如&#8221;cat /proc/cpuinfo&#8221;可以查看CPU信息；有用的几个选项：-A: 显示不可见字符；-n显示行号，-s将相邻的多个空行合并为一个空行（只针对显示内容，不影响原文件内容）；</p></li>
<li><p>cd 改变目录；</p></li>
<li><p>chmod 修改文件属性，chmod user/group/other/all +/- read/write/execute filename, 例如chmod u+x file1是只给file1的user赋予执行权限；参考<a href="https://www.washington.edu/computing/unix/permissions.html">How to Set File Permissions Using `chmod&#8217;</a></p></li>
<li><p>chown 变更文件（或目录）的拥有者（或所属群组），例如root用户执行&#8221;chown godu:root -R ./ArtifactRepo&#8221;表示将当前目录下的ArtifactRepo目录及子目录所有权变更给godu用户和root用户组；</p></li>
<li><p>comm 比较文件，适于比较短的文件间做比较；</p></li>
<li><p>cp 拷贝文件；cp -r src_folder dst_folder 拷贝目录；</p></li>
<li><p>cut 截取文件每一行中的一部分，&#8221;-c&#8221;以字符为单位，&#8221;-f&#8221; 以域为单位（要求以tab为分隔符，空格无效）；&#8221;-d&#8221;指定域的分隔符；</p></li>
<li><p>date 显示系统日期和时间，使用-s参数可以设置日期和时间：date -s &ldquo;2 OCT 2006 18:00:00&rdquo;</p></li>
<li><p>df 显示磁盘使用情况，例如&#8221;df -h $HOME&#8221;是显示用户主目录的已用和可用的磁盘空间；</p></li>
<li><p>diff 比较两个文件或者目录，&#8221;-c&#8221;采用context格式，&#8221;-u&#8221;采用unified格式；</p></li>
<li><p>dmidecode 显示硬件设备信息；</p></li>
<li><p>dpkg 包管理，dpkg -l 列出所有已安装包；dpkg -l <package_name> 查询<package_name>的情况（是否安装，版本等）；dpkg -i 安装包；dpkg -r 卸载包；dpkg -P 完全卸载（purge）；</p></li>
<li><p>du -sh <folderName>: 查看文件夹占用的磁盘空间大小(s stands for summary, h stands for human readable），要打印某目录下所有项目（目录和文件）尺寸汇总：du -sh *，如果只打印目录：du -h &ndash;max-depth=1 <folderName>；将以上汇总按尺寸大小升序（从小到大）排列：du -s * | sort -n，降序排列：du -s * | sort -rn (r stands for reverse)，排序时不要加-h选项（它会导致排序错误，例如5M会被排在6k之前）；List largest 10 folders in current folder: <code>du -s *|sort -rn|head</code></p></li>
<li><p>env 列出环境变量</p></li>
<li><p>exit 退出；</p></li>
<li><p>expand 将文件中的tab转换为spaces;</p></li>
<li><p>export 将变量定义为环境变量（仅用于bash，格式为export VAR_NAME=var_value）；</p></li>
<li><p>find 查找文件，最常用格式：find <path> -name <file_name>，例如查找当前目录下名为test的文件和目录：find . -name test，详见 Linux查找文件命令find</p></li>
<li><p>free 查看系统memory使用情况，第一行（Mem）是考虑了内核缓冲后的使用率，第二行（&#8221;-/+ buffer/cache&#8221;）才是软件使用的内存；</p></li>
<li><p>genisoimage 将光盘制作为ISO文件，类似的还有dvdbackup，但需要安装，用dd也可以，但据说可能会出错，因为没有错误校验；</p></li>
<li><p>grep 从文件中查找字符串，grep -c &ldquo;<regex>&#8220;表示计算<regex>出现的次数，参考笔记&rdquo; Replace a String in Multiple Files in a Directory on Linux &ldquo;；</p></li>
<li><p>gzip/gunzip 压缩/解压缩gz文件；</p></li>
<li><p>hdparm 获取或者设置硬件信息；</p></li>
<li><p>hwinfo 类似于lshw, Ubuntu上需要安装：apt-get install hwinfo, 内容十分庞杂，或者叫详细；</p></li>
<li><p>inxi -Fx 显示易于阅读的设备信息，格式最易于阅读；</p></li>
<li><p>iostat 显示系统磁盘当前的IO状况（Ubuntu，CentOS支持，Red Hat不支持）</p></li>
<li><p>ip 查询IP相关信息，<code>ip addr</code>=<code>ifconfig</code>, 其他还有<code>ip route</code> 和 <code>ip link</code>;</p></li>
<li><p>less <filename> 查看文本文件内容，或者压缩文件（如zip, tar.gz, jar, war等）的内部结构，操作类似于只读版vi，如用/查找，j, k, gg, G浏览等；</p></li>
<li><p>ln 创建文件链接（link），一般创建的是软链接（symbolic link），在target_dir目录下创建src_file1，src_file2等文件的软链接：ln -s src_file1 src_file2 &hellip; [target_dir]，最常用的格式是在目标目录下运行&#8221;ln -s src_file&#8221;，就在当前目录下创建了一个与src_file同名的软链接（src_file可以是绝对路径或者相对路径）, or give the link a new name: cd $target_dir; ln -s /source/to/link new_link_name</p></li>
<li><p>ls 显示当前目录下内容，可用选项：-d: 显示目录（而不是目录中的内容）；-R: 显示所有子目录中的内容，类似于tree，但不写成树状；-m:目录项之间用逗号做分隔符（而不是换行符），主要用于向其他程序做管道输入；</p></li>
<li><p>lsb_release -a 显示操作系统的distro ID和版本号，而不仅是uname提供的内核情况，此指令适用于Ubuntu，CentOS和Redhat，Redhat还可以用&#8221;cat /etc/redhat-release&#8221;查看distro ID；</p></li>
<li><p>lsblk -f 显示块设备信息，用于确定未mount的USB设备卷标、硬盘分区信息等；</p></li>
<li><p>lscpu 显示CPU相关信息；</p></li>
<li><p>lshw 列出硬件信息，比hwinfo精炼一些；</p></li>
<li><p>lsof 列出打开的文件，-p可以指定某个进程打开的文件，-u指定用户打开的文件，-c某个命令打开的文件，-i显示打开的网络端口，-i :22显示谁连接了22端口，-i tcp显示所有打开的TCP连接，-a -u bvt -i显示bvt用户打开的所有网络端口，其中&#8221;-a&#8221;表示后面的&#8221;-u bvt&#8221;与&#8221;-i&#8221;两个参数间是AND关系；
Ref: <a href="http://www.catonmat.net/blog/unix-utilities-lsof/">A Unix Utility You Should Know About: lsof</a> and <a href="http://www.ibm.com/developerworks/aix/library/au-lsof.html">Finding open files with lsof</a></p></li>
<li><p>lspci 显示PCI硬件设备信息，为Gentoo等Linux内核内核安装驱动时有用；</p></li>
<li><p>lsusb 显示USB总线信息；</p></li>
<li><p>mkdir 新建文件夹，-p指令可以用来建立多级目录，配合{}，可以一次建立一个目录树，例如&#8221;mkdir -p godu/{bin/{bin1,bin2},lib/{lib1,lib2}}&ldquo;可以建立一个3层目录树（用tree或者ls -R指令查看结果）；</p></li>
<li><p>more 分屏显示文件内容；</p></li>
<li><p>mount 用来挂载设备，如果没有参数则显示当前已挂载的设备；</p></li>
<li><p>mpstat 显示系统cpu当前状态（CentOS和Redhat支持）</p></li>
<li><p>netstat 显示某个进程使用了哪个端口，或者某个端口被哪个进程使用，例如&#8221;netstat -tupln|grep :1527&#8221;可以查询所有包含1527的进程-端口关系；</p></li>
<li><p>rm 删除文件（和目录），例如删除当前目录下有一个tcp_rpc子目录，删除其中所有.gitignore文件（包括所有子目录）：&#8221;rm -ri tcp_rpc/<em>*/.git</em>&ldquo;，其中选项r表示包含所有子目录，i表示删除前询问；</p></li>
<li><p>rm -r folder_name 删除目录（如果子目录很多需要手工确认删除，可以用rm -rfv强制删除）；</p></li>
<li><p>passwd 修改密码；</p></li>
<li><p>paste 将多个文件的对应行连接在一起，例如paste -d &lsquo;-&rsquo; file1 file2将file1的第一行与file2的第一行以&#8217;-&lsquo;连接，后面各行依此类推；</p></li>
<li><p>pgrep 根据指定规则找出进程PID，相当于&#8221;ps -ef| grep &hellip;&ldquo;，-l列出进程名，-lf列出完整进程名；</p></li>
<li><p>pkill 关闭符合指定规则的PID，相当于&#8221;pgrep &hellip;|xargs kill&#8221;；</p></li>
<li><p>ps 显示进程信息；</p></li>
<li><p>pwdx [PID] 显示[PID]指定进程的当前工作目录，可以先用ps命令查到进程的PID，再用这个命令找工作目录；</p></li>
<li><p>rsync: rsync [options] src dst,</p>

<ul>
<li><p>&ldquo;-r&rdquo;: recursive, if src is a directory, &ldquo;rsync -r src dst&rdquo; means &ldquo;src&rdquo; itself with all things in it will be copied to dst, while &ldquo;rsync -r src/ dst&rdquo; will copy all things under &ldquo;src&rdquo; except &ldquo;src&rdquo; itself to &ldquo;dst&rdquo;;</p></li>
<li><p>&ldquo;-C&rdquo;: If you want avoid copy &ldquo;.svn&rdquo; or &ldquo;.git&rdquo; folder;</p></li>
<li><p>&ldquo;-u&rdquo; means update, if the file in dst is newer than that in src, it will not be copied;</p></li>
<li><p>&ldquo;-a&rdquo; means archive, keep the meta data (modify date and time, etc) of src files when copy, equals to &ldquo;-rlptgoD&rdquo;;</p></li>
<li><p>&ldquo;-t&rdquo; keep the modification time of original files;</p></li>
<li><p>&ldquo;-v&rdquo; means verbose;</p></li>
<li><p>&ldquo;&ndash;delete&rdquo; means delete files in destination folder which not exist in source folder;</p></li>
<li><p>&ldquo;-p&rdquo; means keep permissions between src and dst;</p></li>
<li><p>&ldquo;-l&rdquo; copy symlinks as symlinks;</p></li>
</ul>
</li>
</ul>


<p>&ldquo;r&rdquo; means recursive (including subdirs); t meas preserve modification time of the files; v means verbose; u means update, if the file in dst is newer than that in src, it will not be copied;</p>

<ul>
<li><p>script <file_name> 开始将屏幕输出记录到<file_name>中，输入exit结束日志记录；</p></li>
<li><p>setenv csh中定义环境变量，格式为setenv VAR_NAME var_value（与bash的export不同，变量名与值之间是空格而非等号）；</p></li>
<li><p>sort 以行为单位排序，&#8221;-n&#8221; 数字排序，例如&#8221;du -s <target_path> | sort -n&#8221;可以按文件夹大小排序；&#8221;-k&#8221;指定排序的项，例如下面需要对多个文件夹（Common, Element, Service）下的子目录汇总后按文件名排序，由于文件名是第9项（默认以空格或者tab为分割符，可以用&#8221;-t&#8221;指定其他分隔符），所以sort的选项设置为&#8221;-k 9,9&#8221;：</p>

<p>  drwxrwxr-x 7 bvt bvt 4096 Nov 12 10:24 datasource_core</p>

<p>  $ ll Common Element Service | sort -k 9,9</p></li>
</ul>


<p>sort支持用多个-k选项对多个域做不同种类的排序，下面的命令首先对第一个域做字母排序，然后对第二个域做数字排序：</p>

<pre><code>sort -k 1,1 -k 2n distros.txt
</code></pre>

<ul>
<li><p>source .profile 载入环境变量；</p></li>
<li><p>stat 显示文件详细信息</p></li>
<li><p>su 参考 Switch User Command in Linux</p></li>
<li><p>sudo passwd 在新装好系统中为root设置密码；</p></li>
<li><p>tar -zxvf或者gzip -d加tar -xvf解压缩；</p></li>
<li><p>tee 将stdin的内容同时重定向到stdout和文件中：ls /usr/bin|tee ls.txt|grep zip</p></li>
<li><p>time 计算程序运行时间，输出中的total值是时钟时间，还有一个/usr/bin/time -p指令输出的&#8221;real&#8221;值是实际的时钟时间；实例见 Calculate PI in 3 Languages Dynamically ；</p></li>
<li><p>top 具体功能以及与prstat的关系待查；</p></li>
<li><p>touch 更改文件的最后修改时间，&#8221;-r <filename>&ldquo;：设置为<filename>的时间；&rdquo;-d <timeString>&ldquo;：从字符串读取时间，可以是相对时间，这二者连用，可以实现“将A文件的时间设为比B文件早两天”这样的效果：</p>

<p>  touch -r fileB -d &lsquo;-2 days&rsquo; fileA</p></li>
<li><p>tr 字符变换，例如将多行文本汇总到一行，以逗号分隔：cat <file_name> | tr &lsquo;\n&rsquo; &lsquo;,&rsquo;</p></li>
<li><p>tree 用树状结构显示文件夹，-L 3表示只显示最上面3层目录；-d表示只显示目录，不显示文件；</p></li>
<li><p>type 显示命令类型，有shell builtin（如type自身）,shell function（如cd），以及外部命令，显示命令文件路径；</p></li>
<li><p>uptime 系统已经运行的时间、用户数、CPU负载量，与top指令的第一行输出相同；</p></li>
<li><p>whereis 查找可执行文件和文档的位置，例如linux上无法执行ifconfig时用whereis ifconfig可以找到这个命令所在的路径；</p></li>
<li><p>which 显示命令在PATH环境变量中第一个出现的位置，尤其适用于一个命令在PATH中有多个版本，可以用which确定当前执行版本的完整路径；</p></li>
<li><p>who: list all users logged onto the host</p></li>
<li><p>whois: get the owner information of a domain, for example: whois boco.com.cn</p></li>
<li><p>xargs</p></li>
<li><p>xxd: 以16进制显示文件内容，与UltraEdit的Hex模式类似；</p></li>
<li><p>zip: zip <file_name> -r <folder_name></p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/23/083909/">“柴油机总体分析系统”开发手记</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-04-23T08:39:09+08:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2010</span></span> <span class='time'>8:39 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>该项目是应贾德文要求，做一个后端数值计算＋前端GUI实现，要求开发工具兼具较强的数值计算能力（尤其是矩阵和向量计算）、易用性（不需要内存、指针、堆栈、消息等专门知识）、用户图形界面（GUI）开发和程序打包（生成单一exe文件）功能。备选方案有pyhton、matlab和scilab，matlab是商业软件，体积庞大，GUI和打包比较麻烦，scilab数值计算功能一般，语法比较独特，GUI采用Tcl实现，好像也没有打包功能，而python平台在这方面表现最好，numpy模块的数值计算功能强大，GUI设计方面，简单界面可选Tkinter，复杂的可选wxPython，打包用py2exe模块，因此本项目最终选择在WinXP + python2.5平台上完成。 tkinter的界面设计基本方法：多层frame嵌套；
一般是两句定义一个控件，第一句定义控件特征，第二句定义放置方法，Label和Button可实现单语句定义；
向量数字的格式化输出，同时转化为长度固定的字符串： Python中[for ii in aa]的强大功能：见附件的第212、213行（给resMtx幅值的语句，在表达式中使用for语句）； Text的tab控制输出格式：格式字符串也可实现对齐，但tab stop有4种对齐方式，功能更强； GUI字体的设置方法：定义专门的字体设置字符串； 中文GUI界面的编码问题：在文件头加上：# -<em>- coding:utf-8 -</em>-，指明用utf8编码； CheckBox的判断： 界面上取得的字符串转化为数组，进行数学运算后表现在界面上：
from numpy import *
from Tkinter import *
def solve1():
 resStr = inp_txt.get(&lsquo;1.0&rsquo;,END)
 bb = fromstring(resStr,&rsquo;d&#8217;,-1,&lsquo; &rsquo;).reshape(3,-1)
 print type(bb)
 print bb.shape
 out_txt.insert(&lsquo;1.0&rsquo;, transpose(bb))
root = Tk()
top = Frame(root)
top.pack(side=&lsquo;top&rsquo;)
inp_txt = Text(top, font=(&lsquo;Times&rsquo;,12),height=5,width=30)
inp_txt.insert(&lsquo;1.0&rsquo;,&lsquo;12 23\n34 45\n34.5 98.234&rsquo;)
inp_txt.pack(side=&lsquo;top&rsquo;)
Button(top, text=&lsquo;solve&rsquo;, command=solve1).pack(side=&lsquo;top&rsquo;,padx=40)
out_txt = Text(top, font=(&lsquo;Times&rsquo;,12),height=5,width=30)
out_txt.pack(side=&lsquo;top&rsquo;)
root.mainloop()
其他python编程实践：单句代码的折行、多句代码放在一行；pass语句的作用；</p>

<p>下面是Anova.py文件内容：
 # -<em>- coding:utf-8 -</em>-
 from Tkinter import Tk, Frame, LabelFrame, Label, Entry, Text, Button, \
  IntVar, Checkbutton, X, CENTER, NUMERIC, END
 from numpy import zeros, transpose, fromstring, reshape
 import rwMtx as rwm
 from tkMessageBox import showwarning</p>

<p> def Anova7(schMtx, calcMtx):
  k = 7 # total number of factors
  m = 3 # total number of levels
  n = 18 # total number of experiments
  r = n/m
  # here add the format check
  T = sum(calcMtx)
  CT = T<strong>2/n
  QT = sum(calcMtx</strong>2)
  ST = QT - CT
  K = zeros((m ,k))
  K[0,0] = sum(calcMtx[0:3]) + sum(calcMtx[9:12])
  K[1,0] = sum(calcMtx[3:6]) + sum(calcMtx[12:15])
  K[2,0] = sum(calcMtx[6:9]) + sum(calcMtx[15:18])
  K[0,1] = calcMtx[0]+calcMtx[3]+calcMtx[6]+calcMtx[9]+calcMtx[12]+calcMtx[15]
  K[1,1] = calcMtx[1]+calcMtx[4]+calcMtx[7]+calcMtx[10]+calcMtx[13]+calcMtx[16]
  K[2,1] = calcMtx[2]+calcMtx[5]+calcMtx[8]+calcMtx[11]+calcMtx[14]+calcMtx[17]
  K[0,2] = calcMtx[0]+calcMtx[3]+calcMtx[8]+calcMtx[10]+calcMtx[14]+calcMtx[16]
  K[1,2] = calcMtx[1]+calcMtx[4]+calcMtx[6]+calcMtx[11]+calcMtx[12]+calcMtx[17]
  K[2,2] = calcMtx[2]+calcMtx[5]+calcMtx[7]+calcMtx[9]+calcMtx[13]+calcMtx[15]
  K[0,3] = calcMtx[0]+calcMtx[5]+calcMtx[6]+calcMtx[10]+calcMtx[13]+calcMtx[17]
  K[1,3] = calcMtx[1]+calcMtx[3]+calcMtx[7]+calcMtx[11]+calcMtx[14]+calcMtx[15]
  K[2,3] = calcMtx[2]+calcMtx[4]+calcMtx[8]+calcMtx[9]+calcMtx[12]+calcMtx[16]
  K[0,4] = calcMtx[0]+calcMtx[5]+calcMtx[7]+calcMtx[11]+calcMtx[12]+calcMtx[16]
  K[1,4] = calcMtx[1]+calcMtx[3]+calcMtx[8]+calcMtx[9]+calcMtx[13]+calcMtx[17]
  K[2,4] = calcMtx[2]+calcMtx[4]+calcMtx[6]+calcMtx[10]+calcMtx[14]+calcMtx[15]
  K[0,5] = calcMtx[0]+calcMtx[4]+calcMtx[8]+calcMtx[11]+calcMtx[13]+calcMtx[15]
  K[1,5] = calcMtx[1]+calcMtx[5]+calcMtx[6]+calcMtx[9]+calcMtx[14]+calcMtx[16]
  K[2,5] = calcMtx[2]+calcMtx[3]+calcMtx[7]+calcMtx[10]+calcMtx[12]+calcMtx[17]
  K[0,6] = calcMtx[0]+calcMtx[4]+calcMtx[7]+calcMtx[9]+calcMtx[14]+calcMtx[17]
  K[1,6] = calcMtx[1]+calcMtx[5]+calcMtx[8]+calcMtx[10]+calcMtx[12]+calcMtx[15]
  K[2,6] = calcMtx[2]+calcMtx[3]+calcMtx[6]+calcMtx[11]+calcMtx[13]+calcMtx[16]
  Q = zeros(k)
  for i in range(k):
   Q[i] = sum(K[:,i]**2)/r
  S = Q - CT
  Se = ST - sum(S) # error of S
  dofLevel = m - 1 # degree of freedom
  dofSum = n - 1
  dofErr = dofSum - dofLevel * k
  sms = S / dofLevel # sum of mean square
  errSms = Se / dofErr
  F0 = sms / errSms
  Ap = (F0 - F0.min())/((F0.max() - F0.min())/0.9) + 0.1
  A = (Ap/sum(Ap)).transpose()
  R = zeros((k,m))
  for i in range(k):
   R[i,:] = (schMtx[i,:] - schMtx[i,:].min())/((schMtx[i,:].max() - schMtx[i,:].min())/0.9) + 0.1
  B = zeros(m)
  for i in range(m):
   dd = zeros(k)
   for j in range(k):
    dd[j] = min(A[j],R[j,i])
   B[i] = max(dd)
  min_index = B.argmin() # optimization result
  # assemble the return value:
  return B, schMtx[:,min_index]</p>

<p> def Anova5(calcMtx):
  k = 5 # total number of factors
  m = 3 # total number of levels
  n = 18 # total number of experiments
  r = n/m
  # here add the format check
  T = sum(calcMtx)
  CT = T<strong>2/n
  QT = sum(calcMtx</strong>2)
  ST = QT - CT
  K = zeros((m ,k))
  K[0,0] = sum(calcMtx[0:3]) + sum(calcMtx[9:12])
  K[1,0] = sum(calcMtx[3:6]) + sum(calcMtx[12:15])
  K[2,0] = sum(calcMtx[6:9]) + sum(calcMtx[15:18])
  K[0,1] = calcMtx[0]+calcMtx[3]+calcMtx[6]+calcMtx[9]+calcMtx[12]+calcMtx[15]
  K[1,1] = calcMtx[1]+calcMtx[4]+calcMtx[7]+calcMtx[10]+calcMtx[13]+calcMtx[16]
  K[2,1] = calcMtx[2]+calcMtx[5]+calcMtx[8]+calcMtx[11]+calcMtx[14]+calcMtx[17]
  K[0,2] = calcMtx[0]+calcMtx[3]+calcMtx[8]+calcMtx[10]+calcMtx[14]+calcMtx[16]
  K[1,2] = calcMtx[1]+calcMtx[4]+calcMtx[6]+calcMtx[11]+calcMtx[12]+calcMtx[17]
  K[2,2] = calcMtx[2]+calcMtx[5]+calcMtx[7]+calcMtx[9]+calcMtx[13]+calcMtx[15]
  K[0,3] = calcMtx[0]+calcMtx[5]+calcMtx[7]+calcMtx[11]+calcMtx[12]+calcMtx[16]
  K[1,3] = calcMtx[1]+calcMtx[3]+calcMtx[8]+calcMtx[9]+calcMtx[13]+calcMtx[17]
  K[2,3] = calcMtx[2]+calcMtx[4]+calcMtx[6]+calcMtx[10]+calcMtx[14]+calcMtx[15]
  K[0,4] = calcMtx[0]+calcMtx[4]+calcMtx[8]+calcMtx[11]+calcMtx[13]+calcMtx[15]
  K[1,4] = calcMtx[1]+calcMtx[5]+calcMtx[6]+calcMtx[9]+calcMtx[14]+calcMtx[16]
  K[2,4] = calcMtx[2]+calcMtx[3]+calcMtx[7]+calcMtx[10]+calcMtx[12]+calcMtx[17]
  Q = zeros(k)
  for i in range(k):
   Q[i] = sum(K[:,i]**2)/r
  S = Q - CT
  Se = ST - sum(S) # error of S
  dofLevel = m - 1 # degree of freedom
  dofSum = n - 1
  dofErr = dofSum - dofLevel * k
  sms = S / dofLevel # sum of mean square
  errSms = Se / dofErr
  F0 = sms / errSms
  optLevel = K.argmin(0)+1
  resMtx = {&lsquo;factors&rsquo;:[&lsquo;A&rsquo;, &lsquo;B&rsquo;, &lsquo;C&rsquo;, &rsquo;D&#8217;, &lsquo;E&rsquo;, &lsquo;Error&rsquo;, &lsquo;Sum&rsquo;], &rsquo;S&#8217;:[&lsquo;%10.5f&rsquo;%ii for ii in S], &lsquo;Se&rsquo;:&lsquo;%10.5f&rsquo;%Se, &lsquo;ST&rsquo;:&lsquo;%10.5f&rsquo;%ST,\
   &lsquo;dofLevel&rsquo;:dofLevel, &lsquo;dofErr&rsquo;:dofErr, &lsquo;dofSum&rsquo;:dofSum, &lsquo;sms&rsquo;:[&lsquo;%10.5f&rsquo;%ii for ii in sms], &lsquo;errSms&rsquo;:&lsquo;%10.5f&rsquo;%errSms, &lsquo;F0&rsquo;:[&lsquo;%10.5f&rsquo;%ii for ii in F0], &lsquo;optLevel&rsquo;:optLevel}
  return resMtx</p>

<p> def Anova4(calcMtx):
  k = 4 # total number of factors
  m = 3 # total number of levels
  n = 9 # total number of experiments
  r = n/m
  # here add the format check
  T = sum(calcMtx)
  CT = T<strong>2/n
  QT = sum(calcMtx</strong>2)
  ST = QT - CT
  K = zeros((m ,k))
  K[0,0] = calcMtx[0]+calcMtx[1]+calcMtx[2]
  K[1,0] = calcMtx[3]+calcMtx[4]+calcMtx[5]
  K[2,0] = calcMtx[6]+calcMtx[7]+calcMtx[8]
  K[0,1] = calcMtx[0]+calcMtx[3]+calcMtx[6]
  K[1,1] = calcMtx[1]+calcMtx[4]+calcMtx[7]
  K[2,1] = calcMtx[2]+calcMtx[5]+calcMtx[8]
  K[0,2] = calcMtx[0]+calcMtx[5]+calcMtx[7]
  K[1,2] = calcMtx[1]+calcMtx[3]+calcMtx[8]
  K[2,2] = calcMtx[2]+calcMtx[4]+calcMtx[6]
  K[0,3] = calcMtx[0]+calcMtx[4]+calcMtx[8]
  K[1,3] = calcMtx[1]+calcMtx[5]+calcMtx[6]
  K[2,3] = calcMtx[2]+calcMtx[3]+calcMtx[7]
  Q = zeros(k)
  for i in range(k):
   Q[i] = sum(K[:,i]**2)/r
  S = Q - CT
  Se = min(S) # error of S
  dofLevel = m - 1 # degree of freedom
  dofSum = n - 1
  dofErr = dofLevel
  sms = S / dofLevel # sum of mean square
  errSms = Se / dofErr
  F0 = sms / errSms
  optLevel = K.argmin(0)+1
  resMtx = {&lsquo;factors&rsquo;:[&lsquo;A&rsquo;, &lsquo;B&rsquo;, &lsquo;C&rsquo;, &rsquo;D&#8217;, &lsquo;Error&rsquo;, &lsquo;Sum&rsquo;], &rsquo;S&#8217;:[&lsquo;%10.5f&rsquo;%ii for ii in S], &lsquo;Se&rsquo;:&lsquo;%10.5f&rsquo;%Se, &lsquo;ST&rsquo;:&lsquo;%10.5f&rsquo;%ST,\
   &lsquo;dofLevel&rsquo;:dofLevel, &lsquo;dofErr&rsquo;:dofErr, &lsquo;dofSum&rsquo;:dofSum, &lsquo;sms&rsquo;:[&lsquo;%10.5f&rsquo;%ii for ii in sms], &lsquo;errSms&rsquo;:&lsquo;%10.5f&rsquo;%errSms, &lsquo;F0&rsquo;:[&lsquo;%10.5f&rsquo;%ii for ii in F0], &lsquo;optLevel&rsquo;:optLevel}
  return resMtx</p>

<p> def Anova3(calcMtx):
  k = 3 # total number of factors
  m = 3 # total number of levels
  n = 9 # total number of experiments
  r = n/m
  # here add the format check
  T = sum(calcMtx)
  CT = T<strong>2/n
  QT = sum(calcMtx</strong>2)
  ST = QT - CT
  K = zeros((m ,k))
  K[0,0] = calcMtx[0]+calcMtx[1]+calcMtx[2]
  K[1,0] = calcMtx[3]+calcMtx[4]+calcMtx[5]
  K[2,0] = calcMtx[6]+calcMtx[7]+calcMtx[8]
  K[0,1] = calcMtx[0]+calcMtx[3]+calcMtx[6]
  K[1,1] = calcMtx[1]+calcMtx[4]+calcMtx[7]
  K[2,1] = calcMtx[2]+calcMtx[5]+calcMtx[8]
  K[0,2] = calcMtx[0]+calcMtx[5]+calcMtx[7]
  K[1,2] = calcMtx[1]+calcMtx[3]+calcMtx[8]
  K[2,2] = calcMtx[2]+calcMtx[4]+calcMtx[6]
  Q = zeros(k)
  for i in range(k):
   Q[i] = sum(K[:,i]**2)/r
  S = Q - CT
  Se = ST - sum(S) # error of S
  dofLevel = m - 1 # degree of freedom
  dofSum = n - 1
  dofErr = dofSum - dofLevel * k
  sms = S / dofLevel # sum of mean square
  errSms = Se / dofErr
  F0 = sms / errSms
  optLevel = K.argmin(0)+1
  resMtx = {&lsquo;factors&rsquo;:[&lsquo;A&rsquo;, &lsquo;B&rsquo;, &lsquo;C&rsquo;, &lsquo;Error&rsquo;, &lsquo;Sum&rsquo;], &rsquo;S&#8217;:[&lsquo;%10.5f&rsquo;%ii for ii in S], &lsquo;Se&rsquo;:&lsquo;%10.5f&rsquo;%Se, &lsquo;ST&rsquo;:&lsquo;%10.5f&rsquo;%ST,\
   &lsquo;dofLevel&rsquo;:dofLevel, &lsquo;dofErr&rsquo;:dofErr, &lsquo;dofSum&rsquo;:dofSum, &lsquo;sms&rsquo;:[&lsquo;%10.5f&rsquo;%ii for ii in sms], &lsquo;errSms&rsquo;:&lsquo;%10.5f&rsquo;%errSms, &lsquo;F0&rsquo;:[&lsquo;%10.5f&rsquo;%ii for ii in F0], &lsquo;optLevel&rsquo;:optLevel}
  return resMtx</p>

<p> def Anova2(calcMtx):
  k = 2 # total number of factors
  m = 3 # total number of levels
  n = 9 # total number of experiments
  r = n/m
  # here add the format check
  T = sum(calcMtx)
  CT = T<strong>2/n
  QT = sum(calcMtx</strong>2)
  ST = QT - CT
  K = zeros((m ,k))
  K[0,0] = calcMtx[0]+calcMtx[1]+calcMtx[2]
  K[1,0] = calcMtx[3]+calcMtx[4]+calcMtx[5]
  K[2,0] = calcMtx[6]+calcMtx[7]+calcMtx[8]
  K[0,1] = calcMtx[0]+calcMtx[3]+calcMtx[6]
  K[1,1] = calcMtx[1]+calcMtx[4]+calcMtx[7]
  K[2,1] = calcMtx[2]+calcMtx[5]+calcMtx[8]
  Q = zeros(k)
  for i in range(k):
   Q[i] = sum(K[:,i]**2)/r
  S = Q - CT
  Se = ST - sum(S) # error of S
  dofLevel = m - 1 # degree of freedom
  dofSum = n - 1
  dofErr = dofSum - dofLevel * k
  sms = S / dofLevel # sum of mean square
  errSms = Se / dofErr
  F0 = sms / errSms
  optLevel = K.argmin(0)+1
  resMtx = {&lsquo;factors&rsquo;:[&lsquo;A&rsquo;, &lsquo;B&rsquo;, &lsquo;Error&rsquo;, &lsquo;Sum&rsquo;], &rsquo;S&#8217;:[&lsquo;%10.5f&rsquo;%ii for ii in S], &lsquo;Se&rsquo;:&lsquo;%10.5f&rsquo;%Se, &lsquo;ST&rsquo;:&lsquo;%10.5f&rsquo;%ST,\
   &lsquo;dofLevel&rsquo;:dofLevel, &lsquo;dofErr&rsquo;:dofErr, &lsquo;dofSum&rsquo;:dofSum, &lsquo;sms&rsquo;:[&lsquo;%10.5f&rsquo;%ii for ii in sms], &lsquo;errSms&rsquo;:&lsquo;%10.5f&rsquo;%errSms, &lsquo;F0&rsquo;:[&lsquo;%10.5f&rsquo;%ii for ii in F0], &lsquo;optLevel&rsquo;:optLevel}
  return resMtx</p>

<p> def F0_evaluate(input_array, factor_number):
  #F0数组显著性判断函数
  #print input_array
  if factor_number==5:
   F_005 = 4.74
   F_001 = 9.55
  elif factor_number==2:
   F_005 = 6.94
   F_001 = 18
  else:
   F_005 = 19
   F_001 = 99
  eval_res = []
  for theValue in input_array:
   theNumber = float(theValue)
   if theNumber>F_001: eval_res.append(&lsquo;<em>*&rsquo;)
   elif theNumber&lt;F_005: eval_res.append(&lsquo;-&rsquo;)
   else: eval_res.append(&lsquo;</em>&rsquo;)
  return eval_res</p>

<p> def solve_7():
  tStr = txt_sch.get(&lsquo;1.0&rsquo;,END)
  schemeMtx = transpose(fromstring(tStr,&rsquo;d&#8217;,-1,&lsquo; &rsquo;).reshape(3,-1))
  tStr = txt_expRes.get(&lsquo;1.0&rsquo;,END)
  calcResMtx = fromstring(tStr,&rsquo;d&#8217;,-1,&lsquo; &rsquo;)
  txt_optRes.delete(0, END)
  txt_optRes.insert(0, Anova7(schemeMtx, calcResMtx)[0])
  txt_optSch.delete(0, END)
  txt_optSch.insert(0, Anova7(schemeMtx, calcResMtx)[1])</p>

<p> def solve_2345():
  selected_item = chkb1.get()+chkb2.get()+chkb3.get()+chkb4.get()+chkb5.get()
  if selected_item == 5:
   calcResFile = open(&lsquo;data/expRes5.txt&rsquo;,&lsquo;r&rsquo;)
   calcResMtx = rwm.read(calcResFile)
   calcResFile.close()
   theRes = Anova5(calcResMtx)
   tt = &lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][0]+&lsquo;\t&rsquo;+theRes[&rsquo;S&#8217;][0]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofLevel&rsquo;])+&lsquo;\t&rsquo; \
    +theRes[&lsquo;sms&rsquo;][0]+&lsquo;\t&rsquo;+theRes[&lsquo;F0&rsquo;][0]+&lsquo;\t&rsquo;+F0_evaluate(theRes[&lsquo;F0&rsquo;],5)[0]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][1]+&lsquo;\t&rsquo;+theRes[&rsquo;S&#8217;][1]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofLevel&rsquo;])+&lsquo;\t&rsquo; \
    +theRes[&lsquo;sms&rsquo;][1]+&lsquo;\t&rsquo;+theRes[&lsquo;F0&rsquo;][1]+&lsquo;\t&rsquo;+F0_evaluate(theRes[&lsquo;F0&rsquo;],5)[1]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][2]+&lsquo;\t&rsquo;+theRes[&rsquo;S&#8217;][2]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofLevel&rsquo;])+&lsquo;\t&rsquo; \
    +theRes[&lsquo;sms&rsquo;][2]+&lsquo;\t&rsquo;+theRes[&lsquo;F0&rsquo;][2]+&lsquo;\t&rsquo;+F0_evaluate(theRes[&lsquo;F0&rsquo;],5)[2]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][3]+&lsquo;\t&rsquo;+theRes[&rsquo;S&#8217;][3]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofLevel&rsquo;])+&lsquo;\t&rsquo; \
    +theRes[&lsquo;sms&rsquo;][3]+&lsquo;\t&rsquo;+theRes[&lsquo;F0&rsquo;][3]+&lsquo;\t&rsquo;+F0_evaluate(theRes[&lsquo;F0&rsquo;],5)[3]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][4]+&lsquo;\t&rsquo;+theRes[&rsquo;S&#8217;][4]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofLevel&rsquo;])+&lsquo;\t&rsquo; \
    +theRes[&lsquo;sms&rsquo;][4]+&lsquo;\t&rsquo;+theRes[&lsquo;F0&rsquo;][4]+&lsquo;\t&rsquo;+F0_evaluate(theRes[&lsquo;F0&rsquo;],5)[4]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][5]+&lsquo;\t&rsquo;+theRes[&lsquo;Se&rsquo;]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofErr&rsquo;])+&lsquo;\t&rsquo; +theRes[&lsquo;errSms&rsquo;]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][6]+&lsquo;\t&rsquo;+theRes[&lsquo;ST&rsquo;]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofSum&rsquo;])
   f3_res.delete(&lsquo;1.0&rsquo;, END)
   f3_res.insert(&lsquo;1.0&rsquo;, tt)
   txt_optLevel.delete(0, END)
   txt_optLevel.insert(0, theRes[&lsquo;optLevel&rsquo;])
  elif selected_item == 4:
   calcResFile = open(&lsquo;data/expRes4.txt&rsquo;,&lsquo;r&rsquo;)
   calcResMtx = rwm.read(calcResFile)
   calcResFile.close()
   theRes = Anova4(calcResMtx)
   tt = &lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][0]+&lsquo;\t&rsquo;+theRes[&rsquo;S&#8217;][0]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofLevel&rsquo;])+&lsquo;\t&rsquo; \
    +theRes[&lsquo;sms&rsquo;][0]+&lsquo;\t&rsquo;+theRes[&lsquo;F0&rsquo;][0]+&lsquo;\t&rsquo;+F0_evaluate(theRes[&lsquo;F0&rsquo;],4)[0]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][1]+&lsquo;\t&rsquo;+theRes[&rsquo;S&#8217;][1]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofLevel&rsquo;])+&lsquo;\t&rsquo; \
    +theRes[&lsquo;sms&rsquo;][1]+&lsquo;\t&rsquo;+theRes[&lsquo;F0&rsquo;][1]+&lsquo;\t&rsquo;+F0_evaluate(theRes[&lsquo;F0&rsquo;],4)[1]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][2]+&lsquo;\t&rsquo;+theRes[&rsquo;S&#8217;][2]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofLevel&rsquo;])+&lsquo;\t&rsquo; \
    +theRes[&lsquo;sms&rsquo;][2]+&lsquo;\t&rsquo;+theRes[&lsquo;F0&rsquo;][2]+&lsquo;\t&rsquo;+F0_evaluate(theRes[&lsquo;F0&rsquo;],4)[2]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][3]+&lsquo;\t&rsquo;+theRes[&rsquo;S&#8217;][3]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofLevel&rsquo;])+&lsquo;\t&rsquo; \
    +theRes[&lsquo;sms&rsquo;][3]+&lsquo;\t&rsquo;+theRes[&lsquo;F0&rsquo;][3]+&lsquo;\t&rsquo;+F0_evaluate(theRes[&lsquo;F0&rsquo;],4)[3]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][4]+&lsquo;\t&rsquo;+theRes[&lsquo;Se&rsquo;]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofErr&rsquo;])+&lsquo;\t&rsquo; +theRes[&lsquo;errSms&rsquo;]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][5]+&lsquo;\t&rsquo;+theRes[&lsquo;ST&rsquo;]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofSum&rsquo;])
   f3_res.delete(&lsquo;1.0&rsquo;, END)
   f3_res.insert(&lsquo;1.0&rsquo;, tt)
   txt_optLevel.delete(0, END)
   txt_optLevel.insert(0, theRes[&lsquo;optLevel&rsquo;])
  elif selected_item == 3:
   calcResFile = open(&lsquo;data/expRes3.txt&rsquo;,&lsquo;r&rsquo;)
   calcResMtx = rwm.read(calcResFile)
   calcResFile.close()
   theRes = Anova3(calcResMtx)
   tt = &lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][0]+&lsquo;\t&rsquo;+theRes[&rsquo;S&#8217;][0]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofLevel&rsquo;])+&lsquo;\t&rsquo; \
    +theRes[&lsquo;sms&rsquo;][0]+&lsquo;\t&rsquo;+theRes[&lsquo;F0&rsquo;][0]+&lsquo;\t&rsquo;+F0_evaluate(theRes[&lsquo;F0&rsquo;],3)[0]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][1]+&lsquo;\t&rsquo;+theRes[&rsquo;S&#8217;][1]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofLevel&rsquo;])+&lsquo;\t&rsquo; \
    +theRes[&lsquo;sms&rsquo;][1]+&lsquo;\t&rsquo;+theRes[&lsquo;F0&rsquo;][1]+&lsquo;\t&rsquo;+F0_evaluate(theRes[&lsquo;F0&rsquo;],3)[1]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][2]+&lsquo;\t&rsquo;+theRes[&rsquo;S&#8217;][2]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofLevel&rsquo;])+&lsquo;\t&rsquo; \
    +theRes[&lsquo;sms&rsquo;][2]+&lsquo;\t&rsquo;+theRes[&lsquo;F0&rsquo;][2]+&lsquo;\t&rsquo;+F0_evaluate(theRes[&lsquo;F0&rsquo;],3)[2]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][3]+&lsquo;\t&rsquo;+theRes[&lsquo;Se&rsquo;]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofErr&rsquo;])+&lsquo;\t&rsquo; +theRes[&lsquo;errSms&rsquo;]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][4]+&lsquo;\t&rsquo;+theRes[&lsquo;ST&rsquo;]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofSum&rsquo;])
   f3_res.delete(&lsquo;1.0&rsquo;, END)
   f3_res.insert(&lsquo;1.0&rsquo;, tt)
   txt_optLevel.delete(0, END)
   txt_optLevel.insert(0, theRes[&lsquo;optLevel&rsquo;])
  elif selected_item == 2:
   calcResFile = open(&lsquo;data/expRes2.txt&rsquo;,&lsquo;r&rsquo;)
   calcResMtx = rwm.read(calcResFile)
   calcResFile.close()
   theRes = Anova2(calcResMtx)
   tt = &lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][0]+&lsquo;\t&rsquo;+theRes[&rsquo;S&#8217;][0]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofLevel&rsquo;])+&lsquo;\t&rsquo; \
    +theRes[&lsquo;sms&rsquo;][0]+&lsquo;\t&rsquo;+theRes[&lsquo;F0&rsquo;][0]+&lsquo;\t&rsquo;+F0_evaluate(theRes[&lsquo;F0&rsquo;],2)[0]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][1]+&lsquo;\t&rsquo;+theRes[&rsquo;S&#8217;][1]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofLevel&rsquo;])+&lsquo;\t&rsquo; \
    +theRes[&lsquo;sms&rsquo;][1]+&lsquo;\t&rsquo;+theRes[&lsquo;F0&rsquo;][1]+&lsquo;\t&rsquo;+F0_evaluate(theRes[&lsquo;F0&rsquo;],2)[1]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][2]+&lsquo;\t&rsquo;+theRes[&lsquo;Se&rsquo;]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofErr&rsquo;])+&lsquo;\t&rsquo; +theRes[&lsquo;errSms&rsquo;]+&lsquo;\n&rsquo; \
    +&lsquo;\t&rsquo;+theRes[&lsquo;factors&rsquo;][3]+&lsquo;\t&rsquo;+theRes[&lsquo;ST&rsquo;]+&lsquo;\t&rsquo;+str(theRes[&lsquo;dofSum&rsquo;])
   f3_res.delete(&lsquo;1.0&rsquo;, END)
   f3_res.insert(&lsquo;1.0&rsquo;, tt)
   txt_optLevel.delete(0, END)
   txt_optLevel.insert(0, theRes[&lsquo;optLevel&rsquo;])
  else:
   showwarning(&lsquo;项目选择错误&rsquo;,&lsquo;请选择至少两项&rsquo;)</p>

<p> #===================== 界面设计 ===========================
 root = Tk()
 top = Frame(root)
 top.pack(side=&lsquo;top&rsquo;)
 #========定义字体============
 font_chs = (&lsquo;宋体&rsquo;, 12)
 font_eng = (&lsquo;Times&rsquo;, 12)
 #==========标题====================
 lbl_Title = Label(top, text=&lsquo;柴油机结构系统优化软件&rsquo;, font=(&lsquo;宋体&rsquo;, 16)).pack(side=&lsquo;top&rsquo;, padx=15, pady=10, ipadx=10, fill=X)
 #=============第1部分===============
 f1 = LabelFrame(top, text=&lsquo;柴油机总体参数&rsquo;, font=font_chs)
 f1_1 = Frame(f1, padx=10)
 Label(f1_1, text=&lsquo;功率：&rsquo;, font=font_chs).pack(side=&lsquo;left&rsquo;)
 txt_power = Entry(f1_1, font=font_eng)
 txt_power.pack(side=&lsquo;left&rsquo;)
 f1_1.pack(side=&lsquo;left&rsquo;)</p>

<p> f1_2 = Frame(f1, padx=10)
 Label(f1_2, text=&lsquo;气缸数：&rsquo;, font=font_chs).pack(side=&lsquo;left&rsquo;)
 txt_cyNo = Entry(f1_2, font=font_eng)
 txt_cyNo.pack(side=&lsquo;left&rsquo;)
 f1_2.pack(side=&lsquo;left&rsquo;)</p>

<p> f1_3 = Frame(f1, padx=10)
 Label(f1_3, text=&lsquo;冲程数：&rsquo;, font=font_chs).pack(side=&lsquo;left&rsquo;)
 txt_strikeNo = Entry(f1_3, font=font_eng)
 txt_strikeNo.pack(side=&lsquo;left&rsquo;)
 f1_3.pack(side=&lsquo;left&rsquo;)</p>

<p> f1.pack(side=&lsquo;top&rsquo;, padx=15, pady=10, ipadx=10, ipady=10, fill=X)</p>

<p> #=============第2部分===============
 f2 = LabelFrame(top, text=&lsquo;柴油机本体结构参数评价及优化&rsquo;, font=font_chs)
 f2_1 = Frame(f2, pady = 10)
 f2_1_1 = Frame(f2_1, padx=1)
 Label(f2_1_1, text=&lsquo;方案：&rsquo;, font=font_chs).pack(side=&lsquo;left&rsquo;)
 txt_sch = Text(f2_1_1, font=font_eng, height=3, width=40)
 txt_sch.pack(side=&lsquo;left&rsquo;)
 f2_1_1 .pack(side=&lsquo;left&rsquo;)
 f2_1_2 = Frame(f2_1, padx=10)
 Label(f2_1_2, text=&lsquo;试验结果：&rsquo;, font=font_chs).pack(side=&lsquo;left&rsquo;)
 txt_expRes = Text(f2_1_2, font=font_eng, height=3, width=10)
 txt_expRes.pack(side=&lsquo;left&rsquo;)
 f2_1_2 .pack(side=&lsquo;left&rsquo;)
 Button(f2_1, text=&lsquo;参数分析&rsquo;, font=font_chs, command=solve_7).pack(side=&lsquo;left&rsquo;,padx=40)
 f2_1.pack(side=&lsquo;top&rsquo;)</p>

<p> f2_2 = Frame(f2, padx=1)
 f2_2_1 = Frame(f2_2, padx=10)
 Label(f2_2_1, text=&lsquo;评价结果：&rsquo;, font=font_chs).pack(side=&lsquo;left&rsquo;)
 txt_optRes = Entry(f2_2_1, font=font_eng, bg=&lsquo;grey&rsquo;, width=32)
 txt_optRes.pack(side=&lsquo;left&rsquo;,anchor=&lsquo;c&rsquo;)
 f2_2_1.pack(side=&lsquo;left&rsquo;)</p>

<p> f2_2_2 = Frame(f2_2)
 Label(f2_2_2, text=&lsquo;优选方案：&rsquo;, font=font_chs).pack(side=&lsquo;left&rsquo;)
 txt_optSch = Entry(f2_2_2, font=font_eng, bg=&lsquo;grey&rsquo;, width=32)
 txt_optSch.pack(side=&lsquo;left&rsquo;,anchor=&lsquo;c&rsquo;)
 f2_2_2.pack(side=&lsquo;left&rsquo;)
 f2_2.pack(side=&lsquo;top&rsquo;,anchor=&lsquo;w&rsquo;)
 f2.pack(side=&lsquo;top&rsquo;, padx=15, pady=5, ipadx=1, ipady=10, fill=X)</p>

<p> #=============第3部分===============
 f3 = LabelFrame(top, text=&lsquo;柴油机系统布置优化&rsquo;, font=font_chs)
 f3_top = Frame(f3)
 f3_1 = Frame(f3_top, padx=10)
 chkb1 = IntVar(); chkb2 = IntVar(); chkb3 = IntVar(); chkb4 = IntVar(); chkb5 = IntVar()
 chb_inlet = Checkbutton(f3_1, text=&lsquo;进排气系&rsquo;, font=font_chs, variable=chkb1)
 chb_inlet.pack(side=&lsquo;top&rsquo;, anchor=&lsquo;w&rsquo;)
 chb_lub = Checkbutton(f3_1, text=&lsquo;润滑系&rsquo;, font=font_chs, variable=chkb2)
 chb_lub.pack(side=&lsquo;top&rsquo;, anchor=&lsquo;w&rsquo;)
 chb_cool = Checkbutton(f3_1, text=&lsquo;冷却系&rsquo;, font=font_chs, variable=chkb3)
 chb_cool.pack(side=&lsquo;top&rsquo;, anchor=&lsquo;w&rsquo;)
 chb_start = Checkbutton(f3_1, text=&lsquo;起动系&rsquo;, font=font_chs, variable=chkb4)
 chb_start.pack(side=&lsquo;top&rsquo;, anchor=&lsquo;w&rsquo;)
 chb_turbo = Checkbutton(f3_1, text=&lsquo;增压器中冷装置&rsquo;, font=font_chs, variable=chkb5)
 chb_turbo.pack(side=&lsquo;top&rsquo;, anchor=&lsquo;w&rsquo;)
 f3_1.pack(side=&lsquo;left&rsquo;)
 f3_2 = Frame(f3_top, padx=10)
 Button(f3_2, text=&lsquo;求解&rsquo;, font=font_chs, command=solve_2345).pack(side=&lsquo;left&rsquo;)
 f3_2.pack(side=&lsquo;left&rsquo;)
 f3_3 = Frame(f3_top, padx=10)
 f3_3_1 = Frame(f3_3)
 Label(f3_3_1, text=&lsquo;方差来源&rsquo;, font=font_chs).pack(side=&lsquo;left&rsquo;, anchor=&lsquo;w&rsquo;)
 Label(f3_3_1, text=&lsquo;偏差平方和&rsquo;, font=font_chs).pack(side=&lsquo;left&rsquo;, padx=8)
 Label(f3_3_1, text=&lsquo;自由度&rsquo;, font=font_chs).pack(side=&lsquo;left&rsquo;, padx=8)
 Label(f3_3_1, text=&lsquo;方差&rsquo;, font=font_chs).pack(side=&lsquo;left&rsquo;, padx=25)
 Label(f3_3_1, text=&lsquo;F0值&rsquo;, font=font_chs).pack(side=&lsquo;left&rsquo;, padx=20)
 Label(f3_3_1, text=&lsquo;显著性&rsquo;, font=font_chs).pack(side=&lsquo;left&rsquo;, anchor=&lsquo;e&rsquo;, padx=4)
 f3_3_1.pack(side=&lsquo;top&rsquo;, fill=X, expand=1)
 f3_res = Text(f3_3, font=font_eng, bg=&lsquo;grey&rsquo;, height=7, width=65, tabs=(&lsquo;1c&rsquo;,CENTER,\
  &lsquo;3c&rsquo;,NUMERIC,&lsquo;5.5c&rsquo;,NUMERIC,&lsquo;7c&rsquo;,NUMERIC,&lsquo;9.2c&rsquo;,NUMERIC,&lsquo;11.5c&rsquo;,CENTER))
 f3_res.pack(side=&lsquo;top&rsquo;)
 f3_3.pack(side=&lsquo;left&rsquo;)
 f3_top.pack(side=&lsquo;top&rsquo;)</p>

<p> f3_bottom = Frame(f3, pady =10)
 Label(f3_bottom, text=&lsquo;优水平：&rsquo;, font=font_chs).pack(side=&lsquo;left&rsquo;)
 txt_optLevel = Entry(f3_bottom, font=font_eng, bg=&lsquo;grey&rsquo;, width=32)
 txt_optLevel.pack(side=&lsquo;left&rsquo;,anchor=&lsquo;c&rsquo;)
 f3_bottom.pack(side=&lsquo;top&rsquo;, anchor=&lsquo;e&rsquo;, ipadx=90)</p>

<p> f3.pack(side=&lsquo;top&rsquo;, padx=15, pady=10, ipadx=10, ipady=10, fill=X)</p>

<p> root.title(&lsquo;柴油机结构系统优化软件&rsquo;)
 root.mainloop()</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/14/113452/">由chm文件生成txt文件</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-04-14T11:34:52+08:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>11:34 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
<li>将chm文件转为htm文件
ChmDecoder（正式名称为CHM Encoder），文件位置：E:\Software\chmdecoder\chmdecoder.exe</li>
<li>将htm文件转为txt文件
TextForever，文件位置：E:\Software\TextForever168\TextForever.exe
【Html->Text】标签页中点击【典型中文HTML】，不勾选【输出链接文字】</li>
<li>合并txt文件
TextForever【文件合并】标签页中，根据情况设置后【开始合并】。</li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/02/19/113320/">利用Python计算日期平移</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-02-19T11:33:20+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>11:33 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>数码相机的日期如果不准，推算出正确的日期比较麻烦，下面的python代码可以解决这个问题，例如某张标记日期为2009年9月11日的照片，实际拍摄时间是2010年2月17日，那么标记时间是2009年7月1日的照片的实际拍摄时间是：
from datetime import date
delta = date(2010,2,17) - date(2009,9,11)
date(2009,7,1) + delta</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/10/095243/">Python脚本文件中使用中文</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-01-10T09:52:43+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>9:52 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Python做图形用户界面（GUI）开发时经常要在界面上显示中文，需要做如下处理（详见[1]和[2]2.3节）：</p>

<ol>
<li><p>在py文件的首行写上：# -<em>- coding:utf-8 -</em>-</p></li>
<li><p>保存py文件时要存为utf-8格式文件。</p></li>
</ol>


<p>[1] Python2.6 Documentation: The Python Language Reference: 2.1.4 Encoding declarations</p>

<p>[2] 孙广磊，征服Python—语言基础与典型应用，北京：人民邮电出版社，2007</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/11/18/155015/">用Ultraedit调试tk程序</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2009-11-18T15:50:15+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2009</span></span> <span class='time'>3:50 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>tk没有自己的编译环境，Ultraedit中仅3步就可以打造一个tk调试环境：
1. 为UE添加tcl/tk语法高亮支持：从UE的网站上下载tcl/tk的wordfile；
2. 添加编译命令到菜单中：UE主菜单【高级->工具配置】出现“工具配置窗口：</p>

<p>在【命令】标签页中：</p>

<p>点击按钮“插入”</p>

<p>【菜单项目】：运行tk程序</p>

<p>【命令行】：wish85 %n%e（%n表示当前文件名（不含扩展名），%e表示当前文件名的扩展名）</p>

<p>【工作目录】：%p（当前文件的路径）</p>

<p>在【输出】标签页中：
 选择【Output to List Box】（运行结果显示在输出窗口中，此窗口在【窗口->输出窗口】或者【视图->视图/列表->输出窗口】处设置开闭，其他几项是输出到指定的文件中）和【Capture Output】（否则输出不会被捕捉到）</p>

<ol>
<li>为菜单项添加快捷键：【高级->配置->键盘映射】中找到【高级－用户工具1】，在【按下新的键】中设置自己喜欢的热键，例如F6。</li>
</ol>


<p>参考博文《如何用UltraEdit编译和运行java程序》。</p>

<p>注：UEv16中，标签页也是可浮动的，感觉不方便，在【配置->Application Layout->File Tabs->Operation】中取消勾选【Dockable Tabs】。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/09/04/102534/">动力学计算提纲v4</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2009-09-04T10:25:34+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2009</span></span> <span class='time'>10:25 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>要比较的输出量
 活塞裙部径向接触力；活塞裙部轴向接触力；气缸套累积摩擦功；反推力边间隙功率；
 预紧力对各输出量的影响分析
 原始数据：10′锥角下的4个计算方案S5～S8，每个输出量对应一张图，该图由4条曲线组成，对应S5～S8；
 气缸套锥角对各输出量的影响分析
 原始数据：预紧力为520kN的4个方案S4，S8，S12，S16，每个输出量对应一张图，该图由4条曲线组成，对应S4，S8，S12，S16；</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/06/26/095327/">Word 2007技巧3则</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2009-06-26T09:53:27+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2009</span></span> <span class='time'>9:53 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>晚饭后无事，拿来顾经宇的《就这样享用WORD》，其中第六篇有几处技巧很好，总结如下：
* 使正文文字出现在目录中：（p285）【插入->文档部件->域->TC】，填上【文字项】和【大纲级别】，插入目录时勾选【目录项域】；
* 删除空行：（p303）【替换】对话框中，【查找内容】设为“<sup>p</sup><sup>p</sup>”，【替换为】设为“<sup>p</sup>”，勾选【忽略空格】，几轮之后就可以达到目的；
* 用“替换”功能提高书写效率：（p303）例如文章中有一个变量名为“Drx”，首先需要写Drx，然后将第一个“D”改为Symbol字体，然后将x改为下标，然后选中三个字母改为斜体，如果这个变量名出现多次，写起来非常麻烦，解决方法是：在出现“Drx”的地方都写为Drx，文章写完后，写一个“Drx”然后剪切，打开【替换】对话框，【查找内容】设为Drx，【替换为】设为【<sup>c</sup>】（即【特殊格式->“剪贴板”内容】），然后全部替换。以前解决这个问题的方法是采用Office剪贴板，但感觉不如这个方法好。
另：如果记得命令，手工插入域更方便，插入域的快捷键是Ctrl+F9，单独运行一个域的快捷键是Shift+F9，运行所有域是Alt+F9。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/05/28/174640/">Vim使用笔记</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2009-05-28T17:46:40+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2009</span></span> <span class='time'>5:46 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>基本文件操作</h1>

<ul>
<li><p>打开文件：:e</p></li>
<li><p>保存文件：:w</p></li>
<li><p>保存并退出：:wq或者:x</p></li>
<li><p>另存为：:sav</p></li>
<li><p>关闭文件（但不退出vim）：:bd（参见笔记 buffer-related operations in vim ）</p></li>
<li><p>退出vim：:q</p></li>
<li><p>打开光标处的文件: gf</p></li>
</ul>


<p>参考笔记 Vim的文件浏览</p>

<h1>界面与显示</h1>

<ul>
<li><p>修改界面配色风格：:colo evening （colo是colorscheme的简写，evening风格在gVim上比较好，ron风格在vim console上效果好）</p></li>
<li><p>是否折行：:set wrap/nowrap</p></li>
<li><p>开/关行号：:set nu/:set nonu （number和nonumber的简写）</p></li>
<li><p>开/关语法高亮：:syntax on/off</p></li>
<li><p>显示/隐藏制表符（tab）和结尾符号：:set list/nolist，tab显示为<sup>I</sup>，结尾符显示为$，空格仍显示为空；</p></li>
<li><p>刷新屏幕：Ctrl+L</p></li>
<li><p>vim console的界面提示语句中如果有中文，则Windows命令行窗口的代码页必须设置为GBK（cp936），否则vim console的中文提示信息会变为乱码。</p></li>
<li><p>关闭搜索结果的高亮显示：:noh（nohlsearch的简写）；</p></li>
</ul>


<h2>gvim相关选项</h2>

<ul>
<li><p>隐藏所有界面组件：:set go= （go是guioptions的简写）</p></li>
<li><p>显示水平滚动条：:set go+=b</p></li>
<li><p>显示垂直滚动条：:set go+=r</p></li>
<li><p>显示菜单栏：:set go+=m</p></li>
<li><p>显示工具栏：:set go+=T</p></li>
<li><p>更多guioptions相关定制选项见:h guioptions</p></li>
</ul>


<h1>定制界面字体/字号</h1>

<h2>gVim (gvim.exe)</h2>

<p>界面菜单方式：在字体/字号菜单中选择：:set guifont=*</p>

<p>命令方式： :set guifont=Consolas:h13</p>

<p>查询当前使用的字体/字号：:set guifont</p>

<h2>vim console ( vim.exe on Windows or vi on Linux)</h2>

<p>由于 vim console使用操作系统的命令行窗口，可以通过修改命令行窗口（ConEmu on Windows or Terminator on Linux）属性中字体和字号的方法达到改变的目的，但由于Windows的GBK代码页中只提供点阵和新宋体两种字体，都不好看，当平常简单的文本查看和编辑工具的话，建议使用gVim，如果一定要用vim console，可以用ConEmu之类的命令行增强工具改变字体；</p>

<h1>打开（修改）vim启动配置文件</h1>

<p>以下方法可以用全局书签来代替（2013-8-13更新） :e $MYVIMRC（或$myvimrc）或者主菜单【编辑->启动设定】 （用于gVim）</p>

<p>:so % 修改完<em>vimrc后无需重启vim即可让新</em>vimrc生效，_vimrc里有函数时此方法无效</p>

<p>以上只对gVim有效，在Ubuntu上全局配置文件为/etc/vim/vimrc，但最好不要改它，因为即使改了之后要生效也得重启系统，而且影响其他用户的配置，比较好的方法是在用户$HOME下新建一个.vimrc文件，写上用户自己定制的特性，修改.vimrc后即刻生效。</p>

<h1>光标移动</h1>

<p>参考笔记“ Cursor move in vi”；</p>

<h1>文档查找（相当于windows下的ctrl+f）</h1>

<h2>行内查找</h2>

<ul>
<li><p>f/F：向前查找/向后查找；</p></li>
<li><p>t/T：跳转到查找目标的前一个字符（主要与d,c等编辑指令配合使用）；</p></li>
<li><p>分号（;）：重复最近一次查找；逗号（,）：撤销最后一次查找；</p></li>
</ul>


<h2>跨行查找</h2>

<p>/searched string</p>

<ul>
<li><p>match case: option 1：/searched string \c ；option 2：using &ldquo;set ic/noic&rdquo; command to switch between ignore/match case(ic means igore case);</p></li>
<li><p>match whole word only: \&lt;匹配词首，>匹配词尾，所以全字匹配就是\<searched string\>;</p></li>
<li><p>search &amp; replace word under the cursor: 光标置于要查找的单词上，&#8221;*&ldquo;标出所有相同单词，ciw替换单词（参考<a href="http://vim.wikia.com/wiki/Search_and_replace_the_word_under_the_cursor">Search and replace the word under the cursor</a>）</p></li>
<li><p>incremental search: set incsearch</p></li>
</ul>


<h1>文本替换</h1>

<ul>
<li>将光标下的单词替换为剪贴板里的单词：viwp，其中viw是选中一个词，p是粘贴；</li>
</ul>


<p>:%s/four/4/g，&#8221;%&ldquo;这个范围意为对所有行执行该命令，&#8221;g&#8221;标志则指示替换操作将一行中所有出现的目标字串都进行替换；
不过如果你的文件里面有&#8221;thirtyfour&#8221;这样的词, 结果就不是你想要的了, 它将会被替换为&#8221;thirty4&rdquo;. 要避免这种例外. 可以在要替换的目标字前面加上&#8221;\&lt;&ldquo;, 它匹配一个word的起始位置：:%s/\&lt;four/4/g；
但是碰到&#8221;fourty&#8221;这样的词还是会弄错. &rdquo;>&ldquo;可以用来指示一个word的结束位置：:%s/\&lt;four>/4/g；
如果你是在写程序，你可能只想替换那些出现在注释中的&#8221;four&#8221;，代码中的留下，这可有点为难，&#8221;c&#8221;标志可以让每个目标被替换之前询问你的意见：:%s/\&lt;four>/4/gc；</p>

<p>文本查找和替换的更多功能见笔记&#8221;用vim注释多行代码&#8221;和<a href="http://vim.wikia.com/wiki/Search_and_replace%E3%80%82">http://vim.wikia.com/wiki/Search_and_replace%E3%80%82</a></p>

<h1>Copy/Paste</h1>

<p>Vim中的y,d,p（拷贝yank，剪切，粘贴）放在了自己独有的一个剪贴板上，与windows的公用剪贴板不同，如果要将拷贝内容放入windows剪贴板，在拷贝命令前加&#8221;+（&#8221;*表示VIM自己的剪贴板），例如&#8221;+yl00j就是将100行文本拷贝到windows剪贴板，vim剪贴板的使用方法见笔记 Vim的剪贴板操作 。</p>

<p>若想y, p的时候直接放在windows剪贴板上，只要在_vimrc里加一句：set clipboard+=unnamed（将无名寄存器与windows的+寄存器连接）就可以了（只在Windows上有效）。</p>

<p>拷贝/剪切一整行：yy/dd</p>

<p>光标前/后粘贴文本：P/p</p>

<h2>从外部粘贴文本时防止缩进递增</h2>

<p>用<code>set noai</code>关闭自动缩进，粘贴，然后<code>set ai</code>复原；</p>

<p>或者粘贴之后，选中要重排的段落然后用等号（&#8221;=&ldquo;）自动设置缩进；</p>

<h1>VIM的操作方式</h1>

<p>动作命令＋位移，例如拷贝光标下的一个字符：yl（l表示向右移动一个字符）；拷贝从光标开始的100行文本：y100j。其中y代表拷贝，j是向下移动一行，100j就是向下移动100行。</p>

<ul>
<li><p>窗口（视图）和标签页的更多说明见笔记“ VIM的窗口和标签页操作 ”； * 与多个buffer相关的操作见“ buffer-related operations in vim ”。</p></li>
<li><p>命令的自动补全： 输入前面的字符后按tab；</p></li>
<li><p>显示/隐藏非ASCII码字符：:set list/nolist</p></li>
<li><p>Visual模式：类似于windows的“先选择再操作”的方式，先hjkl或者其他光标移动键或者鼠标选择一个范围，再执行一个命令，如删除d，拷贝y等；v进入普通选择模式，V进入行选择模式，Ctrl+Q或者Ctrl+V进入列选择模式；</p></li>
<li><p>列模式：见“ 用vim注释多行代码 ”；</p></li>
</ul>


<h2>改变备份文件和swp文件的目录</h2>

<p>vim打开一个文件（例如file.txt）后会生成一个file.txt.swap文件，非正常退出VIM（没有保存文件）时可以用这个文件恢复，修改前的文件被另存为file.txt~，这两个文件都很有用，但默认是放在file.txt所在目录下，看上去比较杂乱，下面的指令将这两个文件放在temp文件夹下以解决这个问题：</p>

<pre><code>set directory=C:\Windows\Temp 
set backupdir=C:\Windows\Temp 
</code></pre>

<p>可以用set nobakupfile和set noswapfile不让这两个文件生成，但不建议这样做。</p>

<h1>转换目标文件的DOS/UNIX格式</h1>

<ul>
<li><p>查询：:set ff? （ff是fileformat的简写）</p></li>
<li><p>改变DOS格式文件为UNIX格式：:set ff=unix （shell下运行DOS格式文件会出现“/bin/sh<sup>M</sup>: bad interpreter&hellip;”错误）</p></li>
</ul>


<h1>制表符（tab）相关的配置</h1>

<p>包括下面4个参数：</p>

<pre><code>set autoindent "设置自动缩进，缩写为ai
set tabstop=4 " tab的宽度是4个空格，缩写为ts 
set shiftwidth=4 " 使用&gt;&gt;时缩进的空格数，缩写为sw，&gt;&gt;是在标准状态下缩进，而用tab需要来回在标准和insert模式间切换； 
set expandtab " tab转换为空格，缩写为et
</code></pre>

<p>将缩进设为4个空格是许多编程语言（如Java）的习惯。双引号（&#8221;）是vim脚本中的注释（comment）符号</p>

<p>将行首缩进为tab的文本内容替换为空格的命令（即untabify indent）是&#8221;:retab&#8221;（需要先set expandtab）；</p>

<h1>Normal模式下的常用编辑指令</h1>

<ul>
<li><p>光标前/后插入：i/a</p></li>
<li><p>光标所在行的行首/尾插入：I/A</p></li>
<li><p>光标的上/下一行插入：O/o</p></li>
<li><p>删除单个字符：x</p></li>
<li><p>替换单个字符：r（替换后仍然是normal模式，而不像s进入插入模式）</p></li>
<li><p>进入覆盖模式：R</p></li>
<li><p>删除光标所在字符并进入插入模式：s 参考<a href="http://jeetworks.org/node/84">A Tale of Two (Vim) Commands: &ldquo;s&rdquo; and &ldquo;c&rdquo;</a></p></li>
<li><p>删除光标所在行并进入插入模式：S</p></li>
<li><p>进入字符选择（visual）模式：v</p></li>
<li><p>进入行选择模式：V</p></li>
<li><p>使用书签：参考笔记“ Note about marks in vi ”；</p></li>
<li><p>自动缩进(auto indent)：= 已验证对Java, C, XML文件有效，不同于“自动格式化 auto format”，后者可以将在同一行上的代码重排到多行并缩进；</p></li>
<li><p>缩进与反缩进（indent/unindent）：>、&lt;（详见:help shift-left-right）</p></li>
<li><p>重复上一次操作：.（参考<a href="http://www.viemu.com/a-why-vi-vim.html%EF%BC%89">http://www.viemu.com/a-why-vi-vim.html%EF%BC%89</a></p></li>
<li><p>选中光标所在单词：*</p></li>
<li><p>移动光标到行首/尾：0/$</p></li>
<li><p>移动光标到匹配括号处：%</p></li>
<li><p>大小写变换：将<movement>范围内的文字转换为大/小写，gU/u/~<movement>，例如:gUw将光标开始处的一个单词转换为大写，gu$将光标开始到行尾文字转换为小写，&#8221;~&ldquo;表示大小写切换，例如g~w表示将光标开始处的单词大小写对换；单个的~表示切换光标下字母大小写；</p></li>
</ul>


<h2>c键</h2>

<p>删除指定范围（如一个词，一句话，一段）并进入插入模式，例如ciw将删除光标所在词并进入插入模式，其中i表示inner，即不包括单词旁边的空格、括号、引号等，w表示范围是word，cas将删除整句(s: sentence)以及周围的分隔符（a表示含分隔符），还可以简写为cw，详见<a href="http://jeetworks.org/node/85">The Power and Precision of Vim&rsquo;s Text Objects: Efficient, Elegant, Awesome</a>。</p>

<p>c键后面还可以跟光标移动指令，例如cft删除的范围是从光标到t字符出现的地方，c2w删除光标开始处的两个word。</p>

<p>C键删除从光标到行尾并进入插入状态。</p>

<p>如果使用v键进入visual模式选中文本，则c键与s键的功能一样，都是删掉选中的文本然后进入插入模式。</p>

<h1>路径相关操作</h1>

<ul>
<li><p>设置vim的启动路径：配置文件_vimrc里加上&#8221;cd &lt;当前路径>&ldquo;，例如：cd e:\MyDoc\MobileBook；</p></li>
<li><p>显示当前路径：&#8221;:pwd&#8221;</p></li>
<li><p>改变当前路径：&#8221;:lcd &lt;目标路径>&#8221;</p></li>
</ul>


<h1>与Shell交互</h1>

<ul>
<li><p>执行系统命令：:!<cmd>，例如列出当前文件夹下文件：:!ls；又如在vim中运行&#8221;ruby &lt;当前文件>&ldquo;写为：&rdquo;:!ruby %&ldquo;，参见笔记 Use VIM as lightweight IDE ；</p></li>
<li><p>将系统命令的输出插入到当前buffer中：!!<command></p></li>
<li><p>临时进入shell: :sh，返回vi: C-d</p></li>
</ul>


<h1>Autocomplete</h1>

<p>C-n, or C-p</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/04/29/205950/">提高康佳手机电子书的打开速度</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2009-04-29T20:59:50+08:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2009</span></span> <span class='time'>8:59 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>型号：康佳D266
方法：通过实践发现，康佳 手机 打开某些txt文件的速度很快，有些却很慢，分别用UltraEdit打开这两种txt文件，【视图->显示空格/制表符】，可以看到慢的一种是ASCII格式，每一行末都有一个“$”符号（表示换行），快的一种是Unicode格式，换行符类似于小写的q（但竖线变成了两条），将ANSI转换为Unicode格式的方法是【文件->转换->ASCII转Unicode】（不是【文件->转换->ASCII转UTF-8（Unicode编辑）】，这样生成的是乱码）。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/96">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/94">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/08/26/100107/">Build Redis on CentOS 6</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/24/110909/">Build Working Environment With I3 and Mint</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/24/103023/">Install New Locale on Linux Mint</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/21/113949/">Qtile on ArchLinux</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/20/104236/">Closure in Different Languages</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/leetschau">@leetschau</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'leetschau',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Li Chao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
