<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Li Chao" />
        <meta name="copyright" content="Li Chao" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="rlang, R, Tech, " />

<meta property="og:title" content="R Notes"/>
<meta property="og:url" content="http://leetschau.github.io/r-notes.html" />
<meta property="og:description" content="Install R and run On Linux: $ sudo apt update $ sudo apt install r-base $ R On Windows: choco install r.project choco install r.studio Install RStudio Server on Ubuntu $ sudo apt update $ sudo apt install r-base $ sudo apt-get install gdebi-core $ wget https://download2.rstudio.org/rstudio-server-1.1.383-amd64.deb $ sudo …" />
<meta property="og:site_name" content="DarkMatter in Cyberspace" />
<meta property="og:article:author" content="Li Chao" />
<meta property="og:article:published_time" content="2017-12-21T10:24:02+08:00" />
<meta property="" content="2019-04-23T10:21:21+08:00" />
<meta name="twitter:title" content="R Notes">
<meta name="twitter:description" content="Install R and run On Linux: $ sudo apt update $ sudo apt install r-base $ R On Windows: choco install r.project choco install r.studio Install RStudio Server on Ubuntu $ sudo apt update $ sudo apt install r-base $ sudo apt-get install gdebi-core $ wget https://download2.rstudio.org/rstudio-server-1.1.383-amd64.deb $ sudo …">

        <title>R Notes · DarkMatter in Cyberspace
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="http://leetschau.github.io/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://leetschau.github.io/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://leetschau.github.io/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://leetschau.github.io/theme/css/custom.css" media="screen">
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="http://leetschau.github.io/"><span class=site-name>DarkMatter in Cyberspace</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="http://leetschau.github.io">Home</a></li>
                            <li ><a href="http://leetschau.github.io/categories.html">Categories</a></li>
                            <li ><a href="http://leetschau.github.io/tags.html">Tags</a></li>
                            <li ><a href="http://leetschau.github.io/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="http://leetschau.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="http://leetschau.github.io/r-notes.html"> R Notes </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <hr>
<h1>Install R and run</h1>
<p>On Linux:</p>
<div class="highlight"><pre><span></span><code>$ sudo apt update
$ sudo apt install r-base
$ R
</code></pre></div>


<p>On Windows:</p>
<div class="highlight"><pre><span></span><code><span class="err">choco install r.project</span>
<span class="err">choco install r.studio</span>
</code></pre></div>


<h2>Install RStudio Server on Ubuntu</h2>
<div class="highlight"><pre><span></span><code>$ sudo apt update
$ sudo apt install r-base
$ sudo apt-get install gdebi-core
$ wget https://download2.rstudio.org/rstudio-server-1.1.383-amd64.deb
$ sudo gdebi rstudio-server-1.1.383-amd64.deb
$ sudo <span class="nb">echo</span> <span class="s2">&quot;r-libs-user=~/.RPackages&quot;</span> &gt;&gt; /etc/rstudio/rsession.conf
$ sudo rstudio-server restart
</code></pre></div>


<p>Login RStudio in browser at "<server-ip>:8787" with Ubuntu username
and password.</p>
<p>Note 1:
If not modify the default personal package directory in file
<code>/etc/rstudio/rsession.conf</code>, the new installed package will be saved
in folder <code>~/R</code>.
Changes in <code>/etc/rstudio/rsession.conf</code> only affect RStudio,
not the R console (started with <code>R</code> in shell).
To modify the installation path for both R console and RStudio,
run <code>echo 'R_LIBS_USER=~/.RPackages' &gt;&gt; $HOME/.Renviron</code>.
Verified with <code>Sys.getenv("R_LIBS_USER")</code> and <code>.libPaths()</code> in R console.</p>
<p>Note 2:
List all <code>rstudio-server</code> subcommmands with <code>sudo rstudio-server help</code>.</p>
<p>Note 3: Specify another server port instead of 8787 in file
<code>/etc/rstudio/rserver.conf</code>. See all configuration items in
<a href="https://support.rstudio.com/hc/en-us/articles/200552316-Configuring-the-Server">RStudio Server: Configuring the Server</a>.</p>
<h1>Compile Rmd file to docx</h1>
<p>Install R base and relevant packages,
build a new Rmd file and convert:</p>
<div class="highlight"><pre><span></span><code>$ R
&gt; chooseCRANmirror<span class="o">(</span><span class="nv">graphics</span><span class="o">=</span>FALSE<span class="o">)</span>
&gt; install.packages<span class="o">(</span><span class="s2">&quot;rmarkdown&quot;</span><span class="o">)</span>
&gt; packageVersion<span class="o">(</span><span class="s2">&quot;rmarkdown&quot;</span><span class="o">)</span>
<span class="o">[</span><span class="m">1</span><span class="o">]</span> ‘1.10’
&gt; install.packages<span class="o">(</span><span class="s2">&quot;knitr&quot;</span><span class="o">)</span>
&gt; packageVersion<span class="o">(</span><span class="s2">&quot;knitr&quot;</span><span class="o">)</span>
<span class="o">[</span><span class="m">1</span><span class="o">]</span> ‘1.18’
&gt; install.packages<span class="o">(</span><span class="s2">&quot;devtools&quot;</span><span class="o">)</span>
&gt; devtools::install_github<span class="o">(</span><span class="s1">&#39;rstudio/reticulate&#39;</span><span class="o">)</span>

$ cat example.Rmd
---
title: <span class="s2">&quot;My Example Doc&quot;</span>
author: <span class="s2">&quot;Leo&quot;</span>
date: <span class="s2">&quot;2019.1.25&quot;</span>
output: html_document
---

This is a <span class="nb">test</span> file.

$ Rscript -e <span class="s1">&#39;library(rmarkdown);render(&quot;example.Rmd&quot;, &quot;word_document&quot;)&#39;</span>
</code></pre></div>


<h1>Frequently used command</h1>
<div class="highlight"><pre><span></span><code><span class="nf">version</span>
<span class="na">.libPaths</span><span class="p">()</span>
<span class="nf">installed.packages</span><span class="p">()[,</span><span class="no">c</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">:</span><span class="mi">4</span><span class="p">)]</span>
<span class="nf">getwd</span><span class="p">()</span>
<span class="nf">setwd</span><span class="p">(</span><span class="err">&quot;</span><span class="no">temp</span><span class="err">&quot;</span><span class="p">)</span>  <span class="c1"># set working directory</span>
</code></pre></div>


<h2>Get the package name which a specific object belongs to</h2>
<p>For example, I want to get the name of the package where the function <code>acf()</code>
defined in. In R console, run <code>?acf</code>, get the package name (<code>stats</code>) at the
first line of the function's documentation in the <em>Help</em> window:
<code>acf {stats}</code>, and the last line of the doc:
<code>[Package stats version 3.2.3 Index]</code>.</p>
<p>Or run <code>??acf</code> to get all similar function list in the <em>Help</em> window,
here you can see <code>stats::acf</code> in the function list.</p>
<p>These methods also works for data object. For example,
run <code>?women</code> and <code>??women</code> you can see it's defined in package <em>datasets</em>.</p>
<h1>Explore data frame</h1>
<div class="highlight"><pre><span></span><code><span class="err">str(women)           # list all column names, types and some data</span>
<span class="err">head(women, n)       # first n rows</span>
<span class="err">attributes(women)    # list all attributes (metadata) of an object,</span>
<span class="err">                     #   such as names, dimension, class, row.names, etc.</span>
<span class="err">names(women)         # get the *name* attribute of an object</span>
<span class="err">dim(women)           # get the *dimension* attribute of an object (row and column number)</span>
<span class="err">class(women)         # get the *class* attribute of an object</span>
<span class="err">nrow(women)</span>
<span class="err">ncol(women)</span>
<span class="err">colnames(women)      # column names</span>
<span class="err">summary(women)</span>
<span class="err">women[sample(nrow(women), 3), ]  # sample 3 rows randomly</span>
<span class="err">library(&quot;dplyr&quot;)</span>
<span class="err">sample_n(women, 3)               # another way for sampling via package dplyr</span>
</code></pre></div>


<h2><em>names</em> transition between data frame and vector</h2>
<p><em>names</em> is a basic attribute of <strong>all</strong> objects, including single scalar
(but in R scalar is a vector with length equals to 1):</p>
<div class="highlight"><pre><span></span><code><span class="n">scalar</span> <span class="o">&lt;-</span> <span class="m">3</span>
<span class="nf">names</span><span class="p">(</span><span class="n">scalar</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="s">&#39;sname&#39;</span>
<span class="n">df</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">scalar</span><span class="p">)</span>
<span class="nf">names</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>        <span class="c1"># &quot;scalar&quot;</span>
<span class="nf">attributes</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>   <span class="c1"># $names: &quot;scalar&quot;; $row.names: &quot;sname&quot;; $class: &quot;data.frame&quot;</span>
</code></pre></div>


<p>Data frame is a kind of <em>list</em>. Each element of this list is a <em>vector</em>.
If the vector has set its <em>names</em> attribute (here they are 'fir' and 'sec'),
they will be convert to <em>rownames</em> attribute in the created data frame:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;</span> <span class="n">sv</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">33</span><span class="p">,</span><span class="m">44</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="nf">names</span><span class="p">(</span><span class="n">sv</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;fir&#39;</span><span class="p">,</span> <span class="s">&#39;sec&#39;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">sv</span>
<span class="n">fir</span> <span class="n">sec</span>
 <span class="m">33</span>  <span class="m">44</span>
<span class="o">&gt;</span> <span class="n">sdf</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">sv</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">sdf</span>
    <span class="n">sv</span>
<span class="n">fir</span> <span class="m">33</span>
<span class="n">sec</span> <span class="m">44</span>
<span class="o">&gt;</span> <span class="nf">class</span><span class="p">(</span><span class="n">sdf</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;data.frame&quot;</span>
<span class="o">&gt;</span> <span class="nf">mode</span><span class="p">(</span><span class="n">sdf</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;list&quot;</span>
</code></pre></div>


<h1>typeof(), mode() &amp; class()</h1>
<p>'mode' is a mutually exclusive classification of objects according to their
basic structure. The 'atomic' modes are numeric, complex, charcter and logical.
Recursive objects have modes such as 'list' or 'function' or a few others.
An object has one and only one mode.</p>
<p><code>typeof()</code> and <code>mode()</code> are basically the same with some differences,
see <code>?mode</code> for details. The return values of these functions are in a small set,
such as "integer", "double", "logical", "character", "list", "closure"(function), etc.</p>
<p>'class' is a property assigned to an object that determines how generic
functions (such as <code>summary()</code>) operate with it.
It is not a mutually exclusive classification.
If an object has no specific class assigned to it, such as a simple numeric
vector, it's class is usually the same as its mode, by convention.</p>
<p>Changing the mode of an object is often called 'coercion'.
The mode of an object can change without necessarily changing the class. e.g:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;</span> <span class="n">x</span> <span class="o">&lt;-</span> <span class="m">1</span><span class="o">:</span><span class="m">8</span>
<span class="o">&gt;</span> <span class="nf">mode</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;numeric&quot;</span>
<span class="o">&gt;</span> <span class="nf">class</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;integer&quot;</span>
<span class="o">&gt;</span> <span class="nf">dim</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">4</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="nf">mode</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;numeric&quot;</span>
<span class="o">&gt;</span> <span class="nf">class</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;matrix&quot;</span>
<span class="o">&gt;</span> <span class="nf">is.numeric</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">TRUE</span>
<span class="o">&gt;</span> <span class="nf">mode</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="s">&quot;character&quot;</span>
<span class="o">&gt;</span> <span class="nf">mode</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;character&quot;</span>
<span class="o">&gt;</span> <span class="nf">class</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;matrix&quot;</span>
</code></pre></div>


<p>Ref: <a href="https://stackoverflow.com/questions/35445112/what-is-the-difference-between-mode-and-class-in-r">What is the difference between mode and class in R?</a></p>
<h1>Data Types</h1>
<p>1-dimensional: vector(<code>c(...)</code>), list(<code>list(...)</code>);</p>
<p>2-dimensional: matrix(<code>maxtrix(...)</code>), data.frame(<code>data.frame(...)</code>);</p>
<p>n-dimensional: array(<code>array(...)</code>).</p>
            
            
            <hr/>
            <script src="https://utteranc.es/client.js"
                    repo="leetschau/leetschau.github.io"
                    issue-term="pathname"
                    theme="github-light"
                    crossorigin="anonymous"
                    async>
            </script>
            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2017-12-21T10:24:02+08:00">Dec 21, 2017</time>

<h4>Last Updated</h4>
<time datetime="2019-04-23T10:21:21+08:00">Apr 23, 2019</time>

            <h4>Category</h4>
            <a class="category-link" href="http://leetschau.github.io/categories.html#tech-ref">Tech</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="http://leetschau.github.io/tags.html#r-ref">R
                    <span>5</span>
</a></li>
                <li><a href="http://leetschau.github.io/tags.html#rlang-ref">rlang
                    <span>17</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="#" title="My You can add links in your config file Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-you can add links in your config file sidebar-social-links"></i></a>
    <a href="#" title="My Another social link Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-another social link sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>