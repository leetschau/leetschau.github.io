<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Li Chao" />
        <meta name="copyright" content="Li Chao" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="latex, ubuntu, xetex, Tech, " />

<meta property="og:title" content="使用LaTeX编辑文档 "/>
<meta property="og:url" content="/shi-yong-latexbian-ji-wen-dang.html" />
<meta property="og:description" content="Winodws Tex Live 目前功能最完善的Tex系统，支持ctexart，支持多种汉字字体，编译时不需要在 xelatex和pdflatex间切换，都使用默认的pdfLaTeX即可。 下载包最大，安装很方便。 从TeX Live的开发维护者 TUG 的 Acquiring TeX Live as an ISO image 上下载 TeX Live DVD 文件，其中包含了 Windows 和 Linux 下的安装程序。 最新版ISO文件 texlive2017-20170524.iso 大小为 3.6GB. 加载ISO文件后，在命令行里执行install-tl-windows.bat文件，如果报找不到cmd.exe 命令错误，确认系统%PATH%里包含 C …" />
<meta property="og:site_name" content="DarkMatter in Cyberspace" />
<meta property="og:article:author" content="Li Chao" />
<meta property="og:article:published_time" content="2017-02-18T17:00:52+08:00" />
<meta property="" content="2018-04-03T16:57:54+08:00" />
<meta name="twitter:title" content="使用LaTeX编辑文档 ">
<meta name="twitter:description" content="Winodws Tex Live 目前功能最完善的Tex系统，支持ctexart，支持多种汉字字体，编译时不需要在 xelatex和pdflatex间切换，都使用默认的pdfLaTeX即可。 下载包最大，安装很方便。 从TeX Live的开发维护者 TUG 的 Acquiring TeX Live as an ISO image 上下载 TeX Live DVD 文件，其中包含了 Windows 和 Linux 下的安装程序。 最新版ISO文件 texlive2017-20170524.iso 大小为 3.6GB. 加载ISO文件后，在命令行里执行install-tl-windows.bat文件，如果报找不到cmd.exe 命令错误，确认系统%PATH%里包含 C …">

        <title>使用LaTeX编辑文档  · DarkMatter in Cyberspace
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/custom.css" media="screen">
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="/"><span class=site-name>DarkMatter in Cyberspace</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="">Home</a></li>
                            <li ><a href="/categories.html">Categories</a></li>
                            <li ><a href="/tags.html">Tags</a></li>
                            <li ><a href="/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="/shi-yong-latexbian-ji-wen-dang.html"> 使用LaTeX编辑文档  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <hr>
<h1>Winodws</h1>
<h2>Tex Live</h2>
<p>目前功能最完善的Tex系统，支持<em>ctexart</em>，支持多种汉字字体，编译时不需要在
xelatex和pdflatex间切换，都使用默认的pdfLaTeX即可。</p>
<p>下载包最大，安装很方便。</p>
<p>从TeX Live的开发维护者 <a href="http://www.tug.org/texlive/">TUG</a> 的
<a href="http://www.tug.org/texlive/acquire-iso.html">Acquiring TeX Live as an ISO image</a>
上下载 TeX Live DVD 文件，其中包含了 Windows 和 Linux 下的安装程序。
最新版ISO文件 texlive2017-20170524.iso 大小为 3.6GB.</p>
<p>加载ISO文件后，在命令行里执行install-tl-windows.bat文件，如果报找不到<em>cmd.exe</em>
命令错误，确认系统%PATH%里包含 <em>C:\Windows\system32</em> 文件夹，之后在命令行里执行
<code>cmd</code>命令确认。</p>
<p>安装后占用5GB磁盘空间，执行 [开始 &gt; TeX Live 2017 &gt; TeXworks editor] 启动编辑器，
将下面的内容拷贝到编辑器中，用快捷键 <em>Ctrl-t</em> 预览结果，
文件修改后再次使用这个快捷键保存文件并更新预览窗口：</p>
<div class="highlight"><pre><span></span><span class="k">\documentclass</span><span class="nb">{</span>article<span class="nb">}</span>
<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>
Let: <span class="sb">$$</span><span class="nb"></span>
<span class="nb">ss_{xy} </span><span class="o">=</span><span class="nb"> </span><span class="nv">\sum</span><span class="o">(</span><span class="nb">x_i </span><span class="o">-</span><span class="nb"> </span><span class="nv">\bar</span><span class="nb"> x</span><span class="o">)</span><span class="nb"> </span><span class="o">(</span><span class="nb">y_i </span><span class="o">-</span><span class="nb"> </span><span class="nv">\bar</span><span class="nb"> y</span><span class="o">)</span><span class="nb"></span>
<span class="s">$$</span>
<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</pre></div>


<p>或者包含汉字及字体定义：</p>
<div class="highlight"><pre><span></span><span class="k">\documentclass</span><span class="na">[UTF8]</span><span class="nb">{</span>ctexart<span class="nb">}</span>
<span class="k">\title</span><span class="nb">{</span>石頭記<span class="nb">}</span>
<span class="k">\author</span><span class="nb">{</span>曹雪芹<span class="nb">}</span>
<span class="k">\date</span><span class="nb">{</span><span class="k">\today</span><span class="nb">}</span>
<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>
<span class="k">\heiti</span>
<span class="k">\maketitle</span>
<span class="k">\begin</span><span class="nb">{</span>center<span class="nb">}</span>
<span class="k">\kaishu</span>
滿紙荒唐言<span class="k">\\</span>
<span class="k">\songti</span>
一把辛酸淚<span class="k">\\</span>
<span class="k">\fangsong</span>
都雲作者癡<span class="k">\\</span>
誰解其中味<span class="k">\\</span>
<span class="k">\end</span><span class="nb">{</span>center<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</pre></div>


<p>Ref:</p>
<p>https://tex.stackexchange.com/questions/17611/how-does-one-type-chinese-in-latex</p>
<h2>MiKTeX</h2>
<p><a href="https://miktex.org/">MiKTeX</a> 只有 Windows 实现，不像 TeX Live 是跨平台的。
相比于TeX Live，它可以在运行时安装需要的package，所以初始安装比较小，
安装包 basic-miktex-x64.exe 220MB，安装完成后占用 850MB 磁盘空间。</p>
<p>MiKTeX 使用 TeXworks作为编辑器，相比于 WinEdt，它更小巧。
可以防爆地设置编辑器字体和字号，可以方便地切换 typeset 引擎，
默认使用 pdfLaTex，编译中文时需要切换为 XeLaTeX。</p>
<p>处理汉字时它使用比CTeX的<em>CJK</em>更先进的 <em>xeCJK</em> 包，示例文件：</p>
<div class="highlight"><pre><span></span><span class="k">\documentclass</span><span class="na">[12pt]</span><span class="nb">{</span>article<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>xeCJK<span class="nb">}</span>
<span class="c">% I supposed that you do have these fonts mentioned below.</span>
<span class="k">\setCJKmainfont</span><span class="na">[BoldFont={SimHei},ItalicFont={[SIMKAI.TTF]</span><span class="nb">}</span>] <span class="nb">{</span>SimSun<span class="nb">}</span>
<span class="k">\setCJKsansfont</span><span class="nb">{</span>SimHei<span class="nb">}</span>
<span class="k">\setCJKmonofont</span><span class="nb">{</span>[SIMFANG.TTF]<span class="nb">}</span>
<span class="k">\setCJKfamilyfont</span><span class="nb">{</span>zhsong<span class="nb">}{</span>SimSun<span class="nb">}</span>
<span class="k">\setCJKfamilyfont</span><span class="nb">{</span>zhhei<span class="nb">}{</span>SimHei<span class="nb">}</span>
<span class="k">\setCJKfamilyfont</span><span class="nb">{</span>zhkai<span class="nb">}{</span>[SIMKAI.TTF]<span class="nb">}</span>
<span class="k">\setCJKfamilyfont</span><span class="nb">{</span>zhfs<span class="nb">}{</span>[SIMFANG.TTF]<span class="nb">}</span>
<span class="k">\newcommand*</span><span class="nb">{</span><span class="k">\songti</span><span class="nb">}{</span><span class="k">\CJKfamily</span><span class="nb">{</span>zhsong<span class="nb">}}</span> <span class="c">% 宋体</span>
<span class="k">\newcommand*</span><span class="nb">{</span><span class="k">\heiti</span><span class="nb">}{</span><span class="k">\CJKfamily</span><span class="nb">{</span>zhhei<span class="nb">}}</span>   <span class="c">% 黑体</span>
<span class="k">\newcommand*</span><span class="nb">{</span><span class="k">\kaishu</span><span class="nb">}{</span><span class="k">\CJKfamily</span><span class="nb">{</span>zhkai<span class="nb">}}</span>  <span class="c">% 楷书</span>
<span class="k">\newcommand*</span><span class="nb">{</span><span class="k">\fangsong</span><span class="nb">}{</span><span class="k">\CJKfamily</span><span class="nb">{</span>zhfs<span class="nb">}}</span> <span class="c">% 仿宋</span>
<span class="k">\title</span><span class="nb">{</span>Test<span class="nb">}</span>
<span class="k">\author</span><span class="nb">{</span>zhulongsheng(11291065@bjtu.edu.cn)<span class="nb">}</span>
<span class="k">\date</span><span class="nb">{</span>2014/01/28<span class="nb">}</span>
<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>
<span class="k">\maketitle</span>
<span class="k">\today</span>
<span class="k">\section</span><span class="nb">{</span>第一<span class="nb">}</span>
这是第一段
<span class="k">\heiti</span>
<span class="k">\section</span><span class="nb">{</span>第二<span class="nb">}</span>
<span class="k">\kaishu</span>
这是第二段
<span class="k">\subsection</span><span class="nb">{</span>Goal<span class="nb">}</span>
这是
<span class="k">\LaTeX</span>
<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</pre></div>


<p>使用 <em>Ctrl-t</em> 进行实时预览。</p>
<h2>CTeX</h2>
<p>CTeX也使用 MiKTeX，但体积比后者大了一倍多，且汉字处理使用的是已经过时的<em>CJK</em>包，
因此不推荐使用。</p>
<p>从<a href="http://www.ctex.org/">CTeX</a>官网下载安装包<em>CTeX_2.9.2.164_Full.exe</em>，
文件大小1.4GB，安装到<em>D:\apps\CTEX2.9.2</em>下（此目录以下记为$CTEXHOME），
占用空间2.5GB。</p>
<p>用RapidEE将<code>$CTEXHOME/CTeX/cct/bin</code>和<code>$CTEXHOME/MiKTeX/miktex/bin</code>加入到
<em>User</em>的<code>$PATH</code>中，</p>
<p>运行<em>$CTEXHOME/WinEdt/WinEdt.exe</em>，确认主菜单中
Options &gt; Execution Modes &gt; PDF Viewer &gt; PDF Viewer Executable 指向一个可用的
PDF浏览器EXE文件，默认是CTeX自带的SumatraPDF.exe，使用默认值即可。</p>
<p>在编辑器中输入如下代码：</p>
<div class="highlight"><pre><span></span><span class="k">\documentclass</span><span class="na">[12pt]</span><span class="nb">{</span>article<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>CJK<span class="nb">}</span>

<span class="k">\title</span><span class="nb">{</span>Demo Article<span class="nb">}</span>
<span class="k">\author</span><span class="nb">{</span>Li Chao<span class="nb">}</span>
<span class="k">\date</span><span class="nb">{</span><span class="k">\today</span><span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>
<span class="k">\maketitle</span>

<span class="k">\begin</span><span class="nb">{</span>CJK*<span class="nb">}{</span>GBK<span class="nb">}{</span>kai<span class="nb">}</span>
关于示例文档的一些说明。
<span class="k">\end</span><span class="nb">{</span>CJK*<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</pre></div>


<p>保存到本地后，按<em>F9</em>执行编译，如果没有错误，会自动打开SumatraPDF显示结果。
修改文件内容后再按<em>F9</em>，更新内容会直接显示在PDF Viewer中，实现了实时预览。</p>
<p>文章的模板是：</p>
<div class="highlight"><pre><span></span><span class="k">\documentclass</span><span class="na">[12pt]</span><span class="nb">{</span>article<span class="nb">}</span>

<span class="k">\title</span><span class="nb">{</span>…<span class="nb">}</span>
<span class="k">\author</span><span class="nb">{</span>Li Chao<span class="nb">}</span>
<span class="k">\date</span><span class="nb">{</span><span class="k">\today</span><span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>
<span class="k">\maketitle</span>
<span class="c">% Insert content here</span>
<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</pre></div>


<p>如果需要写中文，加上<code>\usepackage{CJK}</code>，在正文中加上<code>\begin{CJK*}{GBK}{kai}</code>和
<code>\end{CJK*}</code>。</p>
<p>Ref:</p>
<p>https://tex.stackexchange.com/questions/85060/pdf-viewer-with-auto-update-for-winedt</p>
<h1>Linux</h1>
<h2>Tex Live + XeTeX</h2>
<p><a href="https://en.wikipedia.org/wiki/TeX">TeX</a> 是一套排版(typesetting)系统，
<a href="https://en.wikipedia.org/wiki/XeTeX">XeTeX</a>是一套基于Unicode实现的、
支持现代字体技术的TeX排版引擎，处理中文非常合适。</p>
<p><a href="https://en.wikipedia.org/wiki/TeX_Live">TeX Live</a>是目前流行的TeX发行版，</p>
<p>在Ubuntu 14.04系统上，使用下面的方法安装并运行Demo：</p>
<div class="highlight"><pre><span></span>sudo apt-get install texlive-xetex texlive-latex-extra
fc-list :outline -f &quot;%{family}\n&quot;   # 得到下文用到的可用字体名称
cat &lt;&lt; EOF &gt; stone.tex
\documentclass[12pt,a4paper]{article}
\usepackage{xltxtra,fontspec,xunicode}
\usepackage[slantfont,boldfont]{xeCJK} % 允许斜体和粗体

\setCJKmainfont{WenQuanYi Micro Hei}   % 设置缺省中文字体
\setCJKmonofont{WenQuanYi Micro Hei Mono}   % 设置等宽字体
\setmainfont{DejaVu Serif}   % 英文衬线字体
\setmonofont{Ubuntu Mono}   % 英文等宽字体

\title{石頭記}
\author{曹雪芹}
\date{}

\begin{document}
\maketitle

\begin{center}
滿紙荒唐言\\
一把辛酸淚\\
都雲作者癡\\
誰解其中味\\
\end{center}

\end{document}
EOF
xelatex stone.tex
evince stone.pdf
</pre></div>


<p>Tex Live安装文件在<code>/usr/share/texlive</code>目录下，
此目录下的<code>texmf-dist</code>目录符合
<a href="https://en.wikipedia.org/wiki/TeX_Directory_Structure">TeX Directory Structure</a>规范。</p>
<p>TeX的package安装在<code>tex</code>目录下，例如<code>nameref</code>这个package安装路径为：</p>
<div class="highlight"><pre><span></span>$ locate nameref
/usr/share/doc/texlive-doc/latex/hyperref/nameref.pdf
/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty
</pre></div>


<p>所以package的定义（至少是一部分）保存在sty文件中。
TeX Live的包管理器叫做<code>tlmgr</code>，可以用<code>tlmgr help</code>查看帮助文档。
但在Ubuntu上执行<code>tlmgr repository list</code>并没有按照预期列出repo，原因不明。</p>
<p>Ref: http://blog.jqian.net/post/xelatex.html</p>
<h2>Texmaker</h2>
<p>Texmaker作为xetex的代码编辑器非常好用，
首先使用<code>sudo apt-get install texmaker</code>安装，
启动软件，在 <em>Options -&gt; Configure Texmaker -&gt; Quick Build</em> 中将
<em>Quick Build Command</em> 设置为 <em>XeLaTeX + View PDF</em>，
然后在 <em>Shortcuts</em> 中将 <em>Quick Build</em> 快捷键设置为 <em>Alt+J</em>，
将 <em>Toggle focus editor/pdf viewer</em> 快捷键设置为 <em>Alt+;</em>，
使用起来就很方便了。</p>
<p>另外，从<a href="http://www.xm1math.net/texmaker/">Texmaker</a>下载的安装包
<em>texmaker_ubuntu_14.04_4.5_amd64.deb</em> 安装失败，报下面的错误：</p>
<div class="highlight"><pre><span></span><span class="n">dpkg</span><span class="o">:</span> <span class="n">error</span> <span class="n">processing</span> <span class="n">archive</span> <span class="n">texmaker_ubuntu_14</span><span class="o">.</span><span class="mi">04</span><span class="n">_4</span><span class="o">.</span><span class="mi">5</span><span class="n">_amd64</span><span class="o">.</span><span class="na">deb</span> <span class="o">(--</span><span class="n">install</span><span class="o">):</span>
 <span class="n">trying</span> <span class="n">to</span> <span class="n">overwrite</span> <span class="s1">&#39;/usr/share/texmaker/texmaker_se.qm&#39;</span><span class="o">,</span> <span class="n">which</span> <span class="k">is</span> <span class="n">also</span> <span class="k">in</span> <span class="k">package</span> <span class="nn">texmaker</span><span class="o">-</span><span class="n">data</span> <span class="mf">4.1</span><span class="o">-</span><span class="mi">1</span>
<span class="n">dpkg</span><span class="o">-</span><span class="n">deb</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">subprocess</span> <span class="n">paste</span> <span class="n">was</span> <span class="n">killed</span> <span class="n">by</span> <span class="n">signal</span> <span class="o">(</span><span class="n">Broken</span> <span class="n">pipe</span><span class="o">)</span>
<span class="n">Errors</span> <span class="n">were</span> <span class="n">encountered</span> <span class="k">while</span> <span class="n">processing</span><span class="o">:</span>
 <span class="n">texmaker_ubuntu_14</span><span class="o">.</span><span class="mi">04</span><span class="n">_4</span><span class="o">.</span><span class="mi">5</span><span class="n">_amd64</span><span class="o">.</span><span class="na">deb</span>
</pre></div>


<h2>Lyx</h2>
<p>Lyx生成的文件使用了自己的扩展名 <em>lyx</em>，且编辑时类似于Office所见即所得，
不能直接改源代码，比较不方便。</p>
<p>另外，没找到如何使用本地字体。</p>
<div class="highlight"><pre><span></span>sudo add-apt-repository ppa:lyx-devel/release
sudo apt update
sudo apt install lyx
sudo apt-get install latex-cjk-all
</pre></div>


<h3>显示汉字</h3>
<p>打开有汉字的文档，作如下设置：</p>
<ul>
<li>
<p>Document -&gt; Settings -&gt; Language -&gt; Language: <em>Chinese (simplified)</em></p>
</li>
<li>
<p>Document -&gt; Settings -&gt; Language -&gt; Encoding: <em>Other -&gt; Unicode (CJK) (utf8)</em></p>
</li>
<li>
<p>Document -&gt; Settings -&gt; Fonts -&gt; CJK: <em>gbsn</em></p>
</li>
</ul>
<h3>其他设置</h3>
<ul>
<li>
<p>显示源代码：<em>View -&gt; Source Pane</em></p>
</li>
<li>
<p>显示文档结构：<em>View -&gt; Outline Pane</em></p>
</li>
</ul>
            
            
            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2017-02-18T17:00:52+08:00">Feb 18, 2017</time>

<h4>Last Updated</h4>
<time datetime="2018-04-03T16:57:54+08:00">Apr 3, 2018</time>

            <h4>Category</h4>
            <a class="category-link" href="/categories.html#tech-ref">Tech</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="/tags.html#latex-ref">latex
                    <span>5</span>
</a></li>
                <li><a href="/tags.html#ubuntu-ref">ubuntu
                    <span>57</span>
</a></li>
                <li><a href="/tags.html#xetex-ref">xetex
                    <span>1</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="#" title="My You can add links in your config file Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-you can add links in your config file sidebar-social-links"></i></a>
    <a href="#" title="My Another social link Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-another social link sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>