<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Li Chao" />
        <meta name="copyright" content="Li Chao" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="conda, python, pip, virtualenv, anaconda, Tech, " />

<meta property="og:title" content="Build Data Analysis Toolkit with Anaconda "/>
<meta property="og:url" content="/build-data-analysis-toolkit-with-anaconda.html" />
<meta property="og:description" content="Setup Download Anaconda installer (Anaconda3-4.3.1-Linux-x86_64.sh) and install it to folder ~/apps/anaconda3 (to uninstall, just remove this folder). Add the following line into ~/.zshenv: PATH=/home/leo/apps/anaconda3/bin:$PATH Create a new environment &#39;myenv&#39; and executable &#39;sqlite3&#39; with: conda create -n myenv sqlite. List environments …" />
<meta property="og:site_name" content="DarkMatter in Cyberspace" />
<meta property="og:article:author" content="Li Chao" />
<meta property="og:article:published_time" content="2016-06-15T18:56:59+08:00" />
<meta property="" content="2017-11-30T16:36:43+08:00" />
<meta name="twitter:title" content="Build Data Analysis Toolkit with Anaconda ">
<meta name="twitter:description" content="Setup Download Anaconda installer (Anaconda3-4.3.1-Linux-x86_64.sh) and install it to folder ~/apps/anaconda3 (to uninstall, just remove this folder). Add the following line into ~/.zshenv: PATH=/home/leo/apps/anaconda3/bin:$PATH Create a new environment &#39;myenv&#39; and executable &#39;sqlite3&#39; with: conda create -n myenv sqlite. List environments …">

        <title>Build Data Analysis Toolkit with Anaconda  · DarkMatter in Cyberspace
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/custom.css" media="screen">
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="/"><span class=site-name>DarkMatter in Cyberspace</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="">Home</a></li>
                            <li ><a href="/categories.html">Categories</a></li>
                            <li ><a href="/tags.html">Tags</a></li>
                            <li ><a href="/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="/build-data-analysis-toolkit-with-anaconda.html"> Build Data Analysis Toolkit with Anaconda  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <hr>
<h1>Setup</h1>
<p>Download Anaconda installer (Anaconda3-4.3.1-Linux-x86_64.sh) and install it
to folder ~/apps/anaconda3 (to uninstall, just remove this folder).</p>
<p>Add the following line into ~/.zshenv:</p>
<div class="highlight"><pre><span></span>PATH=/home/leo/apps/anaconda3/bin:$PATH
</pre></div>


<p>Create a new environment 'myenv' and executable 'sqlite3' with:
<code>conda create -n myenv sqlite</code>.
List environments with <code>conda env list</code>.
Each environment is a folder under '$ANACONDA_HOME/envs'
like which created by <code>virtualenv</code>.
Go into this environment with <code>. activate myenv</code>.
Now run <code>which sqlite3</code>, you can see it's under the current environment folder.
Leave this environment with <code>. deactivate</code>.
Remove this environment with <code>conda remove -n myenv --all</code>.</p>
<p>Create a new Python 2.7 virtual environment with
<code>conda create -n py27 python=2.7</code>, make it the current environment with
<code>source activate py27</code>. You can use this command to switching between any
conda-managed environment without worrying about nested-virtualenv.</p>
<p>If you met an "no such file or directory: activate" error
when running <code>source activate ...</code>, use the full path
<code>~/apps/anaconda3/bin/activate</code> instead of <code>activate</code>.</p>
<p>Anaconda contains many important Python dev tools, including pip, ipython,
conda (which can be used as a replacement for pip and virtualenv).
If you want use it as the primary Python environment, add <code>$ANACONDA_HOME</code>
before the existing <code>$PATH</code>.</p>
<p>But Anaconda has no Python 2.x, so at least on Ubuntu 14.04
this is not the recommended way.
On Ubuntu 16.04, there is no Python 2.x by default, so use Python 3.5 and pip
in Anaconda3 is practical.</p>
<p>Do not add <code>$ANACONDA_HOME</code> after the <code>$PATH</code>, which will expose some binary
like <code>conda, jupyter</code>, while the other (like python and pip) will be covered
by system equivalent. This will lead inconsistent behavior and failure of
<code>conda</code> and <code>jupyter</code>.</p>
<p>Ref:</p>
<p>http://www.ericmajinglong.com/2014/09/23/5-great-things-about-the-anaconda-distribution/</p>
<h1>Notebook</h1>
<p>Start jupyter notebook server with <code>jupyter notebook</code>.
It creates a new window in existing browser session with url
"http://localhost:8888/tree".</p>
<p>Click [New -&gt; Python3] at the right side of the page to create a new notebook
session. In the new page, use [File -&gt; Rename] to give it a name.</p>
<p>When you click any of the notebook file <code>*.ipynb</code> (here is chap01ex.ipynb)
in browser, it will be opened in a new tab with url
"http://localhost:8888/notebooks/chap01ex.ipynb".</p>
<p>Jupyter notebook support all vi-style key shortcuts, which conflicts with
Chrome plugin Vimium. So click the Vimium icon at the right side of the address
bar, and add a rule:</p>
<div class="highlight"><pre><span></span><span class="n">Patterns</span><span class="o">:</span> <span class="n">https</span><span class="o">?://</span><span class="n">localhost</span><span class="o">:</span><span class="mi">8888</span><span class="sr">/notebooks/</span><span class="o">*</span>
</pre></div>


<p>Leave the "Keys" textbox blank, which means disable all keys of Vimium
under this pattern.</p>
<p>For Firefox, in [Tools -&gt; Add-ons -&gt; Extensions -&gt; VimFx -&gt; Blacklist], add
<code>http://localhost:8888/*</code> to disable VimFx key shortcuts on Jupyter web page.</p>
<p>Now you can use jupyter key shortcuts freely.
Use <code>h</code> key list all available shortcuts.
Note that shortcuts listed there are all capital letter,
while actually you should use the corresponding small letter.</p>
<p>Use <code>j</code>/<code>k</code> to select active cell,
<code>&lt;Enter&gt;</code> to edit it,
<code>c</code> to copy,
<code>v</code> to paste,
<code>x</code> to delete it,
<code>a</code>/<code>b</code> to insert before/after acitve cell.</p>
<p>Use <code>m</code> to make text in a cell as markdown text, <code>y</code> to code.</p>
<p>For markdown cell, use <Enter> to edit it, use Ctrl-Enter to run it
(turn text from edit mode to markdown preview mode).</p>
<p>Use Alt-Enter to evaluate the current cell and insert a blank cell below.</p>
<p>Use <code>s</code> to save current notebook and setup a "checkpoint",
use [File -&gt; Revert to Checkpoint] to discard all changes after that checkpoint.</p>
<p>Use <code>o</code> to toggle output of the current cell,
<code>Shift-o</code> to toggle output scrolling.</p>
<p>Use [File -&gt; Download as -&gt; Python(.py)] to create a runnable Python script
from the current jupyter notebook.</p>
<h2>Setup Jupyter Server</h2>
<p>Setup Anaconda server on a CentOS (IP: 192.168.12.233):</p>
<div class="highlight"><pre><span></span>bash Anaconda3-4.3.1-Linux-x86_64.sh   # target path: $HOME/apps/anaconda3
export PATH=$HOME/apps/anaconda3/bin:$PATH
jupyter notebook --generate-config
vi ~/.jupyter/jupyter_notebook_config.py    # see notes below to customize it
jupyter notebook
</pre></div>


<p>Generate password:</p>
<div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">PATH</span><span class="o">=</span><span class="err">$</span><span class="n">HOME</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">anaconda3</span><span class="o">/</span><span class="nb">bin</span><span class="p">:</span><span class="err">$</span><span class="n">PATH</span>
<span class="n">ipython</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">notebook.auth</span> <span class="kn">import</span> <span class="n">passwd</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">passwd</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="s1">&#39;sha1:xxx:xxx&#39;</span>
</pre></div>


<p>The value of <code>Out[2]</code> is the 'password' of the jupyter config file.
Note that the <code>u</code> before the string must be added, or the password doesn't work.</p>
<p>Setup server properties (file ~/.jupyter/jupyter_notebook_config.py):</p>
<div class="highlight"><pre><span></span>c.NotebookApp.ip = &#39;*&#39;
c.NotebookApp.open_browser = False
c.NotebookApp.password = u&#39;sha1:39bfa5b30456:33907b4fb0ecdaa77e772399565096d85bd7dd7d&#39;
c.NotebookApp.port = 7654
</pre></div>


<p>If the server is used only by yourself,
add <code>c.NotebookApp.password_required = False</code>
into the config file to login with a token (printed in the server console).</p>
<p>See <a href="http://jupyter-notebook.readthedocs.io/en/latest/public_server.html">Running a notebook server</a> for details.</p>
<p>Use <code>Ctrl-z</code>, <code>bg</code> and <code>disown</code> to convert it to a daemon process.
There's no elegant way to reattach to this process.
You have to find it's PID with <code>pgrep jupyter</code> and kill it.
Then start the server again.</p>
<p>Now on the client, open 'http://192.168.12.233:7654/' in browser.
Type the password and login.
Click 'New -&gt; Python3' on the right side to create a new notebook.</p>
            
            
            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2016-06-15T18:56:59+08:00">Jun 15, 2016</time>

<h4>Last Updated</h4>
<time datetime="2017-11-30T16:36:43+08:00">Nov 30, 2017</time>

            <h4>Category</h4>
            <a class="category-link" href="/categories.html#tech-ref">Tech</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="/tags.html#anaconda-ref">anaconda
                    <span>4</span>
</a></li>
                <li><a href="/tags.html#conda-ref">conda
                    <span>3</span>
</a></li>
                <li><a href="/tags.html#pip-ref">pip
                    <span>6</span>
</a></li>
                <li><a href="/tags.html#python-ref">python
                    <span>108</span>
</a></li>
                <li><a href="/tags.html#virtualenv-ref">virtualenv
                    <span>3</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="#" title="My You can add links in your config file Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-you can add links in your config file sidebar-social-links"></i></a>
    <a href="#" title="My Another social link Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-another social link sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>